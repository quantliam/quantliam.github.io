<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Accelerated C++ Solutions," />










<meta name="description" content="Exercise 5-5Write a function named center(const vector&amp;amp;) that returns a picture in which all the lines of the original picture are padded out to their full width, and the padding is as evenly divi">
<meta name="keywords" content="Accelerated C++ Solutions">
<meta property="og:type" content="article">
<meta property="og:title" content="Accelerated C++ Solutions to Exercises(Chapter 5 Part 3)">
<meta property="og:url" content="http://www.quanttour.com/19/03/2018/Accelerated-C-Solutions-to-Exercises-Chapter-5-Part-3/index.html">
<meta property="og:site_name" content="Liam&#39;s Blog">
<meta property="og:description" content="Exercise 5-5Write a function named center(const vector&amp;amp;) that returns a picture in which all the lines of the original picture are padded out to their full width, and the padding is as evenly divi">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2018-03-20T10:29:50.755Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Accelerated C++ Solutions to Exercises(Chapter 5 Part 3)">
<meta name="twitter:description" content="Exercise 5-5Write a function named center(const vector&amp;amp;) that returns a picture in which all the lines of the original picture are padded out to their full width, and the padding is as evenly divi">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.quanttour.com/19/03/2018/Accelerated-C-Solutions-to-Exercises-Chapter-5-Part-3/"/>





  <title>Accelerated C++ Solutions to Exercises(Chapter 5 Part 3) | Liam's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Liam's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">If history repeats itself, and the unexpected always happens, how incapable must Man be of learning from experience?—George Bernard Shaw.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.quanttour.com/19/03/2018/Accelerated-C-Solutions-to-Exercises-Chapter-5-Part-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liam">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liam's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Accelerated C++ Solutions to Exercises(Chapter 5 Part 3)</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-19T16:42:37+08:00">
                19-03-2018
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index">
                    <span itemprop="name">Programming</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  3,480
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  22
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Exercise-5-5"><a href="#Exercise-5-5" class="headerlink" title="Exercise 5-5"></a>Exercise 5-5</h1><p>Write a function named center(const vector<string>&amp;) that returns a picture in which all the lines of the original picture are padded out to their full width, and the padding is as evenly divided as possible between the left and right sides of the picture. What are the properties of pictures for which such a function is useful? How can you tell whether a given picture has those properties?</string></p>
<h2 id="Solution-amp-Results"><a href="#Solution-amp-Results" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><p>The full width is the size of the longest string and can be obtained via a <strong>for</strong> loop.<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter = p.begin();</span><br><span class="line">			iter != p.end(); ++iter)</span><br><span class="line">    &#123;</span><br><span class="line">        maxlen = max(maxlen, (*iter).size());</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
<p>The key is to compute the number of spaces (denoted by <strong>paddingLeft</strong>) needed for the left side padding. If we want that the padding is as evenly divided as possible, <strong>paddingLeft</strong> can be set as half of <strong>maxlen - (*iter).size()</strong>, which is the total number of spaces needed to pad out to the full width of a line.</p>
<p>If <strong>(maxlen - (*iter).size())</strong> is even, the numbers of spaces on both sides of the original string are the same (i.e. the case of that padding is evenly divided). </p>
<p>If <strong>(maxlen - (*iter).size())</strong> is odd, <strong>paddingLeft</strong> is in fact has the value of <strong>((maxlen - (*iter).size()) - 1)/2</strong>, and hence is one space less that the right side padding. </p>
<p>In summary, the program logic is</p>
<ol>
<li>find <strong>maxlen</strong>.</li>
<li>compute <strong>paddingLeft</strong>.</li>
<li>construct a new line based on the string in the original picture and <strong>paddingLeft</strong> spaces.</li>
<li>store each new line into a vector<string> and return it once finishes. </string></li>
</ol>
<p>The complete program and tests can be found below. </p>
<p><strong>mainfunction.cpp</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::max;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function declaration</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; center(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;p);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// create an original picture</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; p;</span><br><span class="line">    p.push_back(<span class="string">"this is an"</span>);</span><br><span class="line">    p.push_back(<span class="string">"example"</span>);</span><br><span class="line">    p.push_back(<span class="string">"to"</span>);</span><br><span class="line">    p.push_back(<span class="string">"illustrate"</span>);</span><br><span class="line">    p.push_back(<span class="string">"framing"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// generate the centered picture</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; np = center(p);</span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter = np.begin();</span><br><span class="line">        iter != np.end(); ++iter)</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; *iter &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// define the function that returns a centered picture</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; center(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;p)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; centeredPicture;</span><br><span class="line">    <span class="built_in">string</span>::size_type maxlen = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get the length of the longest string</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter = p.begin();</span><br><span class="line">            iter != p.end(); ++iter)</span><br><span class="line">    &#123;</span><br><span class="line">        maxlen = max(maxlen, (*iter).size());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// pad out the left side</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter = p.begin();</span><br><span class="line">            iter != p.end(); ++iter)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">string</span>::size_type paddingLeft = (maxlen - (*iter).size())/<span class="number">2</span>;</span><br><span class="line">        <span class="built_in">string</span> s = <span class="built_in">string</span>(paddingLeft, <span class="string">' '</span>) + (*iter);</span><br><span class="line">        centeredPicture.push_back(s);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> centeredPicture;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>Test Results</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">this is an</span><br><span class="line"> example</span><br><span class="line">    to</span><br><span class="line">illustrate</span><br><span class="line"> framing</span><br></pre></td></tr></table></figure></p>
<hr>
<h1 id="Exercise-5-6"><a href="#Exercise-5-6" class="headerlink" title="Exercise 5-6"></a>Exercise 5-6</h1><p>Rewrite the extract_fails function from §5.1.1/77 so that instead of erasing each failing student from the input vector v, it copies the records for the passing students to the beginning of v, and then uses the resize function to remove the extra elements from the end of v. How does the performance of this version compare with the one in §5.1.1/77?</p>
<h2 id="Solution-amp-Results-1"><a href="#Solution-amp-Results-1" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><p>The original function is</p>
<p><strong>Method 1</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;Student_info&gt; extract_fails_method1(<span class="built_in">vector</span>&lt;Student_info&gt;&amp; students)</span><br><span class="line">&#123;    </span><br><span class="line">    <span class="built_in">vector</span>&lt;Student_info&gt; fail;    </span><br><span class="line">    <span class="built_in">vector</span>&lt;Student_info&gt;::size_type i = <span class="number">0</span>;    </span><br><span class="line">    <span class="comment">// invariant:elements [0, i) of students represent passing grades     </span></span><br><span class="line">    <span class="keyword">while</span> (i != students.size()) </span><br><span class="line">    &#123;         </span><br><span class="line">        <span class="keyword">if</span> (fgrade(students[i]))</span><br><span class="line">        &#123;            </span><br><span class="line">            fail.push_back(students[i]);            </span><br><span class="line">            students.erase(students.begin() + i);        </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">else</span>            </span><br><span class="line">            ++i;    </span><br><span class="line">    &#125;    </span><br><span class="line">    <span class="keyword">return</span> fail;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>The revised version is</p>
<p><strong>Method 2</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;Student_info&gt; extract_fails_method2(<span class="built_in">vector</span>&lt;Student_info&gt;&amp; students)</span><br><span class="line">&#123;    </span><br><span class="line"></span><br><span class="line">    <span class="built_in">vector</span>&lt;Student_info&gt; fail;    </span><br><span class="line">    <span class="built_in">vector</span>&lt;Student_info&gt;::size_type i = <span class="number">0</span>, j = students.size();  </span><br><span class="line">    <span class="comment">// invariant:elements [0, i) of students represent passing grades     </span></span><br><span class="line">    <span class="keyword">while</span> (i != students.size()) </span><br><span class="line">    &#123;         </span><br><span class="line">        <span class="keyword">if</span> (fgrade(students[i]))</span><br><span class="line">        &#123;     </span><br><span class="line">            fail.push_back(students[i]&#125;;                 </span><br><span class="line">        &#125; </span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;  </span><br><span class="line">            <span class="comment">// the size increases by 1</span></span><br><span class="line">            students.insert(students.begin(), students[i]);  </span><br><span class="line">            <span class="comment">// the indice move forward by 1</span></span><br><span class="line">            ++i;  </span><br><span class="line">        &#125;</span><br><span class="line">        ++i;            </span><br><span class="line">    &#125;</span><br><span class="line">    students.resize(j - fail.size());    </span><br><span class="line">    <span class="keyword">return</span> fail;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>The next step is to measure the performance of these two function, using the same methodology as that applied in <a href="http://quanttour.com/17/03/2018/Accelerated-C-Solutions-to-Exercises-Chapter-5-Part-2/" target="_blank" rel="noopener">Exercise 5-4</a>. I add above two methods into the file <strong>fails.cpp</strong> and <strong>fails.h</strong> as alternatives. To avoid redundancy, I only present the file that contains the main function in below. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Accelerated C++ Solutions Exercises 5-2. 5-3, 5-4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;		// to get declaration of max, sort</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;			// to get declaration of cin, cout, endl</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt;		// to get declaration of domain_error</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;			// to get declaration of string</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;chrono&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Student_info.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"grade.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"fails.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"print.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"info.h"</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;					<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;				<span class="keyword">using</span> <span class="built_in">std</span>::max;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;				<span class="keyword">using</span> <span class="built_in">std</span>::sort;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::domain_error;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    info students;</span><br><span class="line">    Student_info record;</span><br><span class="line">    <span class="built_in">string</span>::size_type maxlen = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// read and store all the records, and find the length of the longest name</span></span><br><span class="line">    <span class="keyword">while</span>(read(<span class="built_in">cin</span>, record))</span><br><span class="line">    &#123;</span><br><span class="line">        maxlen = max(maxlen, record.name.size());</span><br><span class="line">        students.push_back(record);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        info students_copy = students;</span><br><span class="line"></span><br><span class="line">    	<span class="comment">// measure the performance for method1</span></span><br><span class="line">    	<span class="keyword">typedef</span> <span class="built_in">std</span>::chrono::high_resolution_clock Clock;</span><br><span class="line">    	Clock::time_point startTime = Clock::now();	    <span class="comment">// get current time</span></span><br><span class="line">    	info fails = extract_fails_method1(students);	<span class="comment">// extract records for failing students</span></span><br><span class="line">    	Clock::time_point endTime = Clock::now();	    <span class="comment">// get current time</span></span><br><span class="line"></span><br><span class="line">    	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Method 1 took me "</span></span><br><span class="line">    		 &lt;&lt; <span class="built_in">std</span>::chrono::duration_cast&lt;<span class="built_in">std</span>::chrono::duration&lt;<span class="keyword">double</span>&gt;&gt;(endTime - startTime).count()</span><br><span class="line">			 &lt;&lt; <span class="string">" seconds"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// measure the performance for method2</span></span><br><span class="line">    	startTime = Clock::now();	                    <span class="comment">// get current time</span></span><br><span class="line">    	fails = extract_fails_method2(students_copy);	<span class="comment">// extract records for failing students</span></span><br><span class="line">    	endTime = Clock::now();	                        <span class="comment">// get current time</span></span><br><span class="line"></span><br><span class="line">    	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Method 2 took me "</span></span><br><span class="line">    	     &lt;&lt;	<span class="built_in">std</span>::chrono::duration_cast&lt;<span class="built_in">std</span>::chrono::duration&lt;<span class="keyword">double</span>&gt;&gt;(endTime - startTime).count()</span><br><span class="line">    		 &lt;&lt; <span class="string">" seconds"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    	<span class="comment">// write each line of outputs for passing students</span></span><br><span class="line">    	<span class="keyword">if</span> (!students.empty())</span><br><span class="line">    	&#123;</span><br><span class="line">    		<span class="comment">//alphabetize the records</span></span><br><span class="line"></span><br><span class="line">        	sort(students.begin(), students.end(), compare);</span><br><span class="line">        	<span class="comment">// students.sort(compare);</span></span><br><span class="line">        	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Students who passed: "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        	print(students, maxlen);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        	<span class="built_in">cout</span> &lt;&lt; <span class="string">"What a pity! all students failed."</span>;</span><br><span class="line"></span><br><span class="line">    	<span class="comment">// write a blank line</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// write each line of outputs for failing students</span></span><br><span class="line">        <span class="keyword">if</span>(!fails.empty())</span><br><span class="line">        &#123;</span><br><span class="line">        	<span class="comment">//alphabetize the records</span></span><br><span class="line"></span><br><span class="line">        	sort(fails.begin(), fails.end(), compare);</span><br><span class="line">        	<span class="comment">//fails.sort(compare);</span></span><br><span class="line">        	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Students who failed: "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        	print(fails, maxlen);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Congratulations! all students passed."</span>;</span><br><span class="line"></span><br><span class="line">    &#125;<span class="keyword">catch</span>(domain_error e)&#123;</span><br><span class="line">    	<span class="built_in">cout</span> &lt;&lt; e.what();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The table below gives the comparison of these two methods, showing that method 2 performs slightly better than method 1. The result is in fact not reliable as it strongly depends on the number of passing students and failing students contained in the raw data. More experiments need to be done for more robust results.<br>|Number of lines|Method 1-erase| Method 2-insert&amp;resize|<br>| :— | :— | :— |<br>|10|0.000  seconds|0.000  seconds|<br>|1000|0.147114 seconds|0.117083 seconds|<br>|10000|0.848616 seconds|0.735503 seconds|</p>
<hr>
<h1 id="Exercise-5-7"><a href="#Exercise-5-7" class="headerlink" title="Exercise 5-7"></a>Exercise 5-7</h1><p>Given the implementation of frame in §5.8.1/93, and the following code fragment<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; v;</span><br><span class="line">frame(v);</span><br></pre></td></tr></table></figure></p>
<p>describe what happens in this call. In particular, trace through how both the width functiona nd the frame function operate. Now, run this code. If the results differ from your expectations, first understand why your expectations and the program differ, and then change one to match the other.</p>
<h2 id="Solution-amp-Results-2"><a href="#Solution-amp-Results-2" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><p>Let’t recall the <strong>frame</strong> function</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; frame(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;v)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// to hold each rows of framed picture to be written</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ret;</span><br><span class="line">	<span class="comment">// get the length of the longest string</span></span><br><span class="line">	<span class="built_in">string</span>::size_type maxlen = width(v);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// first line of outputs</span></span><br><span class="line">	<span class="function"><span class="built_in">string</span> <span class="title">border</span><span class="params">(maxlen + <span class="number">4</span>, <span class="string">'*'</span>)</span></span>;</span><br><span class="line">	ret.push_back(border);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter = v.begin(); iter != v.end(); ++iter)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// new rows except two border lines</span></span><br><span class="line">		<span class="built_in">string</span> temp = <span class="string">"* "</span> + (*iter) + <span class="built_in">string</span>(maxlen - (*iter).size(), <span class="string">' '</span>) + <span class="string">" *"</span>;</span><br><span class="line">		ret.push_back(temp);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// bottom line of outputs</span></span><br><span class="line">	ret.push_back(border);</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Once calling this function with passing an empty vector<string> <strong>v</strong>, I expected following procedures happen one after another.</string></p>
<ol>
<li>the argument is passed by <strong>const reference</strong>. <strong>v</strong> refers to the empty vector<string> <strong>v</strong>.</string></li>
<li>an empty <strong>vector<string> ret</string></strong> is created.</li>
<li>an object of type <strong>string::size_type</strong> is created and named as <strong>maxlen</strong>. <strong>maxlen</strong> is initialized with a value returned by <strong>width</strong> function. </li>
<li><p>the computer enters into <strong>width</strong> function (as shown below). The arguments is also passed by <strong>const reference</strong> and hence parameter <strong>v</strong> refers to the empty vector<string> <strong>v</strong> defined in the main function.</string></p>
<p>4.1.    object <strong>maxlen</strong> is created and initialized with value of 0.</p>
<p>4.2.    the computer enters into a <strong>for</strong> loop. The init-statement is evaluated and <strong>iter</strong> is initialized as <strong>v.begin()</strong>. Then then condition is evaluated and the result is false as <strong>v.begin() == v.end()</strong> due to the fact that no any elements in the container. </p>
<p>4.3     <strong>for</strong> loop quits and <strong>maxlen</strong> that equals to 0 is returned. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>::<span class="function">size_type <span class="title">width</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">string</span>::size_type maxlen = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter = v.begin(); iter != v.end(); ++iter)</span><br><span class="line">    &#123;</span><br><span class="line">        maxlen = max(maxlen, (*iter).size());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxlen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>the computer goes back to the <strong>frame</strong> function and <strong>maxlen</strong> is initialized with value 0 (step 3 finishes).</p>
</li>
<li>object <strong>border</strong> is created and initialized with 4 asterisks. Then, it is stored into <strong>vector<string> ret</string></strong>.</li>
<li>the next <strong>for</strong> loop is similar to the <strong>for</strong> loop inside the <strong>width</strong> function. It quits and has no any effects.</li>
<li>object <strong>border</strong> is stored into <strong>vector<string> ret</string></strong> again. By then, <strong>ret</strong> has two elements, both of which are strings filled by 4 asterisks.</li>
<li><strong>ret</strong> is returned. The computer goes back to the function caller.</li>
</ol>
<p>According to my expection, the picture returned by <strong>frame</strong> only consist of two lines of strings each formed by 4 asterisks. Let’s verify this the program displayed below.</p>
<p><strong>A complete program</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::max;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function declarations</span></span><br><span class="line"><span class="built_in">string</span>::<span class="function">size_type <span class="title">width</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;v)</span></span>;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; frame(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;v);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; v;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; p = frame(v);</span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::iterator iter = p.begin(); iter != p.end(); ++iter)</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; *iter &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// please fill this part with the width function described above</span></span><br><span class="line"><span class="comment">// please fill this part with the frame function described above</span></span><br></pre></td></tr></table></figure></p>
<p>As expected, the program produces following outputs</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">****</span><br><span class="line">****</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Exercise-5-8"><a href="#Exercise-5-8" class="headerlink" title="Exercise 5-8"></a>Exercise 5-8</h1><p>In the hcat function from §5.8.3/95, what would happen if we defined s outside the scope of the while? Rewrite and execute the program to confirm your hypothesis.</p>
<h2 id="Solution-amp-Results-3"><a href="#Solution-amp-Results-3" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><h3 id="Code-analysis"><a href="#Code-analysis" class="headerlink" title="Code analysis"></a>Code analysis</h3><p>Recalling the <strong>hcat</strong> function:<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; hcat(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;left, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;right)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// to hold the each line of outputs</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ret;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// add one space column between two pictures</span></span><br><span class="line">	<span class="built_in">string</span>::size_type width1 = width(left) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// iterators to look at elements from left and right respectively</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter_i = left.begin(), iter_j = right.begin();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// continue until we've see all rows from two pictures</span></span><br><span class="line">	<span class="keyword">while</span> (iter_i != left.end() || iter_j != right.end())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// construct new string to hold characters from two pictures</span></span><br><span class="line">		<span class="built_in">string</span> s;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// copy a row from left side picture</span></span><br><span class="line">		<span class="keyword">if</span> (iter_i != left.end())</span><br><span class="line">		&#123;</span><br><span class="line">			s  = (*iter_i);</span><br><span class="line">			++iter_i;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// pad to full width</span></span><br><span class="line">		s += <span class="built_in">string</span>(width1 - s.size(), <span class="string">' '</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// copy a row from right picture</span></span><br><span class="line">		<span class="keyword">if</span> (iter_j != left.end())</span><br><span class="line">		&#123;</span><br><span class="line">			s += (*iter_j);</span><br><span class="line">			++iter_j;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// store s into vector to form a new picture</span></span><br><span class="line">		ret.push_back(s);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Let’s analyse what happens if we define <strong>s</strong> outside the scope of the while loop:</p>
<ol>
<li><strong>s</strong> is an empty string before entering into the <strong>while</strong> loop.</li>
<li><p>the first iteration: </p>
<p> 2.1. <strong>s</strong> is assigned with the copy of the first element from the left picture, and then is padded out to the full width (left side).</p>
<p> 2.2. <strong>s</strong> is concatenated with the first element from the right picture.</p>
<p> 2.3. <strong>s</strong> is stored into <strong>vector<string> ret</string></strong> to formatted the first line of the new picture.</p>
</li>
<li><p>the <strong>n</strong>th interation:</p>
<p> case 1: the numbers of rows of both pictures are the same. The process of the rest iterations are similar to the first iteration until the while condition is evaluated to false. As a result, all rows of both pictures are copied into the new picture. The function has the same effect as the original one, where <strong>s</strong> is defined inside the <strong>while</strong> loop.</p>
<p> case 2: the left side picture has less rows than the right side picture. When <strong>iter_i == left.end()</strong> but <strong>iter_j != right.end()</strong>, the first <strong>if</strong> statements are ignored but the next statement (shown below) will result in compilation errors. </p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s += string(width1 - s.size(), &apos; &apos;);</span><br></pre></td></tr></table></figure>
<p> remembering that <strong>s.size()</strong> is the summation of widths of both sides, i.e. width1 plus the width of the right side picture. Therefore, <strong>width1 - s.size()</strong> is negative. </p>
<p> case 3: if left side picture has more rows than the right side picture. The process of the rest iterations are similar to case 1. The function has same effect as the original function, where <strong>s</strong> is defined inside of the <strong>while</strong> loop.</p>
</li>
</ol>
<h3 id="Rewrite-the-original-program"><a href="#Rewrite-the-original-program" class="headerlink" title="Rewrite the original program"></a>Rewrite the original program</h3><p>Now, let’s verify above expectations using following program, covering three cases and two functions(i.e. the original one and the modified one). The files of the program includes <strong>mainfunction.cpp</strong>, <strong>pics.cpp, pics.h, width.cpp. width.h, print.cpp and print.h</strong>. More details about the original program can be found in <a href="http://quanttour.com/14/03/2018/C-Sequential-Containers-Part-2/" target="_blank" rel="noopener">putting strings together</a>.</p>
<p><strong>mainfunction.cpp</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"pics.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"print.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; pic1;</span><br><span class="line">	pic1.push_back(<span class="string">"aaaaaa"</span>);</span><br><span class="line">	pic1.push_back(<span class="string">"bbbbbbbbbbbbb"</span>);</span><br><span class="line">	pic1.push_back(<span class="string">"ccc"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; pic2;</span><br><span class="line">	pic2.push_back(<span class="string">"ddddddddddddd"</span>);</span><br><span class="line">	pic2.push_back(<span class="string">"eeeeeee"</span>);</span><br><span class="line">	pic2.push_back(<span class="string">"fffffffffff"</span>);</span><br><span class="line">	pic2.push_back(<span class="string">"ggggg"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; left, right;</span><br><span class="line">	<span class="comment">// Test case 1</span></span><br><span class="line">	left = right = pic1;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// Test case 2</span></span><br><span class="line">	<span class="comment">// left = pic1; right = pic2;</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">// Test case 3</span></span><br><span class="line">	<span class="comment">// left = pic2; right = pic1;</span></span><br><span class="line"></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; hcatPicture1 = hcat_function1(left, right);</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; hcatPicture2 = hcat_function2(left, right);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"The original function produces a picture shown as follows: "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	print(hcatPicture1);</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"The modified function produces a picture shown as follows: "</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	print(hcatPicture2);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>pics.cpp</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// functions that generate different pictures</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;		// to get declaration of string</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;		// to get declaration of vector</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"width.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"pics.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// to horizontally concatenate two pictures: original function</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; hcat_function1(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;left, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;right)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// to hold the each line of outputs</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ret;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// add one space column between two pictures</span></span><br><span class="line">	<span class="built_in">string</span>::size_type width1 = width(left) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// iterators to look at elements from left and right respectively</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter_i = left.begin(), iter_j = right.begin();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// continue until we've see all rows from two pictures</span></span><br><span class="line">	<span class="keyword">while</span> (iter_i != left.end() || iter_j != right.end())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// construct new string to hold characters from two pictures</span></span><br><span class="line">		<span class="built_in">string</span> s;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// copy a row from left side picture</span></span><br><span class="line">		<span class="keyword">if</span> (iter_i != left.end())</span><br><span class="line">		&#123;</span><br><span class="line">			s  = (*iter_i);</span><br><span class="line">			++iter_i;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// pad to full width</span></span><br><span class="line">		s += <span class="built_in">string</span>(width1 - s.size(), <span class="string">' '</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// copy a row from right picture</span></span><br><span class="line">		<span class="keyword">if</span> (iter_j != left.end())</span><br><span class="line">		&#123;</span><br><span class="line">			s += (*iter_j);</span><br><span class="line">			++iter_j;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// store s into vector to form a new picture</span></span><br><span class="line">		ret.push_back(s);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// to horizontally concatenate two pictures: modified function</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; hcat_function2(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;left, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;right)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="comment">// to hold the each line of outputs</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ret;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// add one space column between two pictures</span></span><br><span class="line">	<span class="built_in">string</span>::size_type width1 = width(left) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// iterators to look at elements from left and right respectively</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter_i = left.begin(), iter_j = right.begin();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// construct new string to hold characters from two pictures</span></span><br><span class="line">	<span class="built_in">string</span> s;</span><br><span class="line">	<span class="comment">// continue until we've see all rows from two pictures</span></span><br><span class="line">	<span class="keyword">while</span> (iter_i != left.end() || iter_j != right.end())</span><br><span class="line">	&#123;</span><br><span class="line">        <span class="comment">// copy a row from left side picture</span></span><br><span class="line">        <span class="keyword">if</span> (iter_i != left.end())</span><br><span class="line">        &#123;</span><br><span class="line">            s  = (*iter_i);</span><br><span class="line">            ++iter_i;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// pad to full width</span></span><br><span class="line">        s += <span class="built_in">string</span>(width1 - s.size(), <span class="string">' '</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// copy a row from right picture</span></span><br><span class="line">        <span class="keyword">if</span> (iter_j != right.end())</span><br><span class="line">        &#123;</span><br><span class="line">            s += (*iter_j);</span><br><span class="line">            ++iter_j;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// store s into vector to form a new picture</span></span><br><span class="line">        ret.push_back(s);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>pics.h</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> GUARD_PICS_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GUARD_PICS_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; hcat_function1(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; &amp;left,</span><br><span class="line">		<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; &amp;right);</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; hcat_function2(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; &amp;left,</span><br><span class="line">		<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; &amp;right);</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">/* GUARD_PICS_H */</span></span></span><br></pre></td></tr></table></figure></p>
<p><strong>width.cpp</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function returns the size of the longest string in a vector&lt;string&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;	 // to get declaration of string</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;	 // to get declaration of vector</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt; // to get declaration of max</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"width.h"</span>	 <span class="comment">// to get declaration of the function itself</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;  <span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::max;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">string</span>::<span class="function">size_type <span class="title">width</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">string</span>::size_type maxlen = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter = v.begin(); iter != v.end(); ++iter)</span><br><span class="line">    &#123;</span><br><span class="line">        maxlen = max(maxlen, (*iter).size());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxlen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>width.h</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> GUARD_WIDTH_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GUARD_WIDTH_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">string</span>::<span class="function">size_type <span class="title">width</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; &amp;v)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">/* GUARD_WIDTH_H */</span></span></span><br></pre></td></tr></table></figure></p>
<p><strong>print.cpp</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function to write each elements from a vector&lt;string&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"print.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;		// to get declaration of cout and endl</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;		// to get declaration of string</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;		// to get declaration of vector</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;pics)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// loop thru the vector and write elements one by one</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter = pics.begin(); iter != pics.end(); ++iter)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; (*iter) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>print.h</strong><br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> GUARD_OUTPUT_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GUARD_OUTPUT_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">print</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; &amp;pics)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">/* GUARD_OUTPUT_H */</span></span></span><br></pre></td></tr></table></figure></p>
<h3 id="Test-results"><a href="#Test-results" class="headerlink" title="Test results"></a>Test results</h3><p><strong>Case 1</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">The original function produces a picture shown as follows: </span><br><span class="line">aaaaaa        aaaaaa</span><br><span class="line">bbbbbbbbbbbbb bbbbbbbbbbbbb</span><br><span class="line">ccc           ccc</span><br><span class="line"></span><br><span class="line">The modified function produces a picture shown as follows: </span><br><span class="line">aaaaaa        aaaaaa</span><br><span class="line">bbbbbbbbbbbbb bbbbbbbbbbbbb</span><br><span class="line">ccc           ccc</span><br></pre></td></tr></table></figure></p>
<p><strong>Case 2</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">This application has requested the Runtime to terminate it in an unusual way. </span><br><span class="line">Please contact the application&apos;s support team for more information. </span><br><span class="line">terminate called after throwing an instance of &apos;std::length_error&apos; </span><br><span class="line">what():  basic_string::_M_create</span><br></pre></td></tr></table></figure></p>
<p><strong>Case 3</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">The original function produces a picture shown as follows: </span><br><span class="line">ddddddddddddd aaaaaa</span><br><span class="line">eeeeeee       bbbbbbbbbbbbb</span><br><span class="line">fffffffffff   ccc</span><br><span class="line">ggggg         </span><br><span class="line"></span><br><span class="line">The modified function produces a picture shown as follows: </span><br><span class="line">ddddddddddddd aaaaaa</span><br><span class="line">eeeeeee       bbbbbbbbbbbbb</span><br><span class="line">fffffffffff   ccc</span><br><span class="line">ggggg</span><br></pre></td></tr></table></figure></p>
<p>The results of all three cases are exactly as I expected and analysed in last section.</p>
<hr>
<p>To be continued.</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Accelerated-C-Solutions/" rel="tag"># Accelerated C++ Solutions</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/17/03/2018/Accelerated-C-Solutions-to-Exercises-Chapter-5-Part-2/" rel="next" title="Accelerated C++ Solutions to Exercises(Chapter 5 Part 2)">
                <i class="fa fa-chevron-left"></i> Accelerated C++ Solutions to Exercises(Chapter 5 Part 2)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/20/03/2018/Accelerated-C-Solutions-to-Exercise-Chapter-5-Part-4/" rel="prev" title="Accelerated C++ Solutions to Exercises(Chapter 5 Part 4)">
                Accelerated C++ Solutions to Exercises(Chapter 5 Part 4) <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Liam</p>
              <p class="site-description motion-element" itemprop="description">Stochastic Modelling Notes; Programming Notes</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">45</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">6</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/quantliam" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:yanshijiutu@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Exercise-5-5"><span class="nav-number">1.</span> <span class="nav-text">Exercise 5-5</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Solution-amp-Results"><span class="nav-number">1.1.</span> <span class="nav-text">Solution &amp; Results</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Exercise-5-6"><span class="nav-number">2.</span> <span class="nav-text">Exercise 5-6</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Solution-amp-Results-1"><span class="nav-number">2.1.</span> <span class="nav-text">Solution &amp; Results</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Exercise-5-7"><span class="nav-number">3.</span> <span class="nav-text">Exercise 5-7</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Solution-amp-Results-2"><span class="nav-number">3.1.</span> <span class="nav-text">Solution &amp; Results</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Exercise-5-8"><span class="nav-number">4.</span> <span class="nav-text">Exercise 5-8</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Solution-amp-Results-3"><span class="nav-number">4.1.</span> <span class="nav-text">Solution &amp; Results</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Code-analysis"><span class="nav-number">4.1.1.</span> <span class="nav-text">Code analysis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Rewrite-the-original-program"><span class="nav-number">4.1.2.</span> <span class="nav-text">Rewrite the original program</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Test-results"><span class="nav-number">4.1.3.</span> <span class="nav-text">Test results</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liam</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">109.2k</span>
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
