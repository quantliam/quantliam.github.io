<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Times New Roman:300,300italic,400,400italic,700,700italic|Courier New:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"quantein.com","root":"/","scheme":"Muse","version":"7.7.2","exturl":false,"sidebar":{"position":"right","display":"post","padding":60,"offset":12,"onmobile":true},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Stochastic Modelling Notes; Programming Notes">
<meta property="og:type" content="website">
<meta property="og:title" content="Liam&#39;s Blog">
<meta property="og:url" content="http://quantein.com/page/5/index.html">
<meta property="og:site_name" content="Liam&#39;s Blog">
<meta property="og:description" content="Stochastic Modelling Notes; Programming Notes">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Liam">
<meta property="article:tag" content="Stochastic Modelling Notes; Programming Notes">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://quantein.com/page/5/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false
  };
</script>

  <title>Liam's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Liam's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">If history repeats itself, and the unexpected always happens, how incapable must Man be of learning from experience?—George Bernard Shaw.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="search-pop-overlay">
  <div class="popup search-popup">
      <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="Searching..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

  </div>
</div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

  <a href="https://github.com/quantliam" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://quantein.com/2018/03/14/C-Sequential-Containers-Part-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liam">
      <meta itemprop="description" content="Stochastic Modelling Notes; Programming Notes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liam's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/14/C-Sequential-Containers-Part-2/" class="post-title-link" itemprop="url">C++ - Sequential Containers (Part 2)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-14 05:16:04" itemprop="dateCreated datePublished" datetime="2018-03-14T05:16:04+08:00">2018-03-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-03-20 18:24:38" itemprop="dateModified" datetime="2018-03-20T18:24:38+08:00">2018-03-20</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span></span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>NaN:aN</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Putting-strings-together"><a href="#Putting-strings-together" class="headerlink" title="Putting strings together"></a>Putting strings together</h1><p>This part provides a series of exercises about various concatenations of strings. The topic is similar to that in <a href="http://quanttour.com/23/02/2018/C-Looping-and-counting/" target="_blank" rel="noopener">Chpater 2 Looping and counting</a>. </p>
<h2 id="Exercise-1"><a href="#Exercise-1" class="headerlink" title="Exercise 1"></a>Exercise 1</h2><p>Briefly speaking, the first exercise requires us to design a program that can add a frame for a picture (shown as below).</p>
<p><strong>The original picture</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">this is an</span><br><span class="line">example</span><br><span class="line">to</span><br><span class="line">illustrate</span><br><span class="line">framing</span><br></pre></td></tr></table></figure>
<p><strong>The framed picture</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">**************</span><br><span class="line">* this is an *</span><br><span class="line">* example    *</span><br><span class="line">* to         *</span><br><span class="line">* illustrate *</span><br><span class="line">* framing    *</span><br><span class="line">* ************</span><br></pre></td></tr></table></figure>
<p>The original picture is in fact formed by several lines of strings, of which each string is an element stored in the vector named <strong>p</strong>. The framed picture adds four edges for the original picture with asterisks. There is one space between the left-edge and the initial character of the strings, and one space between the right-edge and the end of the longest string. </p>
<h2 id="Exercise-2"><a href="#Exercise-2" class="headerlink" title="Exercise 2"></a>Exercise 2</h2><p>Once we have the framed picture, we can vertically concatenate it with the original one. The program should generate a final picture like this</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">this is an</span><br><span class="line">example</span><br><span class="line">to</span><br><span class="line">illustrate</span><br><span class="line">framing</span><br><span class="line">**************</span><br><span class="line">* this is an *</span><br><span class="line">* example    *</span><br><span class="line">* to         *</span><br><span class="line">* illustrate *</span><br><span class="line">* framing    *</span><br><span class="line">**************</span><br></pre></td></tr></table></figure>
<p>Two pictures are lined up along the left-hand border.</p>
<h2 id="Exercise-3"><a href="#Exercise-3" class="headerlink" title="Exercise 3"></a>Exercise 3</h2><p>We can also perform horizontal concatenation on two pictures like the below picture shows</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">this is an **************</span><br><span class="line">example    * this is an *</span><br><span class="line">to         * example    *</span><br><span class="line">illustrate * to         *</span><br><span class="line">framing    * illustrate *</span><br><span class="line">           * framing    *</span><br><span class="line">           **************</span><br></pre></td></tr></table></figure>
<p>Two pictures are lined up along the top border. In addition, there is a blank column that seperates two pictures. </p>
<h2 id="Solutions"><a href="#Solutions" class="headerlink" title="Solutions"></a>Solutions</h2><p>The book provides solutions to each exercise listed above, I’ll put all together and write a program that can generate above pictures once.</p>
<h3 id="The-framed-picture"><a href="#The-framed-picture" class="headerlink" title="The framed picture"></a>The framed picture</h3><p>Framing a picture is an old question. The solution strategy can be divided into three steps</p>
<ol>
<li>obtain the length (denoted by <strong>maxlen</strong>) of the longest string in <strong>p</strong> as the width of the framed picture depends on <strong>maxlen</strong>.</li>
<li>create a string object that filled by asterisks for generating the top line and bottom line. The number of the astersiks is <strong>maxlen + 4</strong>.</li>
<li>the middle lines are formed by 1 space character and the corresponding string in <strong>p</strong>, and a certain number of spaces. The number of spaces is the difference between the <strong>maxlen</strong> and the size of the corresponding string to be concatenated. </li>
</ol>
<p>Below shows the function that gives the length of the longest string in a object of vector<string>. I uses iterators instead of indices for all functions.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">string</span>::size_type <span class="title">width</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">string</span>::size_type maxlen = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter = v.<span class="built_in">begin</span>(); iter != v.<span class="built_in">end</span>(); ++iter)</span><br><span class="line">    &#123;</span><br><span class="line">        maxlen = <span class="built_in">max</span>(maxlen, (*iter).<span class="built_in">size</span>());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> maxlen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The function below generates the framed picture while keeping the original picture unchanged.  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">frame</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// to hold each rows of framed picture to be written</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ret;</span><br><span class="line">	<span class="comment">// get the length of the longest string</span></span><br><span class="line">	<span class="built_in">string</span>::size_type maxlen = <span class="built_in">width</span>(v);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// first line of outputs</span></span><br><span class="line">	<span class="function"><span class="built_in">string</span> <span class="title">border</span><span class="params">(maxlen + <span class="number">4</span>, <span class="string">'*'</span>)</span></span>;</span><br><span class="line">	ret.push_back(border);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter = v.<span class="built_in">begin</span>(); iter != v.<span class="built_in">end</span>(); ++iter)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// new rows except two border lines</span></span><br><span class="line">		<span class="built_in">string</span> temp = <span class="string">"* "</span> + (*iter) + <span class="built_in">string</span>(maxlen - (*iter).<span class="built_in">size</span>(), <span class="string">' '</span>) + <span class="string">" *"</span>;</span><br><span class="line">		ret.push_back(temp);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// bottom line of outputs</span></span><br><span class="line">	ret.push_back(border);</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Vertical-concatenation"><a href="#Vertical-concatenation" class="headerlink" title="Vertical concatenation"></a>Vertical concatenation</h3><p>In fact we can generate the required picture without concatenation. The first step is to generate the original picture and then the second step is to generate the framed picture. They are closely connect if no blank line between two outputs. This implies that we can create a new object of <strong>verctor<string></strong> and copy all strings contained in two pictures into it. The function is shown below.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">vcat</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;top, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;bottom)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// copy the top picture</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ret = top;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// copy the bottom picture one line by one line</span></span><br><span class="line">    ret.insert(ret.<span class="built_in">end</span>(), bottom.<span class="built_in">begin</span>(), bottom.<span class="built_in">end</span>());</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>What’s new here is the <strong>insert</strong> function. <strong>vector</strong>, <strong>string</strong> and <strong>list</strong> all support <strong>insert</strong> function. The first parameter of this <strong>insert</strong> function means that the new elements will be inserted into a position that before the parameter specifies. The second and the third parameters indicate that the elements in the range of [bottom.begin(), bottom.end()) will be copied and inserted. This increases the length of vector. It has the same effect as the for loops shown below.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator i = bottom.<span class="built_in">begin</span>(); i != bottom.<span class="built_in">end</span>(); ++i)</span><br><span class="line">&#123;</span><br><span class="line">	ret.push_back((*i));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Horizontal-concatenation"><a href="#Horizontal-concatenation" class="headerlink" title="Horizontal concatenation"></a>Horizontal concatenation</h3><p>Similar to vertical voncatenation, we can generate the required picture without concatenation through alternately write rows of the original picture and the framed picture until all rows from two pictures are written. If the number of rows of two pictures are different, the one that has less number of rows will be replenished with blank strings. </p>
<p>Therefore, the key to the solution is to concatenate two strings, of which one from the original picture and another from the framed picture. As we did in the fisrt exercise, we need to pad enough spaces for each row of the original picture. Now, the number of spaces will be the difference between <strong>maxlen + 1</strong> and the size of each string itself as we want one space column between two pictures. The code below show the function.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">hcat</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;left, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;right)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// to hold the each line of outputs</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ret;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// add one space column between two pictures</span></span><br><span class="line">	<span class="built_in">string</span>::size_type width1 = <span class="built_in">width</span>(left) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// iterators to look at elements from left and right respectively</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter_i = left.<span class="built_in">begin</span>(), iter_j = right.<span class="built_in">begin</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// continue until we've see all rows from two pictures</span></span><br><span class="line">	<span class="keyword">while</span> (iter_i != left.<span class="built_in">end</span>() || iter_j != right.<span class="built_in">end</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// construct new string to hold characters from two pictures</span></span><br><span class="line">		<span class="built_in">string</span> s;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// copy a row from left side picture</span></span><br><span class="line">		<span class="keyword">if</span> (iter_i != left.<span class="built_in">end</span>())</span><br><span class="line">		&#123;</span><br><span class="line">			s  = (*iter_i);</span><br><span class="line">			++iter_i;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// pad to full width</span></span><br><span class="line">		s += <span class="built_in">string</span>(width1 - s.<span class="built_in">size</span>(), <span class="string">' '</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// copy a row from right picture</span></span><br><span class="line">		<span class="keyword">if</span> (iter_j != left.<span class="built_in">end</span>())</span><br><span class="line">		&#123;</span><br><span class="line">			s += (*iter_j);</span><br><span class="line">			++iter_j;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// store s into vector to form a new picture</span></span><br><span class="line">		ret.push_back(s);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="A-complete-program"><a href="#A-complete-program" class="headerlink" title="A complete program"></a>A complete program</h1><p>I package all three pictures into one file and the width function into another file. In addition, I define a function more to deal with output. All files are displayed below with detailed comments for each step.<br><strong>output.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function to write each elements from a vector&lt;string&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;		// to get declaration of cout and endl</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;		// to get declaration of string</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;		// to get declaration of vector</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"output.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">output</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;pics)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// loop thru the vector and write elements one by one</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter = pics.<span class="built_in">begin</span>(); iter != pics.<span class="built_in">end</span>(); ++iter)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; (*iter) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>output.h</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> GUARD_OUTPUT_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GUARD_OUTPUT_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">output</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; &amp;pics)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">/* GUARD_OUTPUT_H */</span></span></span><br></pre></td></tr></table></figure>

<p><strong>width.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function returns the size of the longest string in a vector&lt;string&gt;</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;	 // to get declaration of string</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;	 // to get declaration of vector</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt; // to get declaration of max</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"width.h"</span>	 <span class="comment">// to get declaration of the function itself</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;  <span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">max</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">string</span>::size_type <span class="title">width</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">string</span>::size_type maxlen = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter = v.<span class="built_in">begin</span>(); iter != v.<span class="built_in">end</span>(); ++iter)</span><br><span class="line">	&#123;</span><br><span class="line">		maxlen = <span class="built_in">max</span>(maxlen, (*iter).<span class="built_in">size</span>());</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> maxlen;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>width.h</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> GUARD_WIDTH_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GUARD_WIDTH_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="function"><span class="built_in">string</span>::size_type <span class="title">width</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; &amp;v)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">/* GUARD_WIDTH_H */</span></span></span><br></pre></td></tr></table></figure>

<p><strong>pics.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// functions that generate different pictures</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;		// to get declaration of string</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;		// to get declaration of vector</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"width.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"pics.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function to generate a framed picture</span></span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">frame</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;v)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// to hold each rows of framed picture to be written</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ret;</span><br><span class="line">	<span class="comment">// get the length of the longest string</span></span><br><span class="line">	<span class="built_in">string</span>::size_type maxlen = <span class="built_in">width</span>(v);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// first line of outputs</span></span><br><span class="line">	<span class="function"><span class="built_in">string</span> <span class="title">border</span><span class="params">(maxlen + <span class="number">4</span>, <span class="string">'*'</span>)</span></span>;</span><br><span class="line">	ret.push_back(border);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter = v.<span class="built_in">begin</span>(); iter != v.<span class="built_in">end</span>(); ++iter)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// new rows except two border lines</span></span><br><span class="line">		<span class="built_in">string</span> temp = <span class="string">"* "</span> + (*iter) + <span class="built_in">string</span>(maxlen - (*iter).<span class="built_in">size</span>(), <span class="string">' '</span>) + <span class="string">" *"</span>;</span><br><span class="line">		ret.push_back(temp);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// bottom line of outputs</span></span><br><span class="line">	ret.push_back(border);</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function to vertically concatenate two pictures</span></span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">vcat</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;top, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;bottom)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// copy the top picture</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ret = top;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// copy the bottom picture one line by one line</span></span><br><span class="line">	ret.insert(ret.<span class="built_in">end</span>(), bottom.<span class="built_in">begin</span>(), bottom.<span class="built_in">end</span>());</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function to horizontally concatenate two pictures</span></span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">hcat</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;left, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; &amp;right)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// to hold the each line of outputs</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ret;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// add one space column between two pictures</span></span><br><span class="line">	<span class="built_in">string</span>::size_type width1 = <span class="built_in">width</span>(left) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// iterators to look at elements from left and right respectively</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::const_iterator iter_i = left.<span class="built_in">begin</span>(), iter_j = right.<span class="built_in">begin</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// continue until we've see all rows from two pictures</span></span><br><span class="line">	<span class="keyword">while</span> (iter_i != left.<span class="built_in">end</span>() || iter_j != right.<span class="built_in">end</span>())</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// construct new string to hold characters from two pictures</span></span><br><span class="line">		<span class="built_in">string</span> s;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// copy a row from left side picture</span></span><br><span class="line">		<span class="keyword">if</span> (iter_i != left.<span class="built_in">end</span>())</span><br><span class="line">		&#123;</span><br><span class="line">			s  = (*iter_i);</span><br><span class="line">			++iter_i;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">// pad to full width</span></span><br><span class="line">		s += <span class="built_in">string</span>(width1 - s.<span class="built_in">size</span>(), <span class="string">' '</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// copy a row from right picture</span></span><br><span class="line">		<span class="keyword">if</span> (iter_j != right.<span class="built_in">end</span>())</span><br><span class="line">		&#123;</span><br><span class="line">			s += (*iter_j);</span><br><span class="line">			++iter_j;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// store s into vector to form a new picture</span></span><br><span class="line">		ret.push_back(s);</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>pics.h</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> GUARD_PICS_H</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GUARD_PICS_H</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; <span class="title">frame</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; &amp;v)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; <span class="title">vcat</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; &amp;top,</span></span></span><br><span class="line"><span class="function"><span class="params">		<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; &amp;bottom)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; <span class="title">hcat</span><span class="params">(<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; &amp;left,</span></span></span><br><span class="line"><span class="function"><span class="params">		<span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>&gt; &amp;right)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">/* GUARD_PICS_H */</span></span></span><br></pre></td></tr></table></figure>

<p><strong>mainfunction.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;		// to get declaration of cout and endl</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;		// to get declaration of string</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;		// to get declaration of vector</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"width.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"pics.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"output.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// to hold the original picture</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; p;</span><br><span class="line">	p.push_back(<span class="string">"this is an"</span>);</span><br><span class="line">	p.push_back(<span class="string">"example"</span>);</span><br><span class="line">	p.push_back(<span class="string">"to"</span>);</span><br><span class="line">	p.push_back(<span class="string">"illustrate"</span>);</span><br><span class="line">	p.push_back(<span class="string">"framing"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; p1 = frame(p);</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; p2 = vcat(p, p1);</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; p3 = hcat(p, p1);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	output(p);		<span class="comment">// print the original picture</span></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;	<span class="comment">// write a blank line to seperate two pictures</span></span><br><span class="line">	output(p1);		<span class="comment">// print the framed picture</span></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	output(p2);		<span class="comment">// print the vertically concatenated picture of p and p1</span></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	output(p3);		<span class="comment">// print the horizontally concatenated picture of p and p1</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Test-performance"><a href="#Test-performance" class="headerlink" title="Test performance"></a>Test performance</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">this is an</span><br><span class="line">example</span><br><span class="line">to</span><br><span class="line">illustrate</span><br><span class="line">framing</span><br><span class="line"></span><br><span class="line">**************</span><br><span class="line">* this is an *</span><br><span class="line">* example    *</span><br><span class="line">* to         *</span><br><span class="line">* illustrate *</span><br><span class="line">* framing    *</span><br><span class="line">**************</span><br><span class="line"></span><br><span class="line">this is an</span><br><span class="line">example</span><br><span class="line">to</span><br><span class="line">illustrate</span><br><span class="line">framing</span><br><span class="line">**************</span><br><span class="line">* this is an *</span><br><span class="line">* example    *</span><br><span class="line">* to         *</span><br><span class="line">* illustrate *</span><br><span class="line">* framing    *</span><br><span class="line">**************</span><br><span class="line"></span><br><span class="line">this is an **************</span><br><span class="line">example    * this is an *</span><br><span class="line">to         * example    *</span><br><span class="line">illustrate * to         *</span><br><span class="line">framing    * illustrate *</span><br><span class="line">           * framing    *</span><br><span class="line">           **************</span><br></pre></td></tr></table></figure>
<p>The program works perfectly. </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://quantein.com/2018/03/13/C-Sequential-Containers/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liam">
      <meta itemprop="description" content="Stochastic Modelling Notes; Programming Notes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liam's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/13/C-Sequential-Containers/" class="post-title-link" itemprop="url">C++ - Sequential Containers (Part 1)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-13 01:52:08" itemprop="dateCreated datePublished" datetime="2018-03-13T01:52:08+08:00">2018-03-13</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-03-14 13:15:03" itemprop="dateModified" datetime="2018-03-14T13:15:03+08:00">2018-03-14</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span></span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>NaN:aN</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Recalling the student-grading program in <a href="http://quanttour.com/08/03/2018/Organizing-programs-and-data-Part-2/" target="_blank" rel="noopener">Organizing programs with data structures</a>, and thinking about how to separate students into two categories, passed and failed according to their final grades. Let’s define pass/fail criteria in final grades.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// predicate to determine whether a student failed</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">fgrade</span><span class="params">(<span class="keyword">const</span> Student_info &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> grade(s) &lt; <span class="number">60</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If the computed grade is less than 60, it is a failing grade and the predicate yields a true value.</p>
<h1 id="vector"><a href="#vector" class="headerlink" title="vector"></a>vector</h1><h2 id="An-indices-approach"><a href="#An-indices-approach" class="headerlink" title="An indices approach"></a>An <strong>indices</strong> approach</h2><p>The next is to examine each element in <strong>students</strong> based on the function <strong>fgrade</strong>, and store the records for the students who failed and who passed seperately.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;Student_info&gt; <span class="title">extract_fails</span><span class="params">(<span class="built_in">vector</span>&lt;Student_info&gt; &amp;students)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Student_info&gt; pass, fail;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Student_info&gt;::size_type i = <span class="number">0</span>;</span><br><span class="line">        i != students.<span class="built_in">size</span>(); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (fgrade(students[i]))</span><br><span class="line">            fail.push_back(students[i]);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            pass.push_back(students[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    students = pass;</span><br><span class="line">    <span class="keyword">return</span> fail;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This function returns a vector named <strong>fail</strong> which contains the records for students who failed, and changes the original <strong>students</strong> to a vector which contains only the records for students who passed. It can be seen that the vector <strong>pass</strong> exists temporarily and seems to be superfluous from the perspective of the limited memory. </p>
<p>Alternatively, we can remove the <strong>pass</strong> and operate on the original <strong>student</strong> directly. The member function <strong>erase</strong> defined in the class template <strong>vector</strong> allows users to remove elements, either a single or a range, from a vector. Now let’s see how to change above code using <strong>erase</strong>.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;Student_info&gt; <span class="title">extract_fails</span><span class="params">(<span class="built_in">vector</span>&lt;Student_info&gt; &amp;students)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Student_info&gt; fail;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Student_info&gt;::size_type i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// loop invariant: [0, i) of students represent passing grades</span></span><br><span class="line">    <span class="keyword">while</span>(i != students.<span class="built_in">size</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(fgrade(students[i]))</span><br><span class="line">        &#123;</span><br><span class="line">            fail.pushback(students[i]);</span><br><span class="line">            students.erase(students.<span class="built_in">begin</span>() + i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            ++i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fail;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This function only creates one vector to hold the records for students who failed. The logic is quite straightforward：</p>
<ol>
<li>when the first iteration starts, <strong>i</strong> is 0 and <strong>students.size()</strong> yields the original length of the vector.</li>
<li>then, the while body is executed. If the ith student failed, the record will be stored into <strong>fail</strong>, and also be erased from the original vector. Noting that there are two side effects: first, the length of the vector decreases by 1; the index of all reminder elements move forward by 1. By then,the element students[1] in the original vector now becomes students[0] in the new vector as the original studnets[0] has been removed. Therefore, the examination starts from i = 0 again. </li>
<li>if the ith student passed, the record will be kept and the next loop examines the following element, i.e. students[i+1]. Therefore, i increases by 1 before the end of the current loop preparing for next loop.</li>
</ol>
<p>What’s new here is the arguments of <strong>erase</strong> function.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">students.erase(students.<span class="built_in">begin</span>() + i);</span><br></pre></td></tr></table></figure>
<p>We have mentioned in previous chapters that <strong>students.begin()</strong> denotes the initial element (i.e. corresponding to index 0) in the vector <strong>students</strong>. Increasing by i, the arguments denotes the <strong>i</strong>th element. The reason to use <strong>students.begin()</strong> is that the parameter type defined in <strong>erase</strong> is <strong>const_iterator</strong> (this is discussed laster). </p>
<p>Due to the length of the vector is not fixed, the <strong>students.size()</strong> should be used in the condition as it always yields the current length when it is evaluated. If a precomputed size is used, e.g. using size defined as below to replace <strong>students.size()</strong>, students[i] may refer to nonexist elements or the loop becomes endless once any of elements is removed. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;Student_info&gt;::size_type <span class="built_in">size</span> = students.<span class="built_in">size</span>();</span><br></pre></td></tr></table></figure>

<h2 id="An-iterators-approach"><a href="#An-iterators-approach" class="headerlink" title="An iterators approach"></a>An <strong>iterators</strong> approach</h2><p>It has been observed that each function defined above access elements from the <strong>vector</strong> in sequential order. Also it is known that <strong>indices</strong> allows us to access at random. From the perspective of the library, using <strong>indices</strong> has the same effect as that we request permissions to access elements randomly. In other words, <strong>indices</strong> privide the ability that we don’t want to use or we don’t need at all.  </p>
<p>Beyond <strong>indices</strong>, C++ supports another mechanism <strong>iterators</strong> that we can use to access elements in a vector. Not all standard containers support indices, but all standard containers supports <strong>iterators</strong>.</p>
<p><strong>iterators</strong> provide more flexibility in supporting certain operations depending on different types of containers. </p>
<p>In specific, an iterator is a value that </p>
<ul>
<li>identifies a container and an element in the container</li>
<li>let us examine the value stored in that element</li>
<li>provides operations for moving between elements in the container</li>
<li>restricts the available operations in ways that correspond to what the container can handle efficiently.</li>
</ul>
<h3 id="the-syntax"><a href="#the-syntax" class="headerlink" title="the syntax"></a>the syntax</h3><p>If we use indices for the iteration, for example, </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Student_info&gt;::size_type i = <span class="number">0</span>; </span><br><span class="line">    i != students.<span class="built_in">size</span>(); ++i)</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; students[i].name &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<p>alternatively, we can use iterators also</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Student_info&gt;::const_iterator iter = students.<span class="built_in">begin</span>(); iter != students.<span class="built_in">end</span>(); ++iter)</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; (*iter).name &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<p>From above code, we know that the type of the <strong>iter</strong> is<br><strong>vector<Student_info>::const_iterator</strong>. More general, <strong>vector</strong> defines two associated itertor types:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;type&gt;::const_iterator</span><br><span class="line">vector&lt;type&gt;::iterator</span><br></pre></td></tr></table></figure>
<p>The difference is that <strong>iterators</strong> of type <strong>const_iterator</strong> have only read access. If we want to use an <strong>iterator</strong> to change values in a vector, we should define it using <strong>iterator</strong> type.  </p>
<p>In addition, <strong>iter</strong> is initialized with the value of <strong>students.begin()</strong>. <strong>begin</strong> and <strong>end</strong> function return values that denotes the begining or one past the end of a container, respectively. Noting that <strong>students.begin()</strong> returns a value of type <strong>iterator</strong> but is converted to the type <strong>const_iterator</strong> in above code.</p>
<p>The next is to increase the value of <strong>iter</strong> using <strong>++iter</strong>. The effect of the increment operator on <strong>iter</strong> is up to how the <strong>iterator</strong> type defines. As a result, the iterator denotes the next element in the container after this expression is executed. </p>
<p>The statement in the <strong>for</strong> body shows how to indirect access to the elements in <strong>students</strong>. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; (*iter).name;</span><br></pre></td></tr></table></figure>
<p>The dereference operator (<em>) applies to *</em>iter** and returns an <strong>lvalue</strong> (i.e. the element) to which the iterator refers. </p>
<p>Alternatively, we can dereference an iterator and fetch the element via</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iter-&gt;name</span><br></pre></td></tr></table></figure>
<p>It has same effect as <strong>(*iter).name</strong>.</p>
<h3 id="rewrite-functions-using-iterators"><a href="#rewrite-functions-using-iterators" class="headerlink" title="rewrite functions using iterators"></a>rewrite functions using iterators</h3><p>Now let’s use iterators to rewrite the <strong>extract_fails</strong> function. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;Student_info&gt; <span class="title">extract_fails</span><span class="params">(<span class="built_in">vector</span>&lt;Student_info&gt; &amp;students)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Student_info&gt; fail;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Student_info&gt;::const_iterator iter = students.<span class="built_in">begin</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// loop invariant: [0, i) of students represent passing grades</span></span><br><span class="line">    <span class="keyword">while</span>(iter != students.<span class="built_in">end</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(fgrade(*iter))</span><br><span class="line">        &#123;</span><br><span class="line">            fail.pushback(*iter);</span><br><span class="line">            iter = students.erase(iter);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            ++iter;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fail;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>As mentioned earlier, we pass <strong>iter</strong> directly to the erase function as the parameter has type of <strong>const_iterator</strong>. </p>
<p>Noting that calling <strong>erase</strong> function invalidates all iterators that refer to elements after the one that was just removed. But the <strong>erase</strong> function will return an iterator that is positioned on the element that follows the erased one. Therefore, the statement becomes</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iter = students.erase(iter);</span><br></pre></td></tr></table></figure>
<p>Iterators also support equility (=) and inequaility (!=) operations. Two iterators are equal if they denote the same element or they are off-the-end iterator for the same container. </p>
<h2 id="Iterator-arithmetic"><a href="#Iterator-arithmetic" class="headerlink" title="Iterator arithmetic"></a>Iterator arithmetic</h2><p>All standard containers support above iterator operations. But iterators for <strong>vector</strong> and <strong>string</strong> also support additional operations as shown below.</p>
<ol>
<li><p><strong>iter +/n</strong>. Adding/substracting an integer <strong>n</strong> to an iterator yields an iterator that denotes the <strong>n</strong>th emelemt (if available) after/before the original element, or one past the end of the container. </p>
</li>
<li><p><strong>iter1 - iter2</strong>. Substracting two iterators yields an number when added to the right-hand operand yields the left operand. The iterators must denote elements within the container or one past the end of the container.</p>
</li>
<li><p><strong>&gt;, &gt;=, &lt;, &lt;=</strong>. One iterator is less than another if it denotes an element that appears before the element that denoted by the other iterator. Both iterators must denote elements within the container or one past the end of the container.</p>
</li>
</ol>
<h1 id="list"><a href="#list" class="headerlink" title="list"></a>list</h1><p><strong>vector</strong> allows us to arbitrarily access elements efficiently. Moreover, it performs well when adding or deleting the element at the end of the vector. However, <strong>vector</strong> is not a good choice when it come to inserting or removing elements from the interior of the vector, such as functions illustrated above.  </p>
<p>To deal with such problems, the standard library provides another data structure <strong>list</strong> for us to efficiently insert or delete elements anywhere in the container. On the other hand, <strong>list</strong> doesn’t support random access via indices. It only supports bidirectional sequential access via iterators. </p>
<p>The <strong>list</strong> type is defined in the standard header <list>. Same as the <strong>vector</strong>, <strong>list</strong> is also a class template. In addition, <strong>list</strong> and <strong>vector</strong> share many operations. For example, we can use <strong>list</strong> to rewrite the function <strong>extract_fails</strong>.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// use list instead of vector</span></span><br><span class="line"><span class="function"><span class="built_in">list</span>&lt;Student_info&gt; <span class="title">extract_fails</span><span class="params">(<span class="built_in">list</span>&lt;Student_info&gt; &amp;students)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">list</span>&lt;Student_info&gt; fails;</span><br><span class="line">    <span class="built_in">list</span>&lt;Student_info&gt;::iterator iter = students.<span class="built_in">begin</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(iter != students.<span class="built_in">end</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (fgrade(*iter))</span><br><span class="line">        &#123;</span><br><span class="line">            fail.push_back(*iter);</span><br><span class="line">            iter = students.erase(iter);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            ++iter;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fail;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The code above has no distinct difference comparing with the <strong>vector</strong> version. However, the important difference between <strong>list</strong>s and <strong>vector</strong>s is that how they affect on iterators.</p>
<ol>
<li><p>For <strong>vector</strong>s, the <strong>erase</strong> operation invalidates all iterators that refer to elements including the one was just removed and the subsequent elements. It is because that when removing one element, all following elements move one position towards the one erased. The <strong>push_back</strong> operation invalidates all iterators due to the fact the entirely <strong>vector</strong> might be reallocated to a new area for holding the new element. </p>
</li>
<li><p>For <strong>list</strong>s, the <strong>erase</strong> and <strong>push_back</strong> operations do not invalidate other iterators except the one that was erased. </p>
</li>
</ol>
<p>Another difference is that the <strong>list</strong> type does’t support the standard <strong>sort</strong> function. It has its own member funciton <strong>sort</strong> which can be called as follows</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span> &lt;Student_info&gt; students;</span><br><span class="line">students.sort(compare);</span><br></pre></td></tr></table></figure>
<h1 id="Taking-strings-apart"><a href="#Taking-strings-apart" class="headerlink" title="Taking strings apart"></a>Taking strings apart</h1><p>A <strong>string</strong> can be regarded as a special container that only contains characters. It supports many operations, such as random access through <strong>indices</strong> and <strong>iterators</strong>, similar to a <strong>vector</strong>. Therefore, we can access and operate on a specific character. In addition, the standard header <cctype> defines a bunch of functions that can be used to deal with single character in a <strong>string</strong>. The table below gives the details of each function</p>
<table>
<thead>
<tr>
<th align="left"><strong>cctype</strong> functions</th>
<th align="left">Source: Lippman etc. 2012, p.82</th>
</tr>
</thead>
<tbody><tr>
<td align="left">isalnum(c)</td>
<td align="left">true if c is a letter or a digit</td>
</tr>
<tr>
<td align="left">isalpha(c)</td>
<td align="left">true if c is a letter</td>
</tr>
<tr>
<td align="left">iscntrl(c)</td>
<td align="left">true if c is a control character</td>
</tr>
<tr>
<td align="left">isdigit(c)</td>
<td align="left">true if c is a digit</td>
</tr>
<tr>
<td align="left">isgraph(c)</td>
<td align="left">true if c is not a space but is printable</td>
</tr>
<tr>
<td align="left">islower(c)</td>
<td align="left">true if c is a lowercase letter</td>
</tr>
<tr>
<td align="left">isprint(c)</td>
<td align="left">true if c is a printable character</td>
</tr>
<tr>
<td align="left">ispunct(c)</td>
<td align="left">true if c is a punctuation character</td>
</tr>
<tr>
<td align="left">isspace(c)</td>
<td align="left">true if c is whitespace</td>
</tr>
<tr>
<td align="left">isupper(c)</td>
<td align="left">true if c is an uppercase letter</td>
</tr>
<tr>
<td align="left">isxdigit(c)</td>
<td align="left">true if c is a hexademical digit</td>
</tr>
<tr>
<td align="left">tolower(c)</td>
<td align="left">if c is an uppercase letter, it returns the lowercase letter; otherwise returns c unchanged</td>
</tr>
<tr>
<td align="left">toupper(c)</td>
<td align="left">if c is a lowercase letter, it returns the uppercase letter; otherwise returns c unchanged</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<p>For example, we can write a funciton to extract each word from a string like</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The wealth of the mind is the only wealth</span><br></pre></td></tr></table></figure>
<p>We can use a <strong>string</strong> member function <strong>substr</strong> to construct a new <strong>string</strong> object with its value initialized to a copy of a substring of the original <strong>string</strong>. <strong>substr</strong> defines two parameters, of which one is the inital position of the substring in the original string and the other one is the length of the substring. Therefore, the key to solve this project is to find the index of the begining of each word and the length. It can be observed that each word starts from a nonwhitespace character and ends with a character followed by whitespace. Assuming the first character of a word is positioned at indice <strong>i</strong> and the whitespace that closely follows the end of the word has indice <strong>j</strong>, the length of the word will be <strong>j - i</strong> (imagine the half-open range). </p>
<p>The solution is provided in the book and shown as below</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">split</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ret;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">string</span>::size_type string_size;</span><br><span class="line">    string_size i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// invariant: we have processed characters [original value of i, i)</span></span><br><span class="line">    <span class="keyword">while</span>(i != s.<span class="built_in">size</span>())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ignore leading blanks</span></span><br><span class="line">        <span class="comment">// invariant: characters in range [original i, current i) are all spaces</span></span><br><span class="line">        <span class="keyword">while</span>(i != s.<span class="built_in">size</span>() &amp;&amp; <span class="built_in">isspace</span>(s[i]))    </span><br><span class="line">            ++i;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// find end of the next word</span></span><br><span class="line">        string_size j = i;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// invariant: none of the characters in range [original j, current j)</span></span><br><span class="line">        <span class="keyword">while</span>(j != s.<span class="built_in">size</span>() &amp;&amp; !<span class="built_in">isspace</span>(s[j]))</span><br><span class="line">            ++j;</span><br><span class="line">        <span class="comment">// if we found some nonwhitespace characters</span></span><br><span class="line">        <span class="keyword">if</span> (i != j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// copy from s starting at i and taking j - i characters </span></span><br><span class="line">            ret.push_back(s.substr(i, j-i));</span><br><span class="line">            i = j;    </span><br><span class="line">        &#125;   </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Noting that, when the function try to recognize the last word, the third while loop will stop because of <strong>j == s.size()</strong> even if <strong>!isspace(s[j])</strong> is still true in the case that no whitespaces follows the last word. I add <strong>#include</strong> directives and using declarations, and test the program using the example string described above.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>; 		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function declaration</span></span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">split</span><span class="params">(<span class="keyword">const</span> <span class="built_in">string</span> &amp;s)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// define a string contains words separated by whitespaces</span></span><br><span class="line">	<span class="built_in">string</span> s&#123;<span class="string">"The wealth of the mind is the only wealth"</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// define a vector to hold splitted words</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; words = split(s);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// write each line that contains one word</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::size_type i = <span class="number">0</span>; i != words.<span class="built_in">size</span>(); ++i)</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; words[i] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Please define the split function here</span></span><br></pre></td></tr></table></figure>
<p><strong>Test results</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">The</span><br><span class="line">wealth</span><br><span class="line">of</span><br><span class="line">the</span><br><span class="line">mind</span><br><span class="line">is</span><br><span class="line">the</span><br><span class="line">only</span><br><span class="line">wealth</span><br></pre></td></tr></table></figure>
<hr>
<p>To be continued.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://quantein.com/2018/03/11/Accelerated-C-Solutions-to-Exercises-Chapter-4-Part-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liam">
      <meta itemprop="description" content="Stochastic Modelling Notes; Programming Notes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liam's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/11/Accelerated-C-Solutions-to-Exercises-Chapter-4-Part-2/" class="post-title-link" itemprop="url">Accelerated C++ Solutions to Exercises(Chapter 4 Part 2)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-11 13:30:07" itemprop="dateCreated datePublished" datetime="2018-03-11T13:30:07+08:00">2018-03-11</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-04-08 21:47:20" itemprop="dateModified" datetime="2018-04-08T21:47:20+08:00">2018-04-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span></span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>NaN:aN</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Exercise-4-6"><a href="#Exercise-4-6" class="headerlink" title="Exercise 4-6"></a>Exercise 4-6</h1><p>Rewrite the Student_info structure to calculate the grades immediately and store only the final grade.</p>
<h2 id="Solution-amp-Results"><a href="#Solution-amp-Results" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><p>I didn’t understand very well about the original program when I went through it first time. Now I try to rewrite it in this program with detailed explinations on each step. The strategy can be divided into three parts:</p>
<ol>
<li>analyse the requirements</li>
<li>break the ultimate goal into smaller ones that are logically connected</li>
<li>design algorithms to accomplish small goals</li>
<li>logically verify the correctness of each part and put all together </li>
<li>test the performance</li>
</ol>
<h3 id="Requirements-interpretation"><a href="#Requirements-interpretation" class="headerlink" title="Requirements interpretation"></a>Requirements interpretation</h3><h4 id="What-we-have"><a href="#What-we-have" class="headerlink" title="What we have?"></a>What we have?</h4><p>The program asks to enter a file that contains multiple students’ information including <strong>name</strong>, <strong>midterm</strong> exam grade, <strong>final</strong> exam grades and a sequence of <strong>homework</strong> grades. The example below shows an input sample</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Robin 90 87 79 88 81 73 45 </span><br><span class="line">Brendan 70 69 88 100 91 75 66 </span><br><span class="line">Arsenii 99 87 89 88 74 90 70 </span><br><span class="line">Liam 83 66 100 76 87 91 78</span><br></pre></td></tr></table></figure>
<p>Note that the number of students is unkown and the number of homework grades is unknown as well. </p>
<h4 id="What-we-need-to-do"><a href="#What-we-need-to-do" class="headerlink" title="What we need to do?"></a>What we need to do?</h4><p>The program is required to generate a final grade report for a class. Specifically    </p>
<ol>
<li>each line of the report contains the information of one student, including <strong>name</strong> and a final <strong>grade</strong>.</li>
<li>the final grade is the weighted average of <strong>midterm</strong>, <strong>final</strong> and <strong>homework</strong> grades, of which the mediter exam grade counts for 20%, the final exam grade counts for 40%, and the median homework grade counts for 40%. </li>
<li>each line of outputs follows an alphabetical order according to the names.</li>
<li>the final grades are vertically aligned. </li>
</ol>
<p>An output sample can be found here</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Arsenii 89.8</span><br><span class="line">Brendan 76.8</span><br><span class="line">Liam    77.8</span><br><span class="line">Robin   84.4</span><br></pre></td></tr></table></figure>
<h4 id="others-info"><a href="#others-info" class="headerlink" title="others info"></a>others info</h4><p>We are required to define a data structure to hold each student’s information including <strong>name</strong> and his final <strong>grade</strong>. This can be finished immediately. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// a structure contains name and final grade</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student_info</span>&#123;</span></span><br><span class="line">    <span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">double</span> grade;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>It can be seen that <strong>Student_info</strong> in fact have all information of outputs. Therefore, once it is filled with correct information, the rest is to format the report to be written. </p>
<h3 id="Decompose-the-program"><a href="#Decompose-the-program" class="headerlink" title="Decompose the program"></a>Decompose the program</h3><h4 id="Overall-structure"><a href="#Overall-structure" class="headerlink" title="Overall structure"></a>Overall structure</h4><p>Assuming that we have filled the information for one student(i.e. one object of <strong>Student_info</strong>), we need to store it for making preparations for generating the report. As the number of student is unknown, <strong>vector<Student_info></strong> is flexible enough to hold each <strong>Student_info</strong> object. Thus, the overall structure of this program can be</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">	<span class="comment">// to hold the information for each student</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;Student_info&gt; students;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// one Student_info object to be filled</span></span><br><span class="line">	Student_info record;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// loop invariant: we have stored students.size() students already</span></span><br><span class="line">	<span class="keyword">while</span> (<span class="comment">// condition statement)</span></span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// put the recorded student into the vector students</span></span><br><span class="line">		students.push_back(record);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// write statements to format the report</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>What the condition for this while loop should be? The condition for us to store <strong>record</strong> is that it has been filled(i.e. both name and grade contains correct information). Therefore, the condition shoule be <strong>true</strong> if <strong>record</strong> is successfully filled, and should be <strong>false</strong> if the attempt is failure. </p>
<p>There are two members in an object of type <strong>Student_info</strong>, one is <strong>name</strong> and the other one is <strong>grade</strong>. <strong>name</strong> comes from supplied information while <strong>grade</strong> can be computed using the information. It is necessary to write a function that not only can read and deal with supplied information but also meet the requirments of being the condition of above <strong>while</strong> loop. Let’s declare this function</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">istream &amp;<span class="title">read</span><span class="params">(istream &amp;is, Student_info &amp;s)</span></span>;</span><br></pre></td></tr></table></figure>
<p>The first parameter is a reference that refers to the object of input stream (i.e. istream). The second parameter is also a reference that refers to <strong>record</strong>. The reason to pass arguments by reference rather than value is that:</p>
<ol>
<li>the function needs to return a value that shows whether the reading attempt is successful. It is the pre-condition for filling <strong>record</strong>. </li>
<li>the <strong>istream</strong> objects can’t be copied. </li>
<li>the function needs to return the filled <strong>record</strong>. </li>
<li>By passing by reference, we can avoid seting two return values.</li>
</ol>
<p>As the condition of the <strong>while</strong> loop, <strong>read</strong> function returns an <strong>istream</strong> type object which is evaluated to be true if it is valid and otherwise it is evaluted to be false. Therefore, <strong>read</strong> function should return a valid <strong>istream</strong> object after finishing filling the <strong>record</strong>, and return an invalid <strong>istream</strong> object after finishing filling all <strong>record</strong>s. </p>
<h4 id="Fill-in-the-information"><a href="#Fill-in-the-information" class="headerlink" title="Fill in the information"></a>Fill in the information</h4><p>Let’s firstly consider how to fill the information for on student. The name can be stored directly into <strong>s.name</strong>. To hold <strong>midterm</strong> and <strong>final</strong> grades, we define two double type variables while to hold <strong>homework</strong> grades we define a variable of type <strong>vector<double></strong>. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">istream &amp; <span class="title">read</span><span class="params">(istream &amp;is, Student_info &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// reads and store the student's name, midterm and final exam grades</span></span><br><span class="line">	<span class="keyword">double</span> midterm, <span class="keyword">final</span>;</span><br><span class="line">	is &gt;&gt; s.name &gt;&gt; midterm &gt;&gt; <span class="keyword">final</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// reads and store all homework grades</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; hw;</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// call functions that store all homework grades</span></span><br><span class="line">	<span class="comment">// call functions that compute the final grade</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// return a valid is if both name and grade contain correct information</span></span><br><span class="line">    <span class="keyword">return</span> is;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>To compute the final grade, what we lack is the median value of homework grades. But before we can compute the median grade, we need to store all possible homework grades using a function similar to <strong>read</strong>.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">istream &amp; <span class="title">read_hw</span><span class="params">(istream &amp;in, <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;hw)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// read homework grades</span></span><br><span class="line">	<span class="keyword">double</span> x;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// loop invariant: we have read hw.size() homework grades</span></span><br><span class="line">	<span class="keyword">while</span>(in &gt;&gt; x)</span><br><span class="line">		hw.push_back(x);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This function is ok if there is only one student but doesn’t work for the input file shown above. When it finishes reading all homework grades of the first student, it terminates because that it encounters next student’s name rather than a double value, leading to the input stream being failure state. Therefore, we can add <strong>in.clear()</strong> before <strong>return in</strong> to reset the error state to good.  </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// clear the stream so that input will work for the next student</span></span><br><span class="line">	in.<span class="built_in">clear</span>();</span><br></pre></td></tr></table></figure>

<h4 id="Computations"><a href="#Computations" class="headerlink" title="Computations"></a>Computations</h4><p>Once we obtained the homework grades, we can compute the median value and then the final grade. The algorithms for these computations are not complicated. The function below will be called in the <strong>read</strong> function. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span> midterm, <span class="keyword">double</span> <span class="keyword">final</span>, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;hw)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (hw.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> domain_error(<span class="string">"student has done no homework"</span>);</span><br><span class="line">    <span class="keyword">return</span> grade(midterm, <span class="keyword">final</span>, median(hw));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In this function, two functions are called. One is the median(hw) function which returns the median value, and anther one is overloaded <strong>grade</strong> function that returns the final grade which is again returned to the <strong>read</strong> function. Two functions are presented as follows</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function to calculate median</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">median</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; vec)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// get the size of the vector</span></span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;::size_type vec_size;</span><br><span class="line">    vec_size <span class="built_in">size</span> = vec.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// check whether the empty is empty</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> domain_error(<span class="string">"median of an empty vector"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// sort the grades</span></span><br><span class="line">    sort(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// compute the median homework grade</span></span><br><span class="line">    vec_size mid = <span class="built_in">size</span>/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span> ? (vec[mid] + vec[mid - <span class="number">1</span>])/<span class="number">2</span> : vec[mid];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function to calculate final grade</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span> midterm, <span class="keyword">double</span> <span class="keyword">final</span>, <span class="keyword">double</span> homework)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.2</span>*midterm + <span class="number">0.4</span>*<span class="keyword">final</span> + <span class="number">0.4</span>*homework;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="How-does-eof-works"><a href="#How-does-eof-works" class="headerlink" title="How does eof works?"></a>How does <strong>eof</strong> works?</h4><p>Now, we can complete the read function and the while loop. Noting that I add <strong>throw</strong> statement after finishing reading the homework grades. Correspondingly, I add the <strong>try</strong> block to catch any <strong>exception</strong> that might be thrown when reading students’ information. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">istream &amp; <span class="title">read</span><span class="params">(istream &amp;is, Student_info &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// reads and store the student's name, midterm and final exam grades</span></span><br><span class="line">	<span class="keyword">double</span> midterm, <span class="keyword">final</span>;</span><br><span class="line">	is &gt;&gt; s.name &gt;&gt; midterm &gt;&gt; <span class="keyword">final</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// reads and store all homework grades</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; hw;</span><br><span class="line">	read_hw(is, hw);</span><br><span class="line">	<span class="keyword">if</span>(hw.empty())</span><br><span class="line">		<span class="keyword">throw</span> domain_error(<span class="string">"student has done no homework"</span>);</span><br><span class="line">	</span><br><span class="line">	<span class="comment">// get the value of final grade</span></span><br><span class="line">	s.grade = grade(midterm, <span class="keyword">final</span>, hw);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// return a valid is if both name and grade contain correct information</span></span><br><span class="line">    <span class="keyword">return</span> is;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;	</span><br><span class="line">	<span class="comment">// to hold the information for each student</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;Student_info&gt; students;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// one Student_info object to be filled</span></span><br><span class="line">	Student_info record;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// loop invariant: we have stored students.size() students already</span></span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		<span class="keyword">while</span>(<span class="built_in">read</span>(<span class="built_in">cin</span>, record))</span><br><span class="line">    	&#123;</span><br><span class="line">			maxlen = <span class="built_in">max</span>(maxlen, record.name.<span class="built_in">size</span>());</span><br><span class="line">			students.push_back(record);</span><br><span class="line">    	&#125;</span><br><span class="line">	&#125;<span class="keyword">catch</span>(domain_error e)&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; e.what() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// write statements to format the report</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Theoretically, we have finished most parts of the program. The next step is to format outputs if above functions work fine. Let’s logically verify this part with following steps</p>
<ol>
<li>when the computer executes the while loop, the condition is evaluated. </li>
<li>the computer enter into the <strong>read</strong> function. The function stores <strong>name</strong>, <strong>midterm</strong> and <strong>final</strong>, and create an empty object <strong>hw</strong>.</li>
<li>then the computer enters into the <strong>read_hw</strong> function. This function creates an object <strong>x</strong> and starts another while loop. </li>
<li>the condition <strong>in &gt;&gt; x</strong> is evaluated. In most cases, the condition is true until it encounters next student’s name. As a result, the input stream is changed to failure state. By then, it has stored all homework grades of the first student into the vector <strong>hw</strong>. </li>
<li>the state of <strong>in</strong> is reset to be good by using <strong>in.clear()</strong>.</li>
<li><strong>in</strong> is returned and the implementation goes back to the function <strong>read</strong>.</li>
<li><strong>grade</strong> function is called. Inside this function, another <strong>grade function</strong> is called and <strong>median</strong> function is called.</li>
<li><strong>s.grade</strong> is obtained, and <strong>is</strong> is returned. By then, <strong>record</strong> contains correct information of the first student.</li>
<li>step 1 continues, <strong>is</strong> is evaluated to be true which indicates that <strong>record</strong> is filled successfully. </li>
<li>the computer moves to the while body and <strong>record</strong> is stored into <strong>students</strong>. By then, both the name and final grade of the first student is available for us.</li>
<li>the while loop starts over again from step 1 - 10.</li>
</ol>
<p>Yeah, it works fine by now. However, how to stop it? Typically we can stop a while loop by sending a signal <strong>eof</strong> to set the input stream being a failure state. Let’s type <strong>Ctrl+Z/D</strong> and see how it works.</p>
<ol>
<li>same as above </li>
<li>same as above. Though <strong>name</strong>, <strong>midterm</strong> are uninitialized, the implementation would’t stop at this position.</li>
<li>same as above</li>
<li>the condition <strong>in &gt;&gt; x</strong> is evaluated to be false due to the <strong>eof</strong></li>
<li>same as above. By then, <strong>hw</strong> is still empty.</li>
<li>same as above</li>
<li><strong>grade</strong> function is called. An exception is thrown due to the fact of step 5.</li>
<li>the program fails</li>
</ol>
<p>So, what’s the problem? The immediate cause is the empty <strong>hw</strong>. We actually even don’t want to create the <strong>hw</strong> since we want to terminate the while loop immediately. Therefore, we need to add a condition like follow code shows</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">istream &amp; <span class="title">read</span><span class="params">(istream &amp;is, Student_info &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// reads and store the student's name, midterm and final exam grades</span></span><br><span class="line">	<span class="keyword">double</span> midterm, <span class="keyword">final</span>;</span><br><span class="line">	is &gt;&gt; s.name &gt;&gt; midterm &gt;&gt; <span class="keyword">final</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// to check whether eof is sent</span></span><br><span class="line">	<span class="keyword">if</span>(is)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// reads and store all homework grades</span></span><br><span class="line">		<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; hw;</span><br><span class="line">		read_hw(is, hw);</span><br><span class="line">		<span class="keyword">if</span>(hw.empty())</span><br><span class="line">			<span class="keyword">throw</span> domain_error(<span class="string">"student has done no homework"</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// get the value of final grade</span></span><br><span class="line">		s.grade = grade(midterm, <span class="keyword">final</span>, hw);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// return a valid is if both name and grade contain correct information	</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> is;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Why don’t add the if condition at the very begining of the <strong>read</strong> function? It is because that the input stream hasn’t start to read anything at that position. Now we recheck each step after sending <strong>eof</strong> signal. </p>
<ol>
<li>same as above</li>
<li><strong>midterm</strong> and <strong>final</strong> is created. </li>
<li><strong>eof</strong> is read and the state of <strong>is</strong> is set to be <strong>failure</strong>.</li>
<li>condition <strong>is</strong> is evaluated to be false</li>
<li>return <strong>is</strong>. The computer goes back the step 1.</li>
<li>the condition in step 1 is evaluated to be false, while loop stops. </li>
</ol>
<p>Now, this part of code should work as expected. </p>
<h4 id="Formatting-the-outputs"><a href="#Formatting-the-outputs" class="headerlink" title="Formatting the outputs"></a>Formatting the outputs</h4><p>The next is to format each line of outputs according to requirements analysed above.<br>To alphabetize the outputs, we can use following code</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort(students.<span class="built_in">begin</span>(), students.<span class="built_in">end</span>(), compare);</span><br></pre></td></tr></table></figure>
<p>where <strong>compare</strong> is defined as follows</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">compare</span><span class="params">(<span class="keyword">const</span> Student_info &amp;x, <span class="keyword">const</span> Student_info &amp;y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x.name &lt; y.name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>To line up the final grades, we need to find the longest name and hence add one statement in the first while loop. <strong>maxlen</strong> will finally record the length of the longest name.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">maxlen &#x3D; max(maxlen, record.name.size());</span><br></pre></td></tr></table></figure>
<p>The final grade can be obtained via</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> final_grade = students[i].grade;</span><br></pre></td></tr></table></figure>

<p>####</p>
<h3 id="Put-all-together"><a href="#Put-all-together" class="headerlink" title="Put all together"></a>Put all together</h3><p>Following gives each file of the program. No more discussion here.<br><strong>mainfunction.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ios&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Student_info.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"grade.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;					<span class="keyword">using</span> <span class="built_in">std</span>::setprecision;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;				<span class="keyword">using</span> <span class="built_in">std</span>::sort;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;				<span class="keyword">using</span> <span class="built_in">std</span>::streamsize;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::domain_error;		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">max</span>;					<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Student_info&gt; students;</span><br><span class="line">    Student_info record;</span><br><span class="line">    <span class="built_in">string</span>::size_type maxlen = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// read and store all the records, and find the length of the longest name</span></span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">		<span class="keyword">while</span>(<span class="built_in">read</span>(<span class="built_in">cin</span>, record))</span><br><span class="line">    	&#123;</span><br><span class="line">			maxlen = <span class="built_in">max</span>(maxlen, record.name.<span class="built_in">size</span>());</span><br><span class="line">			students.push_back(record);</span><br><span class="line">    	&#125;</span><br><span class="line">	&#125;<span class="keyword">catch</span>(domain_error e)&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; e.what() &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// alphabetize the records</span></span><br><span class="line">    sort(students.<span class="built_in">begin</span>(), students.<span class="built_in">end</span>(), compare);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// write each line of outpurs</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Student_info&gt;::size_type i = <span class="number">0</span>; i != students.<span class="built_in">size</span>(); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// write the name, blanks</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; students[i].name &lt;&lt; <span class="built_in">string</span>(maxlen + <span class="number">1</span> - students[i].name.<span class="built_in">size</span>(), <span class="string">' '</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// compute and write the final grade</span></span><br><span class="line">		<span class="keyword">double</span> final_grade = students[i].grade;</span><br><span class="line">		streamsize prec = <span class="built_in">cout</span>.precision();</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; setprecision(<span class="number">3</span>) &lt;&lt; final_grade &lt;&lt; setprecision(prec) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Student_info.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Student_info.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"grade.h"</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>; <span class="keyword">using</span> <span class="built_in">std</span>::istream; <span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>; <span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function to define the additional arguments in max</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">compare</span><span class="params">(<span class="keyword">const</span> Student_info &amp;x, <span class="keyword">const</span> Student_info &amp;y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x.name &lt; y.name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function to read data for inputs and fill information</span></span><br><span class="line"><span class="function">istream &amp; <span class="title">read</span><span class="params">(istream &amp;is, Student_info &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// reads and store the student's name, midterm and final exam grades</span></span><br><span class="line">	<span class="keyword">double</span> midterm, <span class="keyword">final</span>;</span><br><span class="line">	is &gt;&gt; s.name &gt;&gt; midterm &gt;&gt; <span class="keyword">final</span>;</span><br><span class="line">	<span class="keyword">if</span> (is)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// reads and store all homework grades</span></span><br><span class="line">		<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; hw;</span><br><span class="line">		read_hw(is, hw);</span><br><span class="line">		<span class="keyword">if</span>(hw.empty())</span><br><span class="line">			<span class="keyword">throw</span> domain_error(<span class="string">"student has done no homework"</span>);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// get the final grade</span></span><br><span class="line">		s.grade = grade(midterm, <span class="keyword">final</span>, hw);</span><br><span class="line">	&#125;</span><br><span class="line">    <span class="keyword">return</span> is;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function to read homework grades</span></span><br><span class="line"><span class="function">istream &amp; <span class="title">read_hw</span><span class="params">(istream &amp;in, <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;hw)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// read homework grades</span></span><br><span class="line">	<span class="keyword">double</span> x;</span><br><span class="line">	<span class="keyword">while</span>(in &gt;&gt; x)</span><br><span class="line">		hw.push_back(x);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// clear the stream so that input will work for the next student</span></span><br><span class="line">	in.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Student_info.h</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> GUARD_Student_info</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GUARD_Student_info</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Student_info.header file</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student_info</span>&#123;</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">double</span> grade;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">compare</span><span class="params">(<span class="keyword">const</span> Student_info &amp;, <span class="keyword">const</span> Student_info &amp;)</span></span>;</span><br><span class="line"><span class="function"><span class="built_in">std</span>::istream &amp; <span class="title">read</span><span class="params">(<span class="built_in">std</span>::istream &amp;, Student_info &amp;)</span></span>;</span><br><span class="line"><span class="function"><span class="built_in">std</span>::istream &amp; <span class="title">read_hw</span><span class="params">(<span class="built_in">std</span>::istream &amp;, <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;)</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p><strong>grade.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"grade.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::domain_error;  <span class="keyword">using</span> <span class="built_in">std</span>::istream;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;        <span class="keyword">using</span> <span class="built_in">std</span>::sort;</span><br><span class="line"></span><br><span class="line"><span class="comment">// grade function 1</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span> midterm, <span class="keyword">double</span> <span class="keyword">final</span>, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;hw)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (hw.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> domain_error(<span class="string">"student has done no homework"</span>);</span><br><span class="line">    <span class="keyword">return</span> grade(midterm, <span class="keyword">final</span>, median(hw));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// grade function 2</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span> midterm, <span class="keyword">double</span> <span class="keyword">final</span>, <span class="keyword">double</span> homework)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.2</span>*midterm + <span class="number">0.4</span>*<span class="keyword">final</span> + <span class="number">0.4</span>*homework;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// compute the median of vector&lt;double&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">median</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; vec)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// get the size of the vector</span></span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;::size_type vec_size;</span><br><span class="line">    vec_size <span class="built_in">size</span> = vec.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// check whether the empty is empty</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> domain_error(<span class="string">"median of an empty vector"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// sort the grades</span></span><br><span class="line">    sort(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// compute the median homework grade</span></span><br><span class="line">    vec_size mid = <span class="built_in">size</span>/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span> ? (vec[mid] + vec[mid - <span class="number">1</span>])/<span class="number">2</span> : vec[mid];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>grade.h</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> GUARD_grade_h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GUARD_grade_h</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// grade.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span>, <span class="keyword">double</span>, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span>, <span class="keyword">double</span>, <span class="keyword">double</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">median</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;)</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>

<h3 id="Performance-test"><a href="#Performance-test" class="headerlink" title="Performance test"></a>Performance test</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Inputs</span><br><span class="line"></span><br><span class="line">Robin 90 87 79 88 81 73 45 </span><br><span class="line">Brendan 70 69 88 100 91 75 66 </span><br><span class="line">Arsenii 99 87 89 88 74 90 70 </span><br><span class="line">Liam 83 66 100 76 87 91 78 </span><br><span class="line"></span><br><span class="line">Outputs:</span><br><span class="line"></span><br><span class="line">Arsenii 89.8</span><br><span class="line">Brendan 76.8</span><br><span class="line">Liam    77.8</span><br><span class="line">Robin   84.4</span><br></pre></td></tr></table></figure>
<p>It performs as same as the original program provided in <a href="http://quanttour.com/08/03/2018/Organizing-programs-and-data-Part-2/" target="_blank" rel="noopener">Chapter 4</a>.</p>
<hr>
<h1 id="Exercise-4-7"><a href="#Exercise-4-7" class="headerlink" title="Exercise 4-7"></a>Exercise 4-7</h1><p>Write a program to calculate the average of the numbers stored in a vector<double>.</p>
<h2 id="Solution-amp-Results-1"><a href="#Solution-amp-Results-1" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><p>It’s a simple project and the solution can be divided into three steps</p>
<ol>
<li>define a function to read and store data into a vector<double>.</li>
<li>define a function to compute the average value.</li>
<li>set precision to format the double value of outputs.</li>
</ol>
<p>All details can be found in other exercises and hence no more explinations here.</p>
<p>Below shos the only file including both functions and main function.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;			<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::domain_error;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::istream;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::streamsize;	<span class="keyword">using</span> <span class="built_in">std</span>::setprecision;</span><br><span class="line"></span><br><span class="line"><span class="comment">// define function to read data into a vector</span></span><br><span class="line"><span class="function">istream &amp;<span class="title">read</span><span class="params">(istream &amp;is, <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;doubleValues)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">double</span> number;</span><br><span class="line">	<span class="keyword">while</span>(is &gt;&gt; number)</span><br><span class="line">		doubleValues.push_back(number);</span><br><span class="line">	<span class="keyword">return</span> is;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// define function to compute the average of a data sequence</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">average</span><span class="params">(<span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;doubleValues)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (doubleValues.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">throw</span> domain_error(<span class="string">"An empty vector"</span>);</span><br><span class="line">	<span class="keyword">typedef</span>  <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;::size_type vec_size;</span><br><span class="line">	<span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">for</span> (vec_size i = <span class="number">0</span>; i != doubleValues.<span class="built_in">size</span>(); ++i)</span><br><span class="line">		sum += doubleValues[i];</span><br><span class="line">	<span class="keyword">return</span> sum/doubleValues.<span class="built_in">size</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; doubleValues;</span><br><span class="line">	<span class="built_in">read</span>(<span class="built_in">cin</span>, doubleValues);</span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">double</span> averageValue = average(doubleValues);</span><br><span class="line">            streamsize prec = <span class="built_in">cout</span>.precision();</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; setprecision(<span class="number">3</span>) &lt;&lt; averageValue </span><br><span class="line">            &lt;&lt; setprecision (prec) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	&#125;<span class="keyword">catch</span>(domain_error)&#123;</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; <span class="string">"You must enter at least 1 number. Pleast try again."</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Test</strong> </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Input: </span><br><span class="line">1.2 5.89 9.33 12.7 7.8 4</span><br><span class="line"></span><br><span class="line">Output:</span><br><span class="line">6.82</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="Exercise-4-8"><a href="#Exercise-4-8" class="headerlink" title="Exercise 4-8"></a>Exercise 4-8</h1><p>If the following code is legal, what can we infer about the return type of f?</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> d = f()[n];</span><br></pre></td></tr></table></figure>
<h2 id="Solution-amp-Results-2"><a href="#Solution-amp-Results-2" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><p>From the code, we can infer  </p>
<ol>
<li><strong>f()[n]</strong> is possible a value of type <strong>int</strong> or <strong>float</strong> or <strong>double</strong> or <strong>bool</strong>. </li>
<li><strong>f()</strong> supports accessing the element using subscript and hence it could be a container.</li>
<li><strong>f()</strong> has the form of a <strong>function</strong>. </li>
</ol>
<p>According to above analysis, <strong>f()</strong> could be a function that returns a container which can hold values of types listed above. As far as I know, the container is <strong>vector</strong> and returns a type of <strong>vector<types></strong>(inside types including <strong>int</strong>, <strong>float</strong>, <strong>double</strong> and <strong>bool</strong>).</p>
<p>To verify my analysis, I wrote a simple program shown as below</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// funtion to return a vector&lt;double&gt;</span></span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; <span class="title">f</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; number)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	number.push_back(<span class="number">11</span>);</span><br><span class="line">	number.push_back(<span class="number">20.5</span>);</span><br><span class="line">	<span class="keyword">return</span> number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; number;</span><br><span class="line">	<span class="keyword">double</span> x = f(number)[<span class="number">0</span>];</span><br><span class="line">	<span class="keyword">double</span> y = f(number)[<span class="number">1</span>];</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; x &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; y &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>It works as expected and gives results</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">11</span><br><span class="line">20.5</span><br></pre></td></tr></table></figure>
<p>If I change the type <strong>double</strong> to any of types listed above, the program works fine. </p>
<hr>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p>Koenig, A. and Moo, B.E., 2000. Accelerated C++.</p>
<p>Lippman, S.B., Lajoie, J. and Moo, B.E., 2013. C++ Primer, 5th edt.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://quantein.com/2018/03/09/Accelerated-C-Solutions-to-Exercises-Chapter-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liam">
      <meta itemprop="description" content="Stochastic Modelling Notes; Programming Notes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liam's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/09/Accelerated-C-Solutions-to-Exercises-Chapter-4/" class="post-title-link" itemprop="url">Accelerated C++ Solutions to Exercises(Chapter 4 Part 1)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-09 14:38:09" itemprop="dateCreated datePublished" datetime="2018-03-09T14:38:09+08:00">2018-03-09</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-03-11 21:38:28" itemprop="dateModified" datetime="2018-03-11T21:38:28+08:00">2018-03-11</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span></span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>NaN:aN</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Exercise-4-0"><a href="#Exercise-4-0" class="headerlink" title="Exercise 4-0"></a>Exercise 4-0</h1><p>Compile, execute, and test the programs in this chapter</p>
<h2 id="Solution-amp-Results"><a href="#Solution-amp-Results" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><p>This exercise has been done presented in <a href="http://quanttour.com/06/03/2018/C-Organizing-programs-and-data/" target="_blank" rel="noopener">Organizing programs with functions</a> and <a href="http://quanttour.com/08/03/2018/Organizing-programs-and-data-Part-2/" target="_blank" rel="noopener">Organizing programs with data structures</a>.</p>
<hr>
<h1 id="Exercise-4-1"><a href="#Exercise-4-1" class="headerlink" title="Exercise 4-1"></a>Exercise 4-1</h1><p>We noted in §4.2.3/65 that it is essential that the argument types in a call to maxmatch exactly. Will the following code work? If there is a problem, how would you fix it?</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> maxlen;</span><br><span class="line">Student_info s;</span><br><span class="line"><span class="built_in">max</span>(s.name.<span class="built_in">size</span>(), maxlen);</span><br></pre></td></tr></table></figure>

<h2 id="Solution-amp-Results-1"><a href="#Solution-amp-Results-1" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><p>It doesn’t work. There exist two problems here. </p>
<p>First, the <strong>max</strong> function defined in standard header<algorithm> requires that both arguments must have the same type. But in this piece of code, <strong>s.name.size()</strong> has the type of <strong>string::size_type</strong> while <strong>maxlen</strong> is a <strong>int</strong> type. To fix this, we need to define <strong>maxlen</strong> as a variable of type <strong>string::size_type</strong>. </p>
<p>Second, it should be initialized as a variable of <strong>built-in</strong> type(assuming no problem with type <strong>int</strong>) is undefined if it is not initialized explicitly. For a variable of other types, the default value (if available, otherwise the variable is undefined) depends on how each type defines. I did a simple experiment as follows</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">string</span>::size_type y;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; y;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The result is</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">4200939</span><br></pre></td></tr></table></figure>
<p>with warning</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#39;y&#39; is used uninitialized in this function</span><br></pre></td></tr></table></figure>
<p>The experiment shows that the type of <strong>string::size_type</strong> doesn’t support default initialization. To fixed this, we need to explicitly initialize it. </p>
<p>The correct code should be:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">string</span>::size_type maxlen = <span class="number">0</span>;</span><br><span class="line">Student_info s;</span><br><span class="line"><span class="built_in">max</span>(s.name.<span class="built_in">size</span>(), maxlen);</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Exercise-4-2-4-3"><a href="#Exercise-4-2-4-3" class="headerlink" title="Exercise 4-2, 4-3"></a>Exercise 4-2, 4-3</h1><p>4-2: Write a program to calculate the squares of int values up to 100. The program should write two columns: The first lists the value; the second contains the square of that value.Use setw to manage the output so that the values line up in columns.</p>
<p>4-3: What happens if we rewrite the previous program to allow values up to but not including 1000 but neglect to change the arguments to setw? Rewrite the program to be more robust in the face of changes that allow i to grow without adjusting the setw arguments.</p>
<h2 id="Solution-amp-Result"><a href="#Solution-amp-Result" class="headerlink" title="Solution &amp; Result"></a>Solution &amp; Result</h2><h3 id="algorithms"><a href="#algorithms" class="headerlink" title="algorithms"></a>algorithms</h3><p>Exercise 4-3 is a generalized version of 4-2. Specifically, the program is required to write two colomns as follows</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  0        0</span><br><span class="line">  1        1</span><br><span class="line">  2        4</span><br><span class="line">  3        9</span><br><span class="line">...      ...</span><br><span class="line"> 99     9801</span><br><span class="line">100    10000 </span><br><span class="line">...      ...</span><br><span class="line">  n      n*n</span><br></pre></td></tr></table></figure>
<p>Each line contains an integer value followed by the square of the integer. The range of integers in the first column starts from 0 to 1000 (excluded). Most importantly, each line should be formated such that the values line up in columns. </p>
<p>The key to the solution is to find the longest number in each column. Then, we can set the width of the first column as the number of digits of the corresponding longest number. Analogously, the width of the second column will be set as the number of digits of the longest number in it, with an additional space to seperate from the first column.</p>
<p>For an ascending sequence, the longest numbers in both columns depend on the largest number. For exercise 4-2, the largest number is 100 and 10000 (square of 100) in the first and second column, respectively. We can write and format each line as below shows</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i != <span class="number">101</span>; ++i)</span><br><span class="line">&#123;   </span><br><span class="line">    <span class="comment">// 100 has three digits and 10000 has 5 digits, 1 additional space for seperate two columns</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; setw(<span class="number">3</span>) &lt;&lt; i &lt;&lt; setw(<span class="number">6</span>) &lt;&lt; i*i &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Exercise 4-3 requires more flexibility such that no needs to change <strong>setw</strong> arguments when the largest number changes. Naturally, the key is to compute the number of digits of a user-defined largest number, e,g. defined as <strong>maxNum</strong>.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// hold the number of digits of maxNum and its square</span></span><br><span class="line"><span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">int</span> m = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// hold the values of the largest number and its square</span></span><br><span class="line"><span class="keyword">int</span> j = maxNum;</span><br><span class="line"><span class="keyword">int</span> k = maxNum*maxNum;</span><br><span class="line"><span class="comment">// bounds check</span></span><br><span class="line"><span class="keyword">if</span> (j &gt;= <span class="number">1000</span> || j &lt; <span class="number">0</span>) </span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Enter a number greater than or equal to 0 and less than 1000. Please try again "</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// computations</span></span><br><span class="line"><span class="keyword">if</span> (j == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    m = n = <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// loop invariant: we have counted n digits of the value j</span></span><br><span class="line">    <span class="keyword">while</span> (j != <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// each operation j reduces one digit </span></span><br><span class="line">        j /= <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// maintain the loop invariant</span></span><br><span class="line">        ++n;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// loop invariant: we have counted n digits of the value j</span></span><br><span class="line">    <span class="keyword">while</span> (k != <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        k /= <span class="number">10</span>;</span><br><span class="line">        ++m;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="organize-the-program-with-functions"><a href="#organize-the-program-with-functions" class="headerlink" title="organize the program with functions"></a>organize the program with functions</h3><p>Obviously, above code is partly repeated. I’ll rewrite the computations as a function which returns the number of digits of an entered value.<br><strong>width.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function to compute the number of digits of an integer value</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"width.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">width</span><span class="params">(<span class="keyword">int</span> num)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (num == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(num != <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            num /= <span class="number">10</span>;</span><br><span class="line">            ++n;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> n;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>width.h</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> GUARD_width_h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GUARD_width_h</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">width</span><span class="params">(<span class="keyword">int</span>)</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p><strong>mainfunction.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"width.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;     <span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;    <span class="keyword">using</span> <span class="built_in">std</span>::setw;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    <span class="comment">// asks to enter the upper bound </span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Enter a number greater than or equal to 0 and less than 1000: "</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// read the largest number</span></span><br><span class="line">    <span class="keyword">int</span> maxNum;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; maxNum;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// bounds check</span></span><br><span class="line">    <span class="keyword">if</span> (maxNum &gt;= <span class="number">1000</span> || maxNum &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"The entered value is beyond the allowed value range. Please try again."</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// write the outputs</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i != maxNum + <span class="number">1</span>; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; setw(<span class="built_in">width</span>(maxNum)) &lt;&lt; i </span><br><span class="line">        &lt;&lt; setw(<span class="built_in">width</span>(maxNum*maxNum) + <span class="number">1</span>) &lt;&lt; i*i &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Test-performance"><a href="#Test-performance" class="headerlink" title="Test performance"></a>Test performance</h3><p><strong>Test 1</strong>: the upper limit is 10</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Enter a number greater than or equal to 0 and less than 1000: 10</span><br><span class="line"> 0   0</span><br><span class="line"> 1   1</span><br><span class="line"> 2   4</span><br><span class="line"> 3   9</span><br><span class="line"> 4  16</span><br><span class="line"> 5  25</span><br><span class="line"> 6  36</span><br><span class="line"> 7  49</span><br><span class="line"> 8  64</span><br><span class="line"> 9  81</span><br><span class="line">10 100</span><br></pre></td></tr></table></figure>
<p><strong>Test 2</strong>: the upper limit is 101</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">Enter a number greater than or equal to 0 and less than 1000: 101</span><br><span class="line">  0     0</span><br><span class="line">  1     1</span><br><span class="line">  2     4</span><br><span class="line">  3     9</span><br><span class="line"> ..    .. </span><br><span class="line"> 90  8100</span><br><span class="line"> 91  8281</span><br><span class="line"> 92  8464</span><br><span class="line"> 93  8649</span><br><span class="line"> 94  8836</span><br><span class="line"> 95  9025</span><br><span class="line"> 96  9216</span><br><span class="line"> 97  9409</span><br><span class="line"> 98  9604</span><br><span class="line"> 99  9801</span><br><span class="line">100 10000</span><br><span class="line">101 10201</span><br></pre></td></tr></table></figure>
<p><strong>Test 3</strong>: the upper limit is 1000</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Enter a number greater than or equal to 0 and less than 1000: 1000</span><br><span class="line">The entered value is beyond the allowed value range. Please try again.</span><br></pre></td></tr></table></figure>
<p>It can be seen from these tests that the program perform as expected. </p>
<hr>
<h1 id="Exercise-4-4"><a href="#Exercise-4-4" class="headerlink" title="Exercise 4-4"></a>Exercise 4-4</h1><p>Now change your squares program to use double values instead of ints. Use manipulators to manage the output so that the values line up in columns</p>
<h2 id="Solution-amp-Results-2"><a href="#Solution-amp-Results-2" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><p>The difference between this exercise and last exercise is that the function <strong>width</strong> defined above can not compute the number of digits of a double value. Admittedly, I didn’t found very good strategy to complete this project. I circument the problem applying the type conversion technique. Specifically</p>
<ol>
<li>divide the maxNum/maxNum*maxNum into integer part and fractional part. </li>
<li>compute the number of digits of the integer part using same function as shown above. </li>
<li>control the fractional part with an additional user-defined variable <strong>places</strong> which represents the number of places after the dot point. </li>
</ol>
<p>The arguments of <strong>*setw</strong> for the first column is: </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">width(maxNum) + 1 + places</span><br></pre></td></tr></table></figure>
<p>The number <strong>1</strong> leaves room for the decimal point.</p>
<p>The arguments of <strong>*setw</strong> for the first column is:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">width(maxNum*maxNum) + 1 + 1 + places</span><br></pre></td></tr></table></figure>
<p>One of two values of 1 is added for the decimal point while the other one is added for seperating from the first column. I didn’t change anything in the <strong>width</strong> function described above and hence the arguments to be passed are converted to <strong>int</strong> type, leading to that the returned value of <strong>width</strong> is the width of the part before the decimal point. </p>
<p>Beyond this, the program asks to enter an initial value and an value of the increment for numbers of the first column. For example, we set the initial value as 0.0 and increment as 0.5, the first column becomes</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0.0</span><br><span class="line">0.5</span><br><span class="line">1.0</span><br><span class="line">...</span><br><span class="line">n</span><br></pre></td></tr></table></figure>
<p>where <strong>n</strong> is the largest number (i.e. maxNum) that available for outputs in the range of [0.0, 1000). It will be computed in the program. </p>
<p>To format outputs, I uses function <strong>fixed</strong> together with <strong>setprecision</strong> to fixed number of decimal places and <strong>showpoint</strong> to enable the display of trailing 0. A detailed comparison between these three can be found in <a href="http://quanttour.com/02/03/2018/C-Working-with-batches-of-data/" target="_blank" rel="noopener">C++ - Working with batches of data</a>.</p>
<p>Please find the <strong>midth.cpp</strong> and <strong>midth.h</strong> in exercise 4-2/3. The main function file is shown below.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Accelerated C++ Solutions Exercises 4-4</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"width.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;				<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;			<span class="keyword">using</span> <span class="built_in">std</span>::setw;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::setprecision;	<span class="keyword">using</span> <span class="built_in">std</span>::fixed;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::streamsize;		<span class="keyword">using</span> <span class="built_in">std</span>::showpoint;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::noshowpoint;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// asks toset the range for outputs</span></span><br><span class="line">	<span class="keyword">double</span> minNum, incrementByValue;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Enter an intial value greater than or equal to 0.0 and less than 1000.0: "</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; minNum;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt;<span class="string">"Enter the increment for each line of outputs: "</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; incrementByValue;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// bounds check</span></span><br><span class="line">    <span class="keyword">if</span> (minNum &gt;= <span class="number">1000.0</span> || minNum &lt; <span class="number">0.0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"The entered value is beyond the allowed value range. Please try again."</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// asks to enter a value that determines decimal places</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"How many places you want to keep after decimal point?\n"</span></span><br><span class="line">    		<span class="string">"Enter an integer to determine decimal places: "</span>;</span><br><span class="line">    <span class="keyword">int</span> places;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; places;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get the largest value that available for outputs</span></span><br><span class="line">    <span class="keyword">double</span> maxNum = minNum;</span><br><span class="line">    <span class="keyword">while</span> ((maxNum + incrementByValue) &lt; <span class="number">1000.0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">    	maxNum += incrementByValue;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// write the outputs</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">double</span> i = minNum; i &lt; <span class="number">1000.0</span>; i += incrementByValue)</span><br><span class="line">    &#123;</span><br><span class="line">    	streamsize prec = <span class="built_in">cout</span>.precision();</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; showpoint &lt;&lt; fixed &lt;&lt; setprecision(places) </span><br><span class="line">        &lt;&lt; setw(<span class="built_in">width</span>(maxNum) + places + <span class="number">1</span>) &lt;&lt; i</span><br><span class="line">        &lt;&lt; setw(<span class="built_in">width</span>(maxNum*maxNum) + places + <span class="number">2</span>) &lt;&lt; i*i </span><br><span class="line">        &lt;&lt; setprecision(prec) &lt;&lt; noshowpoint &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>It is worth noting that we cannot use equality and inequality operators in the floating point value conditions as floating values cannot be precisely  represented in the computer world. Due to this limitation, I change the condition <strong>i != 1000</strong> to <strong>i &lt; 1000.0</strong>. I did several tests to show how is the performance.</p>
<p><strong>Test 1</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Enter an intial value greater than or equal to 0.0 and less than 1000.0: 0</span><br><span class="line">Enter the increment for each line of outputs: 100</span><br><span class="line">How many places you want to keep after decimal point?</span><br><span class="line">Enter an integer to determine decimal places: 0</span><br><span class="line">  0.      0.</span><br><span class="line">100.  10000.</span><br><span class="line">200.  40000.</span><br><span class="line">300.  90000.</span><br><span class="line">400. 160000.</span><br><span class="line">500. 250000.</span><br><span class="line">600. 360000.</span><br><span class="line">700. 490000.</span><br><span class="line">800. 640000.</span><br><span class="line">900. 810000.</span><br></pre></td></tr></table></figure>
<p><strong>Test 2</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Enter an intial value greater than or equal to 0.0 and less than 1000.0: 0.5234</span><br><span class="line">Enter the increment for each line of outputs: 0.5</span><br><span class="line">How many places you want to keep after decimal point?</span><br><span class="line">Enter an integer to determine decimal places: 4</span><br><span class="line">  0.5234      0.2739</span><br><span class="line">  1.0234      1.0473</span><br><span class="line">  1.5234      2.3207</span><br><span class="line">  2.0234      4.0941</span><br><span class="line">  2.5234      6.3675</span><br><span class="line">  3.0234      9.1409</span><br><span class="line">  3.5234     12.4143</span><br><span class="line">  4.0234     16.1877</span><br><span class="line">  4.5234     20.4611</span><br><span class="line">  5.0234     25.2345</span><br><span class="line">  5.5234     30.5079</span><br><span class="line">  6.0234     36.2813</span><br><span class="line">  6.5234     42.5547</span><br><span class="line">  ....       ....</span><br><span class="line">996.0234 992062.6133</span><br><span class="line">996.5234 993058.8867</span><br><span class="line">997.0234 994055.6601</span><br><span class="line">997.5234 995052.9335</span><br><span class="line">998.0234 996050.7069</span><br><span class="line">998.5234 997048.9803</span><br><span class="line">999.0234 998047.7537</span><br><span class="line">999.5234 999047.0271</span><br></pre></td></tr></table></figure>

<p><strong>Test 3</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Enter an intial value greater than or equal to 0.0 and less than 1000.0: 999</span><br><span class="line">Enter the increment for each line of outputs: 1</span><br><span class="line">How many places you want to keep after decimal point?</span><br><span class="line">Enter an integer to determine decimal places: 1</span><br><span class="line">999.0 998001.0</span><br><span class="line">&#96;&#96;&#96;</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="Exercise-4-5"><a href="#Exercise-4-5" class="headerlink" title="Exercise 4-5"></a>Exercise 4-5</h1><p>Write a function that reads words from an input stream and stores them in a vector. Use that function both to write programs that count the number of words in the input, and to count how many times each word occurred.</p>
<h2 id="Solution-amp-Results-3"><a href="#Solution-amp-Results-3" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><p>This exercise is a variant of <a href="http://quanttour.com/04/03/2018/Accelerated-C-Solutions-to-Exercise-Chapter-3/" target="_blank" rel="noopener">Chapter 3 Exercise 3-3</a>. I uses exactly the same solution strategy in this project. Therefore, no more discussion here. The code and tests can be found below.</p>
<p><strong>mainfunction.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"wordsRead.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;    <span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::setw;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::domain_error;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// hold the information of each words</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;words_info&gt; words;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// type alias</span></span><br><span class="line">	<span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;words_info&gt;::size_type vec_size;</span><br><span class="line">	<span class="keyword">typedef</span> <span class="built_in">string</span>::size_type str_size;</span><br><span class="line">	str_size word_size = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// count the number of words</span></span><br><span class="line">	<span class="keyword">int</span> totalNum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// asks to enter words</span></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter words: "</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="comment">// read, count and store words</span></span><br><span class="line">            wordsRead(<span class="built_in">cin</span>, words, totalNum, word_size);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// write the total number of inputs</span></span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; <span class="string">"The total number of words is: "</span> &lt;&lt; totalNum &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// write each distinct word and its occurrence number</span></span><br><span class="line">            <span class="keyword">for</span> (vec_size i = <span class="number">0</span>; i != words.<span class="built_in">size</span>(); ++i)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// format each line</span></span><br><span class="line">                <span class="keyword">int</span> n = <span class="number">9</span> + word_size - words[i].wordName.<span class="built_in">size</span>();</span><br><span class="line">                <span class="built_in">cout</span> &lt;&lt; words[i].wordName &lt;&lt; setw(n) &lt;&lt; <span class="string">" appears "</span></span><br><span class="line">                        &lt;&lt; words[i].count &lt;&lt; <span class="string">" times"</span>&lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">		&#125;<span class="keyword">catch</span>(domain_error)&#123;</span><br><span class="line">			<span class="built_in">cout</span> &lt;&lt; <span class="string">"You must enter at least one word. Please try again."</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>wordsRead.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function to read, count and store words</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"wordsRead.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::istream;		<span class="keyword">using</span> <span class="built_in">std</span>::domain_error;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">istream &amp; <span class="title">wordsRead</span><span class="params">(istream &amp;is, <span class="built_in">vector</span>&lt;words_info&gt; &amp;words, <span class="keyword">int</span> &amp;totalNum, <span class="built_in">string</span>::size_type &amp;word_size)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	words_info <span class="keyword">word</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// loop invariant: we have read totalNum words now</span></span><br><span class="line">	<span class="keyword">while</span>(is &gt;&gt; <span class="keyword">word</span>.wordName)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="comment">// maintain the loop invariant</span></span><br><span class="line">		++totalNum;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// find the size of the longest word</span></span><br><span class="line">		<span class="keyword">if</span> (word_size &lt; <span class="keyword">word</span>.wordName.<span class="built_in">size</span>())</span><br><span class="line">			word_size = <span class="keyword">word</span>.wordName.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">		<span class="comment">// set flag to find each distinct word</span></span><br><span class="line">		<span class="comment">// flag == true: the word is distinct</span></span><br><span class="line">		<span class="comment">// flag == false: the word exists</span></span><br><span class="line">		<span class="keyword">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line">		<span class="keyword">for</span> (<span class="built_in">vector</span>&lt;words_info&gt;::size_type i = <span class="number">0</span>; i != words.<span class="built_in">size</span>(); ++i)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">// compare with previous distinct words</span></span><br><span class="line">			<span class="keyword">if</span> (<span class="keyword">word</span>.wordName == words[i].wordName)</span><br><span class="line">			&#123;</span><br><span class="line">				++words[i].count;</span><br><span class="line">				flag = <span class="literal">false</span>;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		<span class="comment">// if the word has not been entered, store</span></span><br><span class="line">		<span class="keyword">if</span> (flag == <span class="literal">true</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="keyword">word</span>.count = <span class="number">1</span>;</span><br><span class="line">			words.push_back(<span class="keyword">word</span>);</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">if</span> (totalNum == <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">throw</span> domain_error(<span class="string">"No input"</span>);</span><br><span class="line">	<span class="keyword">return</span> is;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>wordsRead.h</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> GUARD_wordsRead_h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GUARD_wordsRead_h</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">words_info</span>&#123;</span></span><br><span class="line">	<span class="built_in">std</span>::<span class="built_in">string</span> wordName;</span><br><span class="line">	<span class="keyword">int</span> count;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="built_in">std</span>::istream &amp; <span class="title">wordsRead</span><span class="params">(<span class="built_in">std</span>::istream &amp;, <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;words_info&gt; &amp;words, <span class="keyword">int</span> &amp;, <span class="built_in">std</span>::<span class="built_in">string</span>::size_type &amp;)</span></span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span> <span class="comment">/* GUARD_wordsRead_h */</span></span></span><br></pre></td></tr></table></figure>

<h3 id="Test-Performance"><a href="#Test-Performance" class="headerlink" title="Test Performance"></a>Test Performance</h3><p><strong>Test 1</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Please enter words: I am a good teacher and you are a good student</span><br><span class="line">The total number of words is: 11</span><br><span class="line">I       appears 1 times</span><br><span class="line">am      appears 1 times</span><br><span class="line">a       appears 2 times</span><br><span class="line">good    appears 2 times</span><br><span class="line">teacher appears 1 times</span><br><span class="line">and     appears 1 times</span><br><span class="line">you     appears 1 times</span><br><span class="line">are     appears 1 times</span><br><span class="line">student appears 1 times</span><br></pre></td></tr></table></figure>
<p><strong>Test 2</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Please enter words: what happens depends on the range of the values that the types permit</span><br><span class="line">The total number of words is: 13</span><br><span class="line">what    appears 1 times</span><br><span class="line">happens appears 1 times</span><br><span class="line">depends appears 1 times</span><br><span class="line">on      appears 1 times</span><br><span class="line">the     appears 3 times</span><br><span class="line">range   appears 1 times</span><br><span class="line">of      appears 1 times</span><br><span class="line">values  appears 1 times</span><br><span class="line">that    appears 1 times</span><br><span class="line">types   appears 1 times</span><br><span class="line">permit  appears 1 times</span><br></pre></td></tr></table></figure>

<hr>
<p>To be continued.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://quantein.com/2018/03/08/Organizing-programs-and-data-Part-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liam">
      <meta itemprop="description" content="Stochastic Modelling Notes; Programming Notes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liam's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/08/Organizing-programs-and-data-Part-2/" class="post-title-link" itemprop="url">C++ - Organizing programs with data structures</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-08 11:31:03" itemprop="dateCreated datePublished" datetime="2018-03-08T11:31:03+08:00">2018-03-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-03-09 22:36:52" itemprop="dateModified" datetime="2018-03-09T22:36:52+08:00">2018-03-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span></span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>NaN:aN</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>The program we have accomplished in last chapter is good enough for computing one students’ final grade, however, is unpractical in reality when it comes to generating a final grade report for a class. Assuming that we have a file that records all students’ information including their names, midterm and final exam grades, and homework grades. For example</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Robin 90 87 79 88 81 73 45</span><br><span class="line">Brendan 70 69 88 100 91 75 66</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>The program is required to compute the final grade for each student and generate a report like</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Bredan <span class="number">76.8</span></span><br><span class="line">Robin  <span class="number">84.4</span></span><br></pre></td></tr></table></figure>
<p>In specific, there are three requirements</p>
<ol>
<li>in the final grade, the mediter exam grade counts for 20%, the final exam grade counts for 40%, and the median homework grade counts for 40%. </li>
<li>the output follows an alphabetical order according to the names.</li>
<li>the final grades are vertically aligned.</li>
</ol>
<p>A similar program has been done in <a href="http://quanttour.com/05/03/2018/Accelerated-C-Solutions-to-Exercises-Chapter-3-Part-2/" target="_blank" rel="noopener">Exercise 3-5</a>, which can keep track of grades for several students at once though it uses the average homework grade rather than median value. The whole structure is simply a while loop. <a href="http://quanttour.com/06/03/2018/C-Organizing-programs-and-data/" target="_blank" rel="noopener">The program</a> in last chapter teaches us how to fullfill the first requirement with functions. Now we focus on how to meet the second the third requirements.</p>
<h1 id="Data-struct"><a href="#Data-struct" class="headerlink" title="Data struct"></a>Data <strong>struct</strong></h1><p>Last chapter mainly introdues how to write functions to deal with computations as well as data reading. However, the information such as name, medterm and final exam grades are still left there. If more information such as age, weight and grade need to be added, the program would be bloated. In fact, all these information can be integrated as a user-defined data structures as follows</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student_info</span> &#123;</span></span><br><span class="line">    <span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">double</span> midterm, <span class="keyword">final</span>;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; homework;        </span><br><span class="line">&#125; objectName;</span><br></pre></td></tr></table></figure>
<p>The code defines a <strong>struct</strong> that contains a group of data members. <strong>Student_info</strong> is the name of this type. Each data member is declared with a type and a name. <strong>objectName</strong> is an object of such type. Another way to declare an object is </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Student_info objectName;</span><br></pre></td></tr></table></figure>
<p>Note that there must be a semicolon at the end of the curly braces when defining a <strong>struct</strong> type. </p>
<p>It has been observed that each object of such type holds information for one student. We can store all students’ information into a vector, e.g. vector<Student_info> record.</p>
<h2 id="reading-data"><a href="#reading-data" class="headerlink" title="reading data"></a>reading data</h2><p>The function that an object of <strong>Student_info</strong> reads data is similar to that for a vector. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Student_info record;</span><br><span class="line"><span class="built_in">read</span>(<span class="built_in">cin</span>, record);</span><br></pre></td></tr></table></figure>
<p>The <strong>read</strong> function</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">istream &amp; <span class="title">read</span><span class="params">(istream &amp;is, Student_info &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    <span class="comment">// reads and store the student's name, midterm and final exam grades</span></span><br><span class="line">    is &gt;&gt; s.name &gt;&gt; s.midterm &gt;&gt; s.<span class="keyword">final</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// reads and store all homework grades</span></span><br><span class="line">    read_hw(is, s.homework);</span><br><span class="line">    <span class="keyword">return</span> is;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Since the function is similar to the <strong>read_hw</strong> function defined in <a href="http://quanttour.com/06/03/2018/C-Organizing-programs-and-data/" target="_blank" rel="noopener">this page</a>, no more discussed here. </p>
<h2 id="grade-function"><a href="#grade-function" class="headerlink" title="grade function"></a><strong>grade</strong> function</h2><p>Now the data have been stored into a sturct and concequently the grade function becomes<br><strong>overloaded function 1</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">const</span> Student_info &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> grade(s.meterm, s.<span class="keyword">final</span>, s.homework)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>overloaded function 2</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span> midterm, <span class="keyword">double</span> <span class="keyword">final</span>, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;hw)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (hw.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">throw</span> domain_error(<span class="string">"student has done no homework"</span>);</span><br><span class="line">	<span class="keyword">return</span> grade(midterm, <span class="keyword">final</span>, median(hw));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>overloaded function 3</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span> midterm, <span class="keyword">double</span> <span class="keyword">final</span>, <span class="keyword">double</span> homework)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0.2</span>*midterm + <span class="number">0.4</span>*<span class="keyword">final</span> + <span class="number">0.4</span>*homework;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="stores-all-structs-into-a-vector"><a href="#stores-all-structs-into-a-vector" class="headerlink" title="stores all structs into a vector"></a>stores all <strong>struct</strong>s into a vector</h2><p>Once the <strong>record</strong> finishes reading data for inputs, we can store it into a vector.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;Student_info&gt; students;</span><br><span class="line">Student_info record;</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">read</span>(<span class="built_in">cin</span>, record))</span><br><span class="line">&#123;</span><br><span class="line">    students.push_back(record);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="alphabetize-students"><a href="#alphabetize-students" class="headerlink" title="alphabetize students"></a>alphabetize <strong>students</strong></h1><p>Up to now, we have finished the code for all computations and data reading. The next step is to sort the <strong>students</strong> in an alphabetical order according to students’ names. In previous chapters, we uses the standard algorithm <strong>sort</strong> to accomplish sorting the <strong>homework</strong>. It can also be used to sort the <strong>students</strong>, but before we apply it we need to learn how it works on the <strong>homework</strong>.</p>
<p><strong>homework</strong> is a vector that contains all values of homework grades. The <strong>sort</strong> function compares objects in the vector using <strong>&lt;</strong>. It is clear when using <strong>&lt;</strong> to compare two numerical values but doesn’t works for the element type of a <strong>struct</strong>. Regarding to this case, the <strong>sort</strong> function provides an optional argument, a <strong>predicate</strong>, for us to define the ways to compare elements.</p>
<p>A <strong>predicate</strong> is a function that typically yields a true value of type <strong>bool</strong>. Let’s see how is it defined</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">compare</span><span class="params">(<span class="keyword">const</span> Student_info &amp;x, <span class="keyword">const</span> Student_info &amp;y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x.name &lt; y.name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The usage of the <strong>sort</strong> function is</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort(students.<span class="built_in">begin</span>(), students.<span class="built_in">end</span>, compare);</span><br></pre></td></tr></table></figure>
<p>It means that the <strong>sort</strong> function will compare elements in the <strong>students</strong> only according to its member <strong>name</strong>  rather than using <strong>&lt;</strong> directly. As for the effect of <strong>&lt;</strong> on strings, the expression is evaluated to be true if <strong>x.name</strong> is alphabetically ahead of <strong>y.name</strong>. Specifically, when compare two strings</p>
<ol>
<li>the result is the result of comparing the first character at which the strings differ. </li>
<li>if all characters of one string equal to the corresponding characters of another string, then the shorter one is less than the longer one. </li>
</ol>
<h1 id="align-the-final-grade-vertically"><a href="#align-the-final-grade-vertically" class="headerlink" title="align the final grade vertically"></a>align the final grade vertically</h1><p>Now we deal with the third requirement. Each line of outputs is formed by <strong>s.name</strong>, a blank string, and the <strong>grade</strong>. The key to solve this problem is to write a blank string with appropriate length such that all lines have same total length ahead of the final grades while the total length depends on the longest name. The minimum number of spaces between a name and a grade is one. The process can be logically divided into three steps</p>
<ol>
<li>find the longest name</li>
<li>calculate the total length ahead of the grade: the size of the longest name plus one(space).</li>
<li>Create a blank string for each line with length: the total length minus the size of each name. </li>
</ol>
<p>To find the longest name, we use another the <strong>max</strong> function defined in the header <algorithm>. The syntax is</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">max</span>(el, e2);</span><br></pre></td></tr></table></figure>
<p>It returns the larger one of two expressions which yield values of the same type. The comparison is similar to <a href="http://quanttour.com/04/03/2018/Accelerated-C-Solutions-to-Exercise-Chapter-3/" target="_blank" rel="noopener">Exercise 3-4 strategy 2</a>. </p>
<h1 id="A-complete-program"><a href="#A-complete-program" class="headerlink" title="A complete program"></a>A complete program</h1><p>Above steps show the core technicals that deals with three requirements mentioned at the begining. The new program built on <strong>struct</strong> and <strong>functions</strong> is presented as below</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Student_info&gt; students;</span><br><span class="line">    Student_info record;</span><br><span class="line">    <span class="built_in">string</span>::size_type maxlen = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// read and store all the records, and find the length of the longest name</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">read</span>(<span class="built_in">cin</span>, record))</span><br><span class="line">    &#123;</span><br><span class="line">        maxlen = <span class="built_in">max</span>(maxlen, record.name.<span class="built_in">size</span>());</span><br><span class="line">        students.push_back(record);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// alphabetize the records</span></span><br><span class="line">    sort(students.<span class="built_in">begin</span>(), students.<span class="built_in">end</span>(), compare);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// write each line of outpurs</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Student_info&gt;::size_type i = <span class="number">0</span>; i != students.<span class="built_in">size</span>(); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// write the name, blanks </span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; students[i].name &lt;&lt; <span class="built_in">string</span>(maxlen + <span class="number">1</span> - students[i].name.<span class="built_in">size</span>(), <span class="string">' '</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// compute and write the final grade</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            <span class="keyword">double</span> final_grade = grade(students[i]);</span><br><span class="line">            streamsize prec = <span class="built_in">cout</span>.precision();</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; setprecision(<span class="number">3</span>) &lt;&lt; final_grade &lt;&lt; setprecision(prec);</span><br><span class="line">        &#125; <span class="keyword">catch</span>(domain_error e)&#123;</span><br><span class="line">            <span class="built_in">cout</span> &lt;&lt; e.what();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In this program, we uses a new function <strong>what</strong> to write the diagnostic message if an exception is thrown. The catch clause named the diagnostic message as <strong>e</strong>, i.e. the object that contains the message. The message can be obtained from <strong>what()</strong>. </p>
<h1 id="Seperate-compilation"><a href="#Seperate-compilation" class="headerlink" title="Seperate compilation"></a>Seperate compilation</h1><p>Strictly speaking, above program is not a complete program as it doesn’t work when it is executed. Because we haven’t add the functions to be called in this program. It can be done by putting all stuff into a single file, which however may increase complexity and reduce readability. Alternatively, we can seperate the program into several files and compile these files seperately. In fact, we uses seperate compilation since the first program. For example, we can use <strong>IO</strong> class objects by means of including the header and declarations rather than defining the type in our programs. How this is done? Let’s write our own header files!</p>
<h2 id="header-file-and-source-file"><a href="#header-file-and-source-file" class="headerlink" title="header file and source file"></a>header file and source file</h2><p>To support seperate compilation, C++ distinguishes declarations and definitions which allows muliple files sharing one definition. For example, if we want to seperate the median function from above program, we need to put its definition into a source file named <strong>median.cpp</strong> (depending on your c++ implementations), and put its declarations into a header file named <strong>median.h</strong>. By doing so, the median function is allowed to be accessed in programs as long as we include its header file like</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"median.h"</span></span></span><br></pre></td></tr></table></figure>
<p>The header file is enclosed by double quotes rather than angle brackets, which makes it distinct from the standard library headers. The source file is created as follows</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// source file for median function </span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt; // to get declaration of sort</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt; // to get declaration of domain_error</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;    // to get declaration of vector</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;median.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// declarations for names</span></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::domain_error;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::sort;</span><br><span class="line"></span><br><span class="line"><span class="comment">// compute the median of vector&lt;double&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">median</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; vec)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// get the size of the vector</span></span><br><span class="line">	<span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;::size_type vec_size;</span><br><span class="line">	vec_size <span class="built_in">size</span> = vec.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// check whether the empty is empty</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">throw</span> domain_error(<span class="string">"median of an empty vector"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// sort the grades</span></span><br><span class="line">	sort(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">	<span class="comment">// compute the median homework grade</span></span><br><span class="line">	vec_size mid = <span class="built_in">size</span>/<span class="number">2</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span> ? (vec[mid] + vec[mid - <span class="number">1</span>])/<span class="number">2</span> : vec[mid];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Note this file includes all needed headers for the median function itself. It contains both the function declarations and definitions, which allows the compiler to check the consistency between the declarations and definitions. The header file can be written as</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> GUARD_median_h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GUARD_median_h</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">median</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;)</span></span>;    </span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p>There are several new points here. First, the file include the needed header <vector>, and use <strong>std::vector</strong> instead of <strong>using std::vector</strong>. This is because we are not sure whether a user want a using declaration in their program as once we add using declaration,  all programs that include this header file get a <strong>using std::vector</strong>. This has been also emphasized in <a href="http://quanttour.com/02/02/2018/C++%20-%20Getting%20Started/" target="_blank" rel="noopener">C++ - Getting Started</a>.<br>Second, <strong>#ifndef</strong> directive responsible for checking whether <strong>GUARD_median_h</strong> is defined. <strong>GUARD_median_h</strong> (aka. header guard) is the name of a preprocessor variable that has two status: defined or not defined. The <strong>#define</strong> directive takes the name and defines it as a preprocessor variable. <strong>ifndef</strong> is true if the preprocessor variable is undefined and the preprocessor will process following contents until encounter <strong>endif</strong>. If <strong>ifndef</strong> is false, subsquent attempts to include <strong>median.h</strong> will be overlooked to avoid multiple inclusion. </p>
<h1 id="Reorganize-the-final-grade-program"><a href="#Reorganize-the-final-grade-program" class="headerlink" title="Reorganize the final grade program"></a>Reorganize the final grade program</h1><p>The reminder of this post aims to reorganize the final grade program applying the technical, seperate compilation,introduced in this post. Let’s list all functions and data structures needed in this program.</p>
<ol>
<li><strong>read</strong> function to read students’ information.</li>
<li><strong>read_hw</strong> function to read homework grades for each student.</li>
<li><strong>compare</strong> function as an optional argument in <strong>sort</strong>.</li>
<li>three <strong>grade functions</strong>(overloaded) to compute the final grade.</li>
<li><strong>median</strong> function to compute median of homework grades.</li>
<li>Beyond above functions, we also defined a data structure, <strong>Student_info</strong> to hold student’s information. </li>
</ol>
<p>Logically speaking, these entities can be divided into two groups: </p>
<ul>
<li>group 1 including 6, 1, 2, 3 deals with information</li>
<li>group 2 including 4, 5 deals with computation</li>
</ul>
<p>Therefore, we can package two groups into two independent files seperately. </p>
<h2 id="Group-1"><a href="#Group-1" class="headerlink" title="Group 1"></a>Group 1</h2><p><strong>Student_info.h</strong> </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> GUARD_Student_info</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GUARD_Student_info</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Student_info.header file</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Student_info</span>&#123;</span></span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">string</span> name;</span><br><span class="line">    <span class="keyword">double</span> midterm, <span class="keyword">final</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; homework;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">compare</span><span class="params">(<span class="keyword">const</span> Student_info &amp;, <span class="keyword">const</span> Student_info &amp;)</span></span>;</span><br><span class="line"><span class="function"><span class="built_in">std</span>::istream &amp; <span class="title">read</span><span class="params">(<span class="built_in">std</span>::istream &amp;, Student_info &amp;)</span></span>;</span><br><span class="line"><span class="function"><span class="built_in">std</span>::istream &amp; <span class="title">read_hw</span><span class="params">(<span class="built_in">std</span>::istream &amp;, <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;)</span></span>;</span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br></pre></td></tr></table></figure>
<p><strong>Student_info.cpp</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// source file for Student_info related functions</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Student_info.h"</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>; <span class="keyword">using</span> <span class="built_in">std</span>::istream;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">compare</span><span class="params">(<span class="keyword">const</span> Student_info &amp;x, <span class="keyword">const</span> Student_info &amp;y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> x.name &lt; y.name;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">istream &amp; <span class="title">read</span><span class="params">(istream &amp;is, Student_info &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    <span class="comment">// reads and store the student's name, midterm and final exam grades</span></span><br><span class="line">    is &gt;&gt; s.name &gt;&gt; s.midterm &gt;&gt; s.<span class="keyword">final</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// reads and store all homework grades</span></span><br><span class="line">    read_hw(is, s.homework);</span><br><span class="line">    <span class="keyword">return</span> is;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">istream &amp; <span class="title">read_hw</span><span class="params">(istream &amp;in, <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;hw)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (in)&#123;</span><br><span class="line">		<span class="comment">//get rid of previous contents</span></span><br><span class="line">		hw.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">		<span class="comment">// read homework grades</span></span><br><span class="line">		<span class="keyword">double</span> x;</span><br><span class="line">		<span class="keyword">while</span>(in &gt;&gt; x)</span><br><span class="line">			hw.push_back(x);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// clear the stream so that input will work for the next student</span></span><br><span class="line">		in.<span class="built_in">clear</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Group-2"><a href="#Group-2" class="headerlink" title="Group 2"></a>Group 2</h2><p><strong>grade.h</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">ifndef</span> GUARD_grade_h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> GUARD_grade_h</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// grade.h</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"Student_info.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">const</span> Student_info &amp;)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span>, <span class="keyword">double</span>, <span class="keyword">const</span> <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span>, <span class="keyword">double</span>, <span class="keyword">double</span>)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">median</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;)</span></span>;   </span><br><span class="line"><span class="meta">#<span class="meta-keyword">endif</span></span></span><br><span class="line"></span><br><span class="line">**grade.cpp**</span><br><span class="line">```c++</span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdexcept&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;    </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"grade.h"</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">"student_info.h"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::domain_error;  <span class="keyword">using</span> <span class="built_in">std</span>::istream;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;        <span class="keyword">using</span> <span class="built_in">std</span>::sort;</span><br><span class="line"></span><br><span class="line"><span class="comment">// grade function 1</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">const</span> Student_info &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> grade(s.midterm, s.<span class="keyword">final</span>, s.homework);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// grade function 2</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span> midterm, <span class="keyword">double</span> <span class="keyword">final</span>, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;hw)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (hw.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> domain_error(<span class="string">"student has done no homework"</span>);</span><br><span class="line">    <span class="keyword">return</span> grade(midterm, <span class="keyword">final</span>, median(hw));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// grade function 3</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span> midterm, <span class="keyword">double</span> <span class="keyword">final</span>, <span class="keyword">double</span> homework)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.2</span>*midterm + <span class="number">0.4</span>*<span class="keyword">final</span> + <span class="number">0.4</span>*homework;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// compute the median of vector&lt;double&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">median</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; vec)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// get the size of the vector</span></span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;::size_type vec_size;</span><br><span class="line">    vec_size <span class="built_in">size</span> = vec.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// check whether the empty is empty</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> domain_error(<span class="string">"median of an empty vector"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// sort the grades</span></span><br><span class="line">    sort(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// compute the median homework grade</span></span><br><span class="line">    vec_size mid = <span class="built_in">size</span>/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span> ? (vec[mid] + vec[mid - <span class="number">1</span>])/<span class="number">2</span> : vec[mid];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Inputs:</span><br><span class="line"></span><br><span class="line">Robin 90 87 79 88 81 73 45</span><br><span class="line">Brendan 70 69 88 100 91 75 66</span><br><span class="line">Arsenii 99 87 89 88 74 90 70</span><br><span class="line">Liam 83 66 100 76 87 91 78</span><br><span class="line"></span><br><span class="line">Outputs:</span><br><span class="line"></span><br><span class="line">Arsenii 89.8</span><br><span class="line">Brendan 76.8</span><br><span class="line">Liam    77.8</span><br><span class="line">Robin   84.4</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://quantein.com/2018/03/06/C-Organizing-programs-and-data/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liam">
      <meta itemprop="description" content="Stochastic Modelling Notes; Programming Notes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liam's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/06/C-Organizing-programs-and-data/" class="post-title-link" itemprop="url">C++ - Organizing programs with functions</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-06 11:28:53" itemprop="dateCreated datePublished" datetime="2018-03-06T11:28:53+08:00">2018-03-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-03-09 16:52:30" itemprop="dateModified" datetime="2018-03-09T16:52:30+08:00">2018-03-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span></span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>NaN:aN</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Previous chapters mainly covers topics including</p>
<ol>
<li><strong>main function</strong> structure</li>
<li><strong>statements</strong> such as expression statements and flow-of-control statements. </li>
<li>built-in types, such as <strong>int</strong>, <strong>float</strong>, <strong>double</strong>, <strong>bool</strong> and <strong>char</strong>.</li>
<li>standard library <strong>IO</strong> mechanism.</li>
<li>standard library <strong>string</strong>.</li>
<li>standard library <strong>vector</strong>. </li>
</ol>
<p>We have achieved several goals through certain statements and operations on objects of different types. However, the program becomes unmanageable along with increasingly complex functions and growing information. For this reason, this chapter introduces how to organize programs and data. </p>
<h1 id="Functions"><a href="#Functions" class="headerlink" title="Functions"></a>Functions</h1><h2 id="Basics"><a href="#Basics" class="headerlink" title="Basics"></a>Basics</h2><h3 id="writing-a-function"><a href="#writing-a-function" class="headerlink" title="writing a function"></a>writing a function</h3><p>If we break a program(e.g. <a href="http://quanttour.com/02/03/2018/C-Working-with-batches-of-data/" target="_blank" rel="noopener">A complete program</a>) into pieces, we found that it is in fact constituted by <strong>data information</strong>, <strong>homework grade computation</strong> and <strong>final grade computation</strong>. Both computations can be organized as a <strong>function</strong>, which is a named block of code. The functions will be called When the computation results are needed. Let’s start with writing a function to compute the <strong>final grade</strong>, assuming that the homework grade has been computed.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// compute the final grade of a student</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span> midterm, <span class="keyword">double</span> <span class="keyword">final</span>, <span class="keyword">double</span> homework)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.2</span>*midterm + <span class="number">0.4</span>*<span class="keyword">final</span> + <span class="number">0.4</span>*homework;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Basically, it has the same structure as the <strong>main</strong> function except that we use empty parameter list in previous <strong>main</strong> function. </p>
<p>In general, a function includes four parts:</p>
<ol>
<li><strong>return type</strong>. In this case, it has return type of <strong>double</strong>.</li>
<li><strong>function name</strong>. In this case, the function is names as <strong>grade</strong>.</li>
<li><strong>parameter list</strong> enclosed in parentheses <strong>()</strong>. In this case, there are three parameters seperated by commas. All three parameters have type of <strong>double</strong>. They are defined like variables but only be created when the function is called.</li>
<li><strong>function body</strong> enclosed in curly braces <strong>{}</strong>. The return statements returns the result to function caller. </li>
</ol>
<h3 id="calling-a-function"><a href="#calling-a-function" class="headerlink" title="calling a function"></a>calling a function</h3><p>When calling the function, the excution of function caller is suspended and execution of the called function begins. We must supply corresponding <strong>arguments</strong> for the purpose of initializing the parameters. In other words, <strong>arguments</strong> are the initializers for a function’s parameters. <strong>Arguments</strong> can be variables or expressions or even values. But they must be provided in the same order as well as the same type as the parameters. If we replace the computation in the original program, it would be like</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"You final grade is "</span> &lt;&lt; setprecision(<span class="number">3</span>)</span><br><span class="line">    &lt;&lt; grade(midterm, <span class="keyword">final</span>, sum/count) &lt;&lt; setprecision(prec) &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure>
<p>The first parameter <strong>midterm</strong> will be initialized by copying the value of <strong>argument</strong> midterm into it. So do the other parameters. This is what so called <strong>call by value</strong>. Essentially, these parameters are created in an area independent from the variables in the calling function though they have the same values. Therefore, if the function manipulate these parameters, it wouldn’t change values of the calling function variables. In addition, the parameters are local to the function and only exist start from calling the function to returning from the function. Therefore, it doesn’t matter that we use same name as the variable in the calling function. </p>
<p>Once the execution encounters the return statement in the function body, the execution of the function ends and back to the calling function. </p>
<h2 id="Writing-a-median-function"><a href="#Writing-a-median-function" class="headerlink" title="Writing a median function"></a>Writing a median function</h2><p>Now we consider writing a median function that computes the median value of the homework grades. Let’s list four parts of a median function:</p>
<ol>
<li>the return type should be <strong>double</strong>.</li>
<li>it is named as <strong>median</strong> for clarity.</li>
<li>what we need for computation is only a <strong>vector</strong> of <strong>double</strong> type (assuming that we have read all grades). </li>
<li>computing algorithms. </li>
</ol>
<p>It’s pretty straightforward</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">median</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; vec)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// algorithms to be written</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The algorithm in the original program is</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// get the size of the vector</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;::size_type vec_size;</span><br><span class="line">vec_size <span class="built_in">size</span> = homework.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// check special case</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="string">"You must enter your grades. "</span></span><br><span class="line">                <span class="string">"Please try again."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// sort the grades</span></span><br><span class="line">sort(homework.<span class="built_in">begin</span>(), homework.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line"><span class="comment">// compute the median homework grade</span></span><br><span class="line">vec_size mid = <span class="built_in">size</span>/<span class="number">2</span>;</span><br><span class="line"><span class="keyword">double</span> median;</span><br><span class="line">median = <span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span> ? (homework[mid] + homework[mid - <span class="number">1</span>])/<span class="number">2</span> : homework[mid];</span><br></pre></td></tr></table></figure>
<p>To write this piece of code into the function, we need to first change the variable name <strong>homework</strong> to <strong>vec</strong> as this function suites for more general cases. Nevertheless, you don’t have to do it if you dislike. The second step is to remove the variable <strong>median</strong> and add return because what this function need to do to return the median value. The last step is to change the code that deals with the case of empty vector. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">throw</span> domain_error(<span class="string">"median of an empty vector"</span>);</span><br></pre></td></tr></table></figure>
<p>This is because the original code can not be used here due to it returns another value 1 (unless we change the function structure). In real word programming, <strong>throw</strong> an <strong>exception</strong> is a more general way to complain. The usage is explained in next part. Now the function is accomplished as shown below</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function to compute the median of a vector&lt;double&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">median</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; vec)</span></span></span><br><span class="line"><span class="function"></span>&#123;   </span><br><span class="line">    <span class="comment">// get the size of the vector</span></span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;::size_type vec_size;</span><br><span class="line">    vec_size <span class="built_in">size</span> = vec.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// check whether the empty is empty</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> domain_error(<span class="string">"median of an empty vector"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// sort the grades</span></span><br><span class="line">    sort(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// compute the median homework grade</span></span><br><span class="line">    vec_size mid = <span class="built_in">size</span>/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span> ? (vec[mid] + vec[mid - <span class="number">1</span>])/<span class="number">2</span> : vec[mid];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="try-blocks-and-Exception-handling"><a href="#try-blocks-and-Exception-handling" class="headerlink" title="try blocks and Exception handling"></a><strong>try</strong> blocks and Exception handling</h2><p><em>“Exceptions are run-time anomalies—such as losing a database connection or encountering unexpected input—that exist outside the normal functioning of a program.”</em> - Lippman etc. 2012</p>
<h3 id="throw-expressions"><a href="#throw-expressions" class="headerlink" title="throw expressions"></a><strong>throw</strong> expressions</h3><p><strong>throw</strong> expressions is used to detect the exceptions, which is followed by an <strong>exception</strong> onject that describes the problems that it encounters. It stops the execution of the current function and passes an exception object to the caller for handling it. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// the detecting part</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>)</span><br><span class="line">    <span class="comment">// throw raises exceptions</span></span><br><span class="line">    <span class="keyword">throw</span> domain_error(<span class="string">"median of an empty vector"</span>);</span><br></pre></td></tr></table></figure>
<p>For example, the exception object <strong>domian_error</strong> contains the information of that the caller can use to act on the exception. It is a type that the standard library defines in header <stdexcept> for use in reporting the logic error: argument is out side the values that the function can accept. What closely follows is a string enclosed by parentheses to describe the problem.</p>
<h3 id="the-try-block"><a href="#the-try-block" class="headerlink" title="the try block"></a>the <strong>try</strong> block</h3><p>The <strong>try</strong> block is the handling part uses to deal with an exception. Once the exception is thrown, it catches the exception and handle it according to the type of the exception object. The general syntax is </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">    <span class="comment">// statements including the detecting part</span></span><br><span class="line">&#125; catches(exception object1)&#123;</span><br><span class="line">    <span class="comment">// handler-statements</span></span><br><span class="line">&#125; catches(exception object2)&#123;</span><br><span class="line">    <span class="comment">// handler-statements</span></span><br><span class="line">&#125;  ...</span><br></pre></td></tr></table></figure>
<p>The catch clause handles the exception and hence is termed as “exception handler”. If the statements between <strong>try</strong> and <strong>catch</strong> don’t throw any exceptions during execution, the program ignores the handler-statements and continue to next part. </p>
<p>It is worthing noting that each pair of curly braces forms a name scope. The application of the <strong>try</strong> block will be finished at the end of this post. </p>
<h2 id="Finish-the-grade-function"><a href="#Finish-the-grade-function" class="headerlink" title="Finish the grade function"></a>Finish the <strong>grade</strong> function</h2><p>Now we can embed the <strong>median</strong> function in the <strong>grade</strong> function. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// function to compute the final grade which is the weighted average grade of medterm exam grade, final exam grade and the median homework grade</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span> midterm, <span class="keyword">double</span> <span class="keyword">final</span>, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;hw)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (hw.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">throw</span> domain_error(<span class="string">"student has done no homework"</span>);</span><br><span class="line">    <span class="keyword">return</span> grade(midterm, <span class="keyword">final</span>, median(hw));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="reference-and-call-by-reference"><a href="#reference-and-call-by-reference" class="headerlink" title="reference and call by reference"></a><strong>reference</strong> and call by reference</h3><p>It has been noted that this <strong>grade</strong> function differs from the previous one mentioned at the beigining in the part of <strong>parameter list</strong>. The third parameter here has a compound type with modifier <strong>reference</strong>. Recalling that to declare a variable needs a <strong>type</strong> and a <strong>name</strong>. More generally, a declaration is a <strong>base type</strong> followed by a list of <strong>declarators</strong> including a <strong>name</strong> and an optional <strong>type modifier</strong>. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    base type modifier name </span><br><span class="line">``` </span><br><span class="line">A variable declared in above form has a type named **compound type** which is built from the base type. In <span class="keyword">this</span> <span class="keyword">case</span>, the third parameter has a type of **<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;** with modifier **reference** which indicates that the onject named **hw** refers to its **initializer**. In other words, a reference is a **alias** <span class="keyword">and</span> **hw** is simply another name <span class="keyword">for</span> the argument to be passed. In addition, a reference to a reference is in fact that both references refer to the original object. For example</span><br><span class="line">```c++</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;hw1 = hw; <span class="comment">// hw1 is another name for the vector homework</span></span><br></pre></td></tr></table></figure>
<p>In contrast to <strong>call by value</strong>, this is termed as <strong>call by reference</strong>. When we operate on a reference, we actually operate on the object that the reference refers. For the purpose of computational effiency, passing argument by reference can avoid copies, particularly for objects of large containers or class types. But, it is not a good habit to modify the value of the object that the reference refers. It’s complete ok in this case as the object is passed by copy in the <strong>median</strong> function where we will operate on the homework grades. Beyond this, there is a <strong>const</strong> qualifier before the reference, which restrict the values of the object to be changed when operating on the reference. </p>
<h3 id="overloaded-function"><a href="#overloaded-function" class="headerlink" title="overloaded function"></a>overloaded function</h3><p>Recalling the previous <strong>grade function</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">```c++</span><br><span class="line"><span class="comment">// compute the final grade of a student</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span> midterm, <span class="keyword">double</span> <span class="keyword">final</span>, <span class="keyword">double</span> homework)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.2</span>*midterm + <span class="number">0.4</span>*<span class="keyword">final</span> + <span class="number">0.4</span>*homework;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>These two functions have the same name but different parameter list. This is termed as <strong>function overloading</strong> with either different types or numbers of parameters. If two function only differs in <strong>return type</strong>, functions can not be overloaded. When calling the overloaded function, the complier determines which function to call according to the supplied arguments and the defined parameters in each funciton.</p>
<h2 id="Writing-a-reading-function"><a href="#Writing-a-reading-function" class="headerlink" title="Writing a reading function"></a>Writing a reading function</h2><p>Finally, we need to solve the problem that how to read home work grades into a vector. The oringal code is </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> x;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; homework;</span><br><span class="line"></span><br><span class="line"><span class="comment">// enter homework grades followed by end-of-file</span></span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; x)</span><br><span class="line">    homework.push_back(x);</span><br></pre></td></tr></table></figure>
<p>So, what’s this function should return?<br>Obviously, the purpose is to fill the vector <strong>homework</strong> and therefore it should return a filled vector. Beyond this, the function is required to return another value to the <strong>stream</strong> to indicate whether the attempted input was successful.<br>Intuitively, it works like this:</p>
<p><img src="/images/readingfunction.png" alt="Funtion work flow"></p>
<p>But it is hard to deal with two returns in one function and alternatively we can define a parameter as a reference type for the purpose of changing the values in <strong>homework</strong> directly. See the code below</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// read the homework grades from an input stream into a vector homework</span></span><br><span class="line"><span class="function">istream &amp; <span class="title">read_hw</span><span class="params">(istream &amp;in, <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;hw)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// statements to be filled</span></span><br><span class="line">    <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="lvalue"><a href="#lvalue" class="headerlink" title="lvalue"></a>lvalue</h3><p>We are familar with the second parameter which refers to its initializer to be passed, i.e. the vector <strong>homework</strong>. Since we intend to modify the passed arguments, the <strong>const</strong> qualifier has been dropped. There is an important difference between a <strong>const</strong> reference and a <strong>nonconst</strong> reference. For a <strong>const reference</strong>, the arguments to be passed can be any value while a <strong>non const reference</strong> can only refer to a <strong>lvalue</strong> object (i.e. a nontemporary object). Any expressions that generate arithmetic values are not <strong>lvalue</strong>. For example</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line"><span class="keyword">int</span> &amp;j = i; <span class="comment">// correct: j is bound to i</span></span><br><span class="line"><span class="keyword">int</span> &amp;m = <span class="number">10</span>; <span class="comment">// error: initializer must be an nontemporary object</span></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> &amp;n = <span class="number">10</span>; <span class="comment">// correct: a const reference</span></span><br></pre></td></tr></table></figure>
<h3 id="member-function-clear"><a href="#member-function-clear" class="headerlink" title="member function clear"></a>member function <strong>clear</strong></h3><p>The first parameter is also a type of <strong>non-const</strong> reference which refers to the object <strong>cin</strong>. This is because we hope to change its internal state. As a result, the return type is also a reference as <strong>in</strong> is a reference. Another reason is that there is no copy or assign for <strong>IO</strong> objects. </p>
<p>Now we consider read entered grades into <strong>homework</strong>. Remember that We propose to write a program that can deal with multiple students’ records. One problem is that the vector might contain the grades of the last student. To keep the vector empty, we use <strong>hw.clear()</strong> to discard any contents the vector might have had. </p>
<p>Similarly, we also need to keep the <strong>cin</strong> be valid for each student. In previous chapter, We have explained that once we finishes typing in the homework grades a signal <strong>end-of-file</strong> needs to be sent for terminating the loop. The signal will change the internal state of the <strong>cin</strong> to be false. In addition, <strong>end-of-file</strong> is not the only input that can stop the loop. If we enter values of an improper type, the library would mark the input stream as being in <strong>failure state</strong> as well. For this reason, we use <strong>in.clear()</strong> to clear the error state of <strong>cin</strong> after finishing the input for one student. Note that both the vector and the object of <strong>istream</strong> have member function <strong>clear</strong> but the effects are completely different. The function is shown below</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// read homework grades from an input stream inti a vector</span></span><br><span class="line"><span class="function">istream &amp; <span class="title">read_hw</span><span class="params">(istream &amp;in, <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;hw)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (in)&#123;</span><br><span class="line">        <span class="comment">//get rid of previous contents</span></span><br><span class="line">        hw.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// read homework grades</span></span><br><span class="line">        <span class="keyword">double</span> x;</span><br><span class="line">        <span class="keyword">while</span>(in &gt;&gt; x)</span><br><span class="line">            hw.push_back(x);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// clear the stream so that input will work for the next student</span></span><br><span class="line">        in.<span class="built_in">clear</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="A-complete-program"><a href="#A-complete-program" class="headerlink" title="A complete program"></a>A complete program</h2><p>Up to now, we have changed the computations in the original program to functions including a function to homework grades, a function to calculate the median of homework grades and a function to calculate the final grade. A complete program is presented below</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// include directives</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt; // to get declaration of cin, cout, endl,</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;istream&gt;  // to get declaration of istream</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;   // to get declaration of string</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;   // to get declaration of vector</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;// to get declaration of sort</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;ios&gt;      // to get declaration of streamsize</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdexcept&gt;// to get declaration of domain_error</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iomanip&gt;  // to get declaration of setprecision</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// add using declarations</span></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>; 			<span class="keyword">using</span> <span class="built_in">std</span>::setprecision;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;			<span class="keyword">using</span> <span class="built_in">std</span>::streamsize;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;			<span class="keyword">using</span> <span class="built_in">std</span>::domain_error;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;			<span class="keyword">using</span> <span class="built_in">std</span>::istream;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;          <span class="keyword">using</span> <span class="built_in">std</span>::sort;</span><br><span class="line"></span><br><span class="line"><span class="comment">// declare functions</span></span><br><span class="line"><span class="function">istream &amp; <span class="title">read_hw</span><span class="params">(istream &amp;in, <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;hw)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">median</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; vec)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span> midterm, <span class="keyword">double</span> <span class="keyword">final</span>, <span class="keyword">double</span> homework)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span> midterm, <span class="keyword">double</span> grade, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;hw)</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main function</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ask for and read the student's name</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter your first name: "</span>;</span><br><span class="line">    <span class="built_in">string</span> name;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; name;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello, "</span> &lt;&lt; name &lt;&lt; <span class="string">"!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ask for and read the midterm and final grades</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter your midterm and final exam grades: "</span>;</span><br><span class="line">    <span class="keyword">double</span> midterm, <span class="keyword">final</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; midterm &gt;&gt; <span class="keyword">final</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ask for the homework grades</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Enter all your homework grades, followed by end-of-file: "</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// read the homework grades</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; homework;</span><br><span class="line">    read_hw(<span class="built_in">cin</span>, homework);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// compute and generate the final grade, if possible</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">double</span> final_grade = grade(midterm, <span class="keyword">final</span>, homework);</span><br><span class="line">        streamsize prec = <span class="built_in">cout</span>.precision();</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Your final grade is "</span> &lt;&lt; setprecision(<span class="number">3</span>)</span><br><span class="line">            &lt;&lt; final_grade &lt;&lt; setprecision(prec) &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">    &#125; <span class="keyword">catch</span>(domain_error) &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="string">"You must enter your grade. Please trt again."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// define function to read homework grade</span></span><br><span class="line"><span class="function">istream &amp; <span class="title">read_hw</span><span class="params">(istream &amp;in, <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;hw)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (in)&#123;</span><br><span class="line">		<span class="comment">//get rid of previous contents</span></span><br><span class="line">		hw.<span class="built_in">clear</span>();</span><br><span class="line"></span><br><span class="line">		<span class="comment">// read homework grades</span></span><br><span class="line">		<span class="keyword">double</span> x;</span><br><span class="line">		<span class="keyword">while</span>(in &gt;&gt; x)</span><br><span class="line">			hw.push_back(x);</span><br><span class="line"></span><br><span class="line">		<span class="comment">// clear the stream so that input will work for the next student</span></span><br><span class="line">		in.<span class="built_in">clear</span>();</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> in;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// define function to calculate median value</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">median</span><span class="params">(<span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; vec)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// get the size of the vector</span></span><br><span class="line">	<span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;::size_type vec_size;</span><br><span class="line">	vec_size <span class="built_in">size</span> = vec.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">	<span class="comment">// check whether the empty is empty</span></span><br><span class="line">	<span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">throw</span> domain_error(<span class="string">"median of an empty vector"</span>);</span><br><span class="line"></span><br><span class="line">	<span class="comment">// sort the grades</span></span><br><span class="line">	sort(vec.<span class="built_in">begin</span>(), vec.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">	<span class="comment">// compute the median homework grade</span></span><br><span class="line">	vec_size mid = <span class="built_in">size</span>/<span class="number">2</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span> ? (vec[mid] + vec[mid - <span class="number">1</span>])/<span class="number">2</span> : vec[mid];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// define a function to calculate final grade</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span> midterm, <span class="keyword">double</span> <span class="keyword">final</span>, <span class="keyword">const</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; &amp;hw)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (hw.<span class="built_in">size</span>() == <span class="number">0</span>)</span><br><span class="line">		<span class="keyword">throw</span> domain_error(<span class="string">"student has done no homework"</span>);</span><br><span class="line">	<span class="keyword">return</span> grade(midterm, <span class="keyword">final</span>, median(hw));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//define a function to calculate final grade (function overloading)</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">grade</span><span class="params">(<span class="keyword">double</span> midterm, <span class="keyword">double</span> <span class="keyword">final</span>, <span class="keyword">double</span> homework)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0.2</span>*midterm + <span class="number">0.4</span>*<span class="keyword">final</span> + <span class="number">0.4</span>*homework;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>See from above program, why the statements inside the <strong>try</strong> block are not organized as such form</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    streamsize_prec = <span class="built_in">cout</span>.precision();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Your final grade is "</span> &lt;&lt; setprecision(<span class="number">3</span>)</span><br><span class="line">        &lt;&lt; grade(midterm, <span class="keyword">final</span>, homework) </span><br><span class="line">        &lt;&lt; setprecision(prec) &lt;&lt;<span class="built_in">endl</span>;</span><br><span class="line">&#125; <span class="keyword">catch</span>...</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>In doing so, we probably can’t control the outputs as the <strong>grade</strong> function may be called after or before the string literals depending on the implementation. Also, if any exception is thrown, the precision may not be reset back to the original value as expected. </p>
<hr>
<p>To be continued.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://quantein.com/2018/03/05/Accelerated-C-Solutions-to-Exercises-Chapter-3-Part-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liam">
      <meta itemprop="description" content="Stochastic Modelling Notes; Programming Notes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liam's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/05/Accelerated-C-Solutions-to-Exercises-Chapter-3-Part-2/" class="post-title-link" itemprop="url">Accelerated C++ Solutions to Exercises(Chapter 3 Part 2)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-05 16:04:02" itemprop="dateCreated datePublished" datetime="2018-03-05T16:04:02+08:00">2018-03-05</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-03-06 15:03:14" itemprop="dateModified" datetime="2018-03-06T15:03:14+08:00">2018-03-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span></span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>NaN:aN</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Exercise-3-5"><a href="#Exercise-3-5" class="headerlink" title="Exercise 3-5"></a>Exercise 3-5</h1><p>Write a program that will keep track of grades for several students at once. The program could keep two vectors in sync: The first should hold the student’s names, and the second the final grades that can be computed as input is read. For now, you should assume a fixed number of homework grades. </p>
<h2 id="Solution-amp-Results"><a href="#Solution-amp-Results" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><p>The exercise tries to make the original program (see <a href="http://quanttour.com/02/03/2018/C-Working-with-batches-of-data/" target="_blank" rel="noopener">the first program</a>) more practical. There are two more requirements compared with the original one: first, it requires computing the final grades for several students at once; second, it requires keep tracking both the students’ name and their final grades. </p>
<p>To meet the first requirements, we can add a while loop which allows us compute the final grades multiple times for different student. The condition will be an variable whose value depends on users. Let’s finish this first</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// set initial status</span></span><br><span class="line"><span class="keyword">bool</span> <span class="built_in">running</span> = <span class="literal">true</span>;</span><br><span class="line"><span class="keyword">while</span>(<span class="built_in">running</span>)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">// compound statements</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">char</span> flag;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Do you want to check more students? Please input Y/N: "</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; flag;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (flag == <span class="string">'Y'</span>) ;</span><br><span class="line">    <span class="keyword">else</span> <span class="built_in">running</span> = <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>To meet the second requirement, we can store both names and the final grades into two vectors. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; names;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; finalGrades;</span><br></pre></td></tr></table></figure>
<p>Each time we store a student’s name, we will store his final grade after computation. When needs writing the outputs, we can use same index for both vectors as there is a one-to-one correspondence.</p>
<p>Below is the modified program </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ios&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;			<span class="keyword">using</span> <span class="built_in">std</span>::setprecision;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::streamsize;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; names;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; finalGrades;</span><br><span class="line">    <span class="keyword">bool</span> <span class="built_in">running</span> = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">running</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ask for and read the student's name</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter your first name: "</span>;</span><br><span class="line">        <span class="built_in">string</span> name;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; name;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// store the name into names</span></span><br><span class="line">        names.push_back(name);</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello, "</span> &lt;&lt; name &lt;&lt; <span class="string">"!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ask for and read the midterm and final grades</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter you midterm and final exam grades: "</span>;</span><br><span class="line">        <span class="keyword">double</span> midterm, <span class="keyword">final</span>;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; midterm &gt;&gt; <span class="keyword">final</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ask for the number of homework grades</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter the number of your homeworks: "</span>;</span><br><span class="line">        <span class="keyword">int</span> numofHomeworks;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; numofHomeworks;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ask for all homework grades</span></span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Enter all your homework grades: "</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// the number and the sum of grades read so far</span></span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// a variable into which to read</span></span><br><span class="line">        <span class="keyword">double</span> x;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// invariant: we have read count grades so far, and sum is the sum of the first count grades</span></span><br><span class="line">        <span class="keyword">while</span> (count &lt; numofHomeworks)</span><br><span class="line">        &#123;</span><br><span class="line">            ++count;</span><br><span class="line">            <span class="built_in">cin</span> &gt;&gt; x;</span><br><span class="line">            sum += x;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// compute the fianl grade and store into finalGrades</span></span><br><span class="line">        <span class="keyword">double</span> finalGrade = <span class="number">0.2</span> * midterm + <span class="number">0.4</span> * <span class="keyword">final</span> + <span class="number">0.4</span> * sum/count;</span><br><span class="line">        finalGrades.push_back(finalGrade);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// check condition</span></span><br><span class="line">        <span class="keyword">char</span> flag;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"Do you want to check more students? Please input Y/N: "</span>;</span><br><span class="line">        <span class="built_in">cin</span> &gt;&gt; flag;</span><br><span class="line">        <span class="keyword">if</span> (flag == <span class="string">'Y'</span>) ;</span><br><span class="line">        <span class="keyword">else</span> <span class="built_in">running</span> = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// prepare for writing outputs</span></span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::size_type vec_size;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (vec_size i = <span class="number">0</span>; i != names.<span class="built_in">size</span>(); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        streamsize prec = <span class="built_in">cout</span>.precision();</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; names[i] &lt;&lt; <span class="string">"'s final grade is: "</span> &lt;&lt; setprecision(<span class="number">3</span>) &lt;&lt; finalGrades[i]</span><br><span class="line">            &lt;&lt;	setprecision(prec) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>It’s not complex once figure out the original program. I test the program and it works well (see below).<br><strong>Test</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Please enter your first name: Conor</span><br><span class="line">Hello, Conor!</span><br><span class="line">Please enter you midterm and final exam grades: 88 70</span><br><span class="line">Please enter the number of your homeworks: 3</span><br><span class="line">Enter all your homework grades: 65 76 81</span><br><span class="line">Do you want to check more students? Please input Y&#x2F;N: Y</span><br><span class="line">Please enter your first name: Brendan</span><br><span class="line">Hello, Brendan!</span><br><span class="line">Please enter you midterm and final exam grades: 70 80</span><br><span class="line">Please enter the number of your homeworks: 2</span><br><span class="line">Enter all your homework grades: 90 85</span><br><span class="line">Do you want to check more students? Please input Y&#x2F;N: Y</span><br><span class="line">Please enter your first name: Robin</span><br><span class="line">Hello, Robin!</span><br><span class="line">Please enter you midterm and final exam grades: 90 90</span><br><span class="line">Please enter the number of your homeworks: 5</span><br><span class="line">Enter all your homework grades: 80 70 60 50 40</span><br><span class="line">Do you want to check more students? Please input Y&#x2F;N: N</span><br><span class="line"></span><br><span class="line">Conor&#39;s final grade is: 75.2</span><br><span class="line">Brendan&#39;s final grade is: 81</span><br><span class="line">Robin&#39;s final grade is: 78</span><br></pre></td></tr></table></figure>
<p>Note that the final grades don’t retain the tail <strong>zero</strong>s and the dot point though we set precision arguments as 3. Please find more experiments about <strong>setprecision</strong> at <a href="http://quanttour.com/02/03/2018/C-Working-with-batches-of-data/" target="_blank" rel="noopener">Working with batches of data </a>. </p>
<hr>
<h1 id="Exercise-3-6"><a href="#Exercise-3-6" class="headerlink" title="Exercise 3-6"></a>Exercise 3-6</h1><p>The average-grade computation in  <a href="http://quanttour.com/02/03/2018/C-Working-with-batches-of-data/" target="_blank" rel="noopener">the first program</a> might divide by zero if the student didn’t enter any grades. Division by zero is undefined in C++, which means that the implementation is permitted to do anything it likes. What does your C++ implementation do in this case? Rewrite the program so that its behavior does not depend on how the implementation treats division by zero.</p>
<h2 id="Solution-amp-Results-1"><a href="#Solution-amp-Results-1" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><p>To figure out how c++ implementation deals with division by 0, I did several experiments.<br><strong>Experiment 1</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; i/j &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    returo <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The result shows that disivion by 0 with both integers makes the program crash.</p>
<p><strong>Experiment 2</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">double</span> j = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; i/j &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">double</span> x = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">int</span> y = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; x/y &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">double</span> m = <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">double</span> n = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; m/n &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>This program works and returns three <strong>inf</strong> which means <strong>infinity</strong>. </p>
<p><strong>Exerpriment 3</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">double</span> h = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">double</span> k1 = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> k2 = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; h/k1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; h/k2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The third program is the case of the original program and it returns <strong>nan</strong> which means <strong>Not-A-Number</strong>. </p>
<p>There is one question on quora <a href="https://www.quora.com/Why-does-division-by-zero-return-INF-infinite-with-floats-but-makes-the-program-crash-with-integers-in-C++" target="_blank" rel="noopener">Why does division by zero return INF (infinite) with floats, but makes the program crash with integers in C++?</a>. Many answers can be found there but I can’t understand the mechanism well. </p>
<p>Anyway, division by 0 is a special case and should be treated seperately. For the original program, one way is to check the <strong>count</strong> before the division. For example, we can add below piece of code after the while loop finishes</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">   <span class="keyword">if</span> (count == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"No homework grades entered, please try again."</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Alternatively, we can set a default value for the average homework grade.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> homeworkGrade;</span><br><span class="line"><span class="keyword">if</span> (count == <span class="number">0</span>)</span><br><span class="line">    homeworkGrade = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    homeworkGrade = sum/count;</span><br></pre></td></tr></table></figure>
<p>Now I apply the second method and present the modified program below.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ios&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;			<span class="keyword">using</span> <span class="built_in">std</span>::setprecision;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::streamsize;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ask for and read the student's name</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter your first name: "</span>;</span><br><span class="line">    <span class="built_in">string</span> name;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; name;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello, "</span> &lt;&lt; name &lt;&lt; <span class="string">"!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ask for and read the midterm and final grades</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter you midterm and final exam grades: "</span>;</span><br><span class="line">    <span class="keyword">double</span> midterm, <span class="keyword">final</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; midterm &gt;&gt; <span class="keyword">final</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ask for the homework grades</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Enter all your homework grades, "</span></span><br><span class="line">            <span class="string">"followed by end-of-file: "</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// the number and the sum of grades read so far</span></span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// a variable into which to read</span></span><br><span class="line">    <span class="keyword">double</span> x;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// invariant: we have read count grades so far, and sum is the sum of the first count grades</span></span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; x)</span><br><span class="line">    &#123;</span><br><span class="line">        ++count;</span><br><span class="line">        sum += x;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// special case treatment</span></span><br><span class="line">    <span class="keyword">double</span> homeworkGrade;</span><br><span class="line">    <span class="keyword">if</span> (count == <span class="number">0</span>)</span><br><span class="line">        homeworkGrade = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        homeworkGrade = sum/count;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// write a blank line to seperate outputs</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// write the result</span></span><br><span class="line">    streamsize prec = <span class="built_in">cout</span>.precision();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Your final grade is "</span> &lt;&lt; setprecision(<span class="number">3</span>) &lt;&lt;</span><br><span class="line">            <span class="number">0.2</span> * midterm + <span class="number">0.4</span> * <span class="keyword">final</span> + <span class="number">0.4</span> * homeworkGrade</span><br><span class="line">            &lt;&lt;setprecision(prec) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Test</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Please enter your first name: Brendan</span><br><span class="line">Hello, Brendan!</span><br><span class="line">Please enter you midterm and final exam grades: 95 77</span><br><span class="line">Enter all your homework grades, followed by end-of-file:</span><br><span class="line"></span><br><span class="line">Your final grade is 49.8</span><br></pre></td></tr></table></figure>
<p>Now, it works better than the original one.</p>
<hr>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p>Koenig, A. and Moo, B.E., 2000. Accelerated C++.</p>
<p>Lippman, S.B., Lajoie, J. and Moo, B.E., 2013. C++ Primer, 5th edt.</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://quantein.com/2018/03/04/Accelerated-C-Solutions-to-Exercise-Chapter-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liam">
      <meta itemprop="description" content="Stochastic Modelling Notes; Programming Notes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liam's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/04/Accelerated-C-Solutions-to-Exercise-Chapter-3/" class="post-title-link" itemprop="url">Accelerated C++ Solutions to Exercises(Chapter 3 Part 1)</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-04 06:25:01" itemprop="dateCreated datePublished" datetime="2018-03-04T06:25:01+08:00">2018-03-04</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2019-02-24 14:37:30" itemprop="dateModified" datetime="2019-02-24T14:37:30+08:00">2019-02-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span></span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>NaN:aN</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Exercise-3-0"><a href="#Exercise-3-0" class="headerlink" title="Exercise 3-0"></a>Exercise 3-0</h1><p>Compile, execute, and test the programs in this chapter</p>
<h2 id="Solution-amp-Results"><a href="#Solution-amp-Results" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><p>This exercise has been accomplished in <a href="http://quanttour.com/02/03/2018/C-Working-with-batches-of-data/" target="_blank" rel="noopener">C++ - Working with batches of data</a> with detailed explination.</p>
<hr>
<h1 id="Exercise-3-1"><a href="#Exercise-3-1" class="headerlink" title="Exercise 3-1"></a>Exercise 3-1</h1><p>Suppose we wish to find the median of a collection of values. Assume that we have read some of the values so far, and that we have no idea how many values remain to be read. Prove that we cannot afford to discard any of the values that we have read. Hint: One proof strategy is to assume that we can discard a value, and then find values for the unread—and therefore unknown—part of our collection that would cause the median to be the value that we discarded.</p>
<h2 id="Solution-amp-Results-1"><a href="#Solution-amp-Results-1" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><p>It is known that the median value of a data sample is sensitive to the number of elements. If the number is an odd number, the mid element is unique and the median value is the value of this mid element. However, if the number is an even number, there exist two mid elements and the median value is the average value of these two elements. Consider that, once a value is discarded, the number of the elements changes from odd (or even) to even (odd), and hence the median value would be inaccurate. </p>
<p>For example, follow sequence of values is part of a data sample,</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">2 8 3 4 9 7 0</span><br></pre></td></tr></table></figure>
<p>the unknown part is </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">11 6 13 9</span><br></pre></td></tr></table></figure>
<p>The ture median value is 7. If 0 is discarded, the median value becomes 7.5. If 7 is discarded, the median value is still 7. If 9 is discarded, the median value is 6.5. This indicates that the median value would be an unreliable measure for a data sample if any of values is discarded. </p>
<hr>
<h1 id="Exercise-3-2"><a href="#Exercise-3-2" class="headerlink" title="Exercise 3-2"></a>Exercise 3-2</h1><p>Write a program to compute and print the quartiles (that is, the quarter of the numbers with the largest values, the next highest quarter, and so on) of a set of integers.</p>
<h2 id="Solutions-amp-Results"><a href="#Solutions-amp-Results" class="headerlink" title="Solutions &amp; Results"></a>Solutions &amp; Results</h2><p>Quartiles of an ordered dataset are values that divide the data set into four equal parts, i.e. quarters. An intuitive strategy is to find the median value of the whole data set, and then find the median values of the divided two parts respecitively. As a result, there will exist three median values which are first quartile, second quartile and third quartile relative to the whole data set. Therefore, once we know how to compute the median value, we know how to compute quartiles. Now I’ll enter into the details of how to implement such a computing algorithm.</p>
<h3 id="data-preparation"><a href="#data-preparation" class="headerlink" title="data preparation"></a>data preparation</h3><p>At the very beiging stage, we need to store and sort all values</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter a sequence of integers, "</span></span><br><span class="line"><span class="string">"followed by end-of-file: "</span>;</span><br><span class="line"> <span class="keyword">int</span> x;</span><br><span class="line"> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; integers; <span class="comment">// to hold all values</span></span><br><span class="line"> <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; x)</span><br><span class="line">     integers.push_back(x);</span><br><span class="line"> sort(integers.<span class="built_in">begin</span>(), integers.<span class="built_in">end</span>());</span><br></pre></td></tr></table></figure>
<h3 id="find-the-median-value"><a href="#find-the-median-value" class="headerlink" title="find the median value"></a>find the median value</h3><p>Now we have a sorted data set. Due to the calculation of a median value depends on the number of elements in the data set, we need to consider several cases. The number of elements is the size of <strong>integers</strong>.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::size_type vec_size;</span><br><span class="line">vec_size <span class="built_in">size</span> = integers.<span class="built_in">size</span>();</span><br></pre></td></tr></table></figure>
<ol>
<li><p>if there is no elements(i.e. <strong>size</strong> == 0), it is impossible to compute the median value.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>)</span><br><span class="line">&#123;  </span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"You must enter at least one integer. "</span></span><br><span class="line">        <span class="string">"Please try again."</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>if <strong>size</strong> is an even number, the median value is the average value of two mid elements. In addition, <strong>size/2</strong> is exactly devided and represent the number of each side elements.<br>Due to the index of a vector starts from 0, the mid elements should be <strong>integers[size/2 - 1]</strong> and <strong>integers[size/2]</strong>. Therefore, the median value is the average of the corresponding two values. As shown in above graph, the number of elements of both sides equals to <strong>size/2</strong> because</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">left side:  number &#x3D; size&#x2F;2 - 1 - 0 + 1 &#x3D; size&#x2F;2</span><br><span class="line">right side: number &#x3D; size - 1 - size&#x2F;2 + 1 &#x3D; size&#x2F;2</span><br></pre></td></tr></table></figure>
<p><img src="/images/even.png" alt="If size is an even number"></p>
</li>
<li><p>if <strong>size</strong> is an odd number, the median value is the value of the unique mid element. <strong>size/2</strong> yields the same value as <strong>(size-1)/2</strong> in c++. Then the mid element is exact the <strong>integers[(size-1)/2]</strong> as both sides of this element has same number of elements(as shown in below graph).  This can also be verified mathematically</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">left side:  number &#x3D; (size-1)&#x2F;2 - 1 - 0 + 1 &#x3D; (size-1)&#x2F;2</span><br><span class="line">right side: number &#x3D; size - 1 - &#123;(size-1)&#x2F;2 + 1&#125; + 1 &#x3D; (size-1)&#x2F;2;</span><br></pre></td></tr></table></figure>
<p><img src="/images/odd.png" alt="If size is an odd number"></p>
</li>
</ol>
<p>Now let’s translate the algorithm into real code</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vec_size mid = <span class="built_in">size</span>/<span class="number">2</span>;</span><br><span class="line"><span class="keyword">double</span> Q2; <span class="comment">// the median is in fact the second quartile denoted by Q2</span></span><br><span class="line">Q2 = <span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span> ? (integers[mid - <span class="number">1</span>] + integers[mid])/<span class="number">2.0</span></span><br><span class="line">            : integers[mid];</span><br></pre></td></tr></table></figure>
<p><strong><em>Note that when calculate the average of two mid elements, I divide by 2.0 rather than 2 for the purpose of avoiding the loss of precision.This is because the quotient of two integers will be an integer.</em></strong></p>
<h3 id="find-the-first-quartile"><a href="#find-the-first-quartile" class="headerlink" title="find the first quartile"></a>find the first quartile</h3><p>From above analysis, we have known how to find a median, i.e. the second quartile of the dataset. The median has divided the data into two equal groups: first group is from the smallest value to the median and the other one is from the median value to the largest value. Therefore, the middle value of the first group is in fact the first quartile(also known as lower quartile) and the middle value of the second group is the third quartile (also known as upper quartile). We can apply the same method to find both middle values. Similarly, the first step is to find the size (denoted by <strong>half_size</strong>) for both groups and discuss different cases. </p>
<p>From above analysis, we know that</p>
<ol>
<li>if <strong>size</strong> is an even number, <strong>half_size</strong> == <strong>size/2</strong>.</li>
<li>if <strong>size</strong> is an odd number, <strong>half_size</strong> == <strong>(size-1)/2</strong>. <a href="https://en.wikipedia.org/wiki/Quartile" target="_blank" rel="noopener">See wikipedia-Quartile Method 1</a></li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vec_size half_size; <span class="comment">// defind a variable to represent the size of two equal groups.</span></span><br><span class="line">half_size = <span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span> ? <span class="built_in">size</span>/<span class="number">2</span> : (<span class="built_in">size</span><span class="number">-1</span>)/<span class="number">2</span>;</span><br></pre></td></tr></table></figure>
<p>Now let’s find the middle value of the first group values. </p>
<ol>
<li>if <strong>half_size == 0</strong>, then <strong>size == 1</strong>. In this case, the single element is all we have and hence all quartiles equals to the value of the single element.</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// variables to hold the first quartile and third quartile</span></span><br><span class="line"><span class="keyword">double</span> Q1, Q3; </span><br><span class="line"><span class="keyword">if</span> (half_size == <span class="number">0</span>)</span><br><span class="line">    Q1 = Q3 = integers[<span class="number">0</span>];</span><br></pre></td></tr></table></figure>
<ol start="2">
<li><p>if <strong>half_size</strong> is an even number, <strong>half_size/2</strong> is exactly divided and the mid elements are integers[half_size/2] and integers[half_size/2 - 1]. </p>
</li>
<li><p>if <strong>half_size</strong> is an odd number, <strong>half_size/2</strong> gives the value of <strong>(half_size - 1)/2</strong>. The middle value is integers[(half_size-1)/2].</p>
</li>
</ol>
<p>Both two cases are exactly the same as finding the median for the whole dataset. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vec_size mid_first = half_size/<span class="number">2</span>;</span><br><span class="line">Q1 = half_size % <span class="number">2</span> == <span class="number">0</span> ? (integers[mid_first - <span class="number">1</span>] + integers[mid_first])/<span class="number">2.0</span>  : integers[mid_first];</span><br></pre></td></tr></table></figure>

<h3 id="find-the-third-quartile"><a href="#find-the-third-quartile" class="headerlink" title="find the third quartile"></a>find the third quartile</h3><p>The upper quartile is computed as same as the lower quartile except the index to be applied. If <strong>size</strong> is even, then the starting point for the second half is <strong>mid</strong>, while if <strong>size</strong> is odd, the starting point is <strong>mid+1</strong>. Therefore</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vec_size mid_second = <span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span> ? (half_size/<span class="number">2</span> + mid) : (half_size/<span class="number">2</span> + mid + <span class="number">1</span>);</span><br><span class="line">Q3 = half_size % <span class="number">2</span> ? (integers[mid_second - <span class="number">1</span>] + integers[mid_second])/<span class="number">2.0</span> </span><br><span class="line">: integers[mid_second];</span><br></pre></td></tr></table></figure>

<h3 id="A-complete-program"><a href="#A-complete-program" class="headerlink" title="A complete program"></a>A complete program</h3><p>Now let’s put all pieces of code togther and add appropriate headers as well s using declarations. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ios&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>; 			<span class="keyword">using</span> <span class="built_in">std</span>::sort;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>; 			<span class="keyword">using</span> <span class="built_in">std</span>::streamsize;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;			<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::setprecision; 	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ask for and read integers</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter a sequence of integers, "</span></span><br><span class="line">            <span class="string">"followed by end-of-file: "</span>;</span><br><span class="line">    <span class="keyword">int</span> x;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; integers; <span class="comment">// to hold all values</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; x)</span><br><span class="line">        integers.push_back(x);</span><br><span class="line">    sort(integers.<span class="built_in">begin</span>(), integers.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get the size of the dataset</span></span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt;::size_type vec_size;</span><br><span class="line">    vec_size <span class="built_in">size</span> = integers.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"You must enter at least one integer. "</span></span><br><span class="line">            <span class="string">"Please try again."</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// find the median value which in fact is the second quartile denoted by Q2</span></span><br><span class="line">    vec_size mid = <span class="built_in">size</span>/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">double</span> Q2;</span><br><span class="line">    Q2 = <span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span> ? (integers[mid - <span class="number">1</span>] + integers[mid])/<span class="number">2.0</span> : integers[mid];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// get the size of two equal groups.</span></span><br><span class="line">    vec_size half_size; </span><br><span class="line">    half_size = <span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span> ? <span class="built_in">size</span>/<span class="number">2</span> : (<span class="built_in">size</span><span class="number">-1</span>)/<span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// find the first quartile and third quartile denoted by Q1 and Q3 respectively</span></span><br><span class="line">    <span class="keyword">double</span> Q1, Q3;</span><br><span class="line">    <span class="keyword">if</span> (half_size == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        Q1 = Q3 = integers[<span class="number">0</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        vec_size mid_first = half_size/<span class="number">2</span>;</span><br><span class="line">        Q1 = half_size % <span class="number">2</span> == <span class="number">0</span> ? (integers[mid_first - <span class="number">1</span>] + integers[mid_first])/<span class="number">2.0</span> : integers[mid_first];</span><br><span class="line"></span><br><span class="line">        vec_size mid_second = <span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span> ? (half_size/<span class="number">2</span> + mid) : (half_size/<span class="number">2</span> + mid + <span class="number">1</span>);</span><br><span class="line">        Q3 = half_size % <span class="number">2</span> == <span class="number">0</span> ? (integers[mid_second - <span class="number">1</span>] + integers[mid_second])/<span class="number">2.0</span> : integers[mid_second];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    streamsize prec = <span class="built_in">cout</span>.precision();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; setprecision(<span class="number">3</span>) &lt;&lt; <span class="string">"The first quartile is: "</span> &lt;&lt; Q1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"The second quartile is: "</span> &lt;&lt; Q2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"The second quartile is: "</span> &lt;&lt; Q3 &lt;&lt; setprecision(prec) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Test-performance"><a href="#Test-performance" class="headerlink" title="Test performance"></a>Test performance</h3><p><strong>Test sequence 1</strong>: 1 2</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Please enter a sequence of integers, followed by end-of-file: 1 2</span><br><span class="line">The first quartile is: 1</span><br><span class="line">The second quartile is: 1.5</span><br><span class="line">The second quartile is: 2</span><br></pre></td></tr></table></figure>
<p><strong>Test sequence 2</strong>: 1 2 3</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Please enter a sequence of integers, followed by end-of-file: 1 2 3</span><br><span class="line">The first quartile is: 1</span><br><span class="line">The second quartile is: 2</span><br><span class="line">The second quartile is: 3</span><br></pre></td></tr></table></figure>
<p><strong>Test sequence 3</strong>: 1 2 3 4</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Please enter a sequence of integers, followed by end-of-file: 1 2 3 4</span><br><span class="line">The first quartile is: 1.5</span><br><span class="line">The second quartile is: 2.5</span><br><span class="line">The second quartile is: 3.5</span><br></pre></td></tr></table></figure>
<p><strong>Test sequence 3</strong>: 1 3 5 6 9 0 3 2 5 3 8 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Please enter a sequence of integers, followed by end-of-file: 1 3 5 6 9 0 3 2 5 3 8 </span><br><span class="line">The first quartile is: 2</span><br><span class="line">The second quartile is: 3</span><br><span class="line">The second quartile is: 6</span><br></pre></td></tr></table></figure>
<p>Yeah, it works perfectly. </p>
<hr>
<h1 id="Exercise-3-3"><a href="#Exercise-3-3" class="headerlink" title="Exercise 3-3"></a>Exercise 3-3</h1><p>Write a program to count how many times each distinct word appears in its input.</p>
<h2 id="Solution-amp-Results-2"><a href="#Solution-amp-Results-2" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><h3 id="Intuitive-explanations"><a href="#Intuitive-explanations" class="headerlink" title="Intuitive explanations"></a>Intuitive explanations</h3><p>The purposes of this program is to write out each distinct word followed by its occurrence numbers in the input. And what we have is only unknown amount of words to be entered. Imagine that there is only one word(e.g. word1) in total, then the output will be:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">word1 appears 1 times</span><br></pre></td></tr></table></figure>
<p>Now in the case of two words, e.g. word1 and word2, if word1 is the same as word2, then the output will be:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">word1 appears 2 times</span><br></pre></td></tr></table></figure>
<p>otherwise</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">word1 appears 1 times</span><br><span class="line">word2 appears 1 times</span><br></pre></td></tr></table></figure>
<p>From these two cases, we have seen that</p>
<ol>
<li>word1 needs to be stored and its occurrence needs to be recorded</li>
<li>word2 needs to be compared with word1. As a result, it will be discarded if they are the same and the occurrence number of word1 is increased by 1, and it will be stored if they are different and its occurrence number increases by 1. </li>
</ol>
<p>By analogy, following entered words will be compared with each stored word, and will be discarded if there already exist one same word otherwise will be stored, meanwhile, the corresponding occurrence numbers are adjusted. Finally, all stored words are distinct with eachother and their occurrence numbers have been clearly recorded. Now I enter the details of this program.</p>
<h3 id="vectors-and-the-structure"><a href="#vectors-and-the-structure" class="headerlink" title="vectors and the structure"></a>vectors and the structure</h3><p>To hold each distinct word and the associated number of occurrence, I define two vectors whis have types of <strong>int</strong> and <strong>string</strong> respectively. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; counter;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; words;</span><br></pre></td></tr></table></figure>
<p>The next step is to ask for enterring word by word and store the distinct word. This can be accomplished with a while statement. To write all distinct words as well as the occurrence numbers, we can loop through <strong>words</strong> and <strong>counter</strong> using index from <strong>0</strong> to <strong>words.size() - 1</strong>.<br>Therefore, the whole structure is </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; counter;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; words;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::size_type vec_size;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">string</span> <span class="keyword">word</span>;</span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; <span class="keyword">word</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">/* pseudocode</span></span><br><span class="line"><span class="comment">         * if the word is a new distinct word</span></span><br><span class="line"><span class="comment">         *      words.push_back(word);</span></span><br><span class="line"><span class="comment">         *      counter.push_back(1);</span></span><br><span class="line"><span class="comment">         * if the word already exists</span></span><br><span class="line"><span class="comment">         *      adjust the number of occurrence for </span></span><br><span class="line"><span class="comment">         *      the existed distinct word</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// if there is no inputs, send warning</span></span><br><span class="line">    <span class="keyword">if</span> (words.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"You must input at least one word. Please try again."</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (vec_size i = <span class="number">0</span>; i != words.<span class="built_in">size</span>(); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; words[i] &lt;&lt; <span class="string">" appears "</span> &lt;&lt; counter[i] &lt;&lt; <span class="string">" times"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="loop-invariants"><a href="#loop-invariants" class="headerlink" title="loop invariants"></a>loop invariants</h3><p>The only part that is needed is write the while body. The loop invariant is that <strong>words</strong> contains each distinct word entered and <strong>counter</strong> contains the associated number of occurrence. Therefore, two goals need to be accomplished inside the while loop:</p>
<ol>
<li>check whether the current is distinct from all existed distinct words</li>
<li>adjust <strong>word</strong> and <strong>counter</strong> to maintain the loop invariant</li>
</ol>
<p>The first goal can be accomplished by comparing the current word with each word stored in <strong>words</strong>. In addition, a flag is set to indicate the status of the outcomes, that is, a distinct word or an existed word. Let’s see the code below</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> flag = <span class="number">0</span>; <span class="comment">// initial status</span></span><br><span class="line"><span class="keyword">for</span> (vec_size i = <span class="number">0</span>;  i != words.<span class="built_in">size</span>(); ++i)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">word</span> == words[i])</span><br><span class="line">    &#123;   </span><br><span class="line">        <span class="comment">// if the word is already existed, discard the word but change the counter</span></span><br><span class="line">        ++counter[i];</span><br><span class="line"></span><br><span class="line">        <span class="comment">// change status show this word is not a distinct word</span></span><br><span class="line">        flag = <span class="number">1</span>; </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The second goal is partly accomplished by the code above and the rest case is when the current <strong>word</strong> is a distinct word. Accordingly, the word should be stored into <strong>words</strong> and the initial value for occurrence number is 1. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (flag == <span class="number">0</span>)</span><br><span class="line">&#123;</span><br><span class="line">    words.push_back(<span class="keyword">word</span>);</span><br><span class="line">    counter.push_back(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Now the program is finished, and please find the complete version in the following part. I also did several tests and it works as expected. Note that I omitted the process that verify the correctness of the loop invariants here. </p>
<h3 id="A-complete-program-1"><a href="#A-complete-program-1" class="headerlink" title="A complete program"></a>A complete program</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// vectors for holding each distinct word and its occurrence numbers</span></span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; counter;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; words;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// using type alias for convenience</span></span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::size_type vec_size;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ask for and read words one by one</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter a sequence of words, and followed by end-of-file: "</span>;</span><br><span class="line">    <span class="built_in">string</span> <span class="keyword">word</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// while loop invariant: words and counter contains each distinct word and the associated times</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; <span class="keyword">word</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// set flags to indicate whether the current word already exists</span></span><br><span class="line">        <span class="comment">// flag == 0: the word is distinct from each existed distinct word</span></span><br><span class="line">        <span class="comment">// flag == 1: the word is already exist</span></span><br><span class="line">        <span class="keyword">int</span> flag = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// to maintain the outer loop invariant, compare the current word</span></span><br><span class="line">        <span class="comment">// with each existed distinct word using following for loops</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// for loop invariant: the current word has been compared with the ith distinct word</span></span><br><span class="line">        <span class="keyword">for</span> (vec_size i = <span class="number">0</span>;  i != words.<span class="built_in">size</span>(); ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// adjust the number of occurrence by 1 for existed distinct words</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">word</span> == words[i])</span><br><span class="line">            &#123;</span><br><span class="line">                ++counter[i];</span><br><span class="line">                flag = <span class="number">1</span>; <span class="comment">// change flag value to indicate that this word is distinct</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// maintain the outer loop invariant: store the new distinct word and its occurrence number</span></span><br><span class="line">        <span class="keyword">if</span> (flag == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            words.push_back(<span class="keyword">word</span>);</span><br><span class="line">            counter.push_back(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// send warning if there is no any words entered</span></span><br><span class="line">    <span class="keyword">if</span> (words.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"You must input at least one word. Please try again."</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// write a blank line to seperate the outputs</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">for</span> (vec_size i = <span class="number">0</span>; i != words.<span class="built_in">size</span>(); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; words[i] &lt;&lt; <span class="string">" appears "</span> &lt;&lt; counter[i] &lt;&lt; <span class="string">" times"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Test-performance-1"><a href="#Test-performance-1" class="headerlink" title="Test performance"></a>Test performance</h3><p><strong>Test 1</strong>: house</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Please enter a sequence of words followed by end-of-file: house</span><br><span class="line"></span><br><span class="line">house appears 1 times</span><br></pre></td></tr></table></figure>
<p><strong>Test 2</strong>: house number one and number two</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Please enter a sequence of words followed by end-of-file: house number one and number two</span><br><span class="line"></span><br><span class="line">house appears 1 times</span><br><span class="line">number appears 2 times</span><br><span class="line">one appears 1 times</span><br><span class="line">and appears 1 times</span><br><span class="line">two appears 1 times</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="Exercise-3-4"><a href="#Exercise-3-4" class="headerlink" title="Exercise 3-4"></a>Exercise 3-4</h1><p>Write a program to report the length of the longest and shortest string in its input.</p>
<h2 id="Solution-amp-Results-3"><a href="#Solution-amp-Results-3" class="headerlink" title="Solution &amp; Results"></a>Solution &amp; Results</h2><h3 id="Strategy-1"><a href="#Strategy-1" class="headerlink" title="Strategy 1"></a>Strategy 1</h3><p>A very simple solution strategy to this exercise is that store the length of each string into a vector and then implement a library sort algorithm. I won’t go into details as it is simple. Please find the code and tests below. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;     <span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;    <span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ask for words</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter words followed by end-of-file: "</span>;</span><br><span class="line">    <span class="built_in">string</span> <span class="keyword">word</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// creat a vector for holding the length of each string</span></span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">string</span>::size_type word_size;</span><br><span class="line">    <span class="built_in">vector</span>&lt;word_size&gt; length;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// read word and store the length</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; <span class="keyword">word</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        length.push_back(<span class="keyword">word</span>.<span class="built_in">size</span>());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (length.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"You must input at least one word."</span></span><br><span class="line">                <span class="string">"Please try again."</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// sort all lengths in an nondecreasing order</span></span><br><span class="line">    sort(length.<span class="built_in">begin</span>(), length.<span class="built_in">end</span>());</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"The length of the shortest string is: "</span> &lt;&lt; length[<span class="number">0</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"The length of the longest string is: "</span> &lt;&lt; length[length.<span class="built_in">size</span>() - <span class="number">1</span>] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Test 1</strong>: I am a good teacher </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Please enter words followed by end-of-file: I am a good teacher </span><br><span class="line">The length of the shortest string is: 1</span><br><span class="line">The length of the longest string is: 7</span><br></pre></td></tr></table></figure>
<p><strong>Test 2</strong>: what are you going to do</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Please enter words followed by end-of-file: what are you going to do</span><br><span class="line">The length of the shortest string is: 2</span><br><span class="line">The length of the longest string is: 5</span><br></pre></td></tr></table></figure>
<h3 id="Strategy-2"><a href="#Strategy-2" class="headerlink" title="Strategy 2"></a>Strategy 2</h3><p>Above strategy is computational inefficient due to the fact that it sorts all length values while we only need two extremes. An alternative strategy is to use <strong>insert sort</strong> algorithm but only sort one round for each of extremes. For example, now there is a sequence of integers</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">n1 n2 n3 n4 ... nx ny nz</span><br></pre></td></tr></table></figure>
<p>Step 1: assumming the largest number is <strong>n1</strong>.</p>
<p>Step 2: compare <strong>n1</strong> and <strong>n2</strong>, if <strong>n1 &gt;= n2</strong>, we exchange their positions with eachother. But if <strong>n1 &lt; n2</strong>, we keep their order and assume <strong>n2</strong> is the largest number.</p>
<p>Step 3: compare the larger number of step 2 with <strong>n3</strong>. Deal with the comparison result as same as that in step 2. </p>
<p>Step 4: continue comparison until the last number. Now the number in the rightest position is the final result, i.e. the largest number. </p>
<p>By analogy, we can find the smallest number. In this case, the precedure is simpler as we don’t need to exchange their positions. For finding the largest number, we simply discard the smaller value in each comparison. It is pretty easy to understand and no more detailed description here. Please see the complete program below.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>; 	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ask for inputs</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter words followed by end-of-file: "</span>;</span><br><span class="line">    <span class="built_in">string</span> <span class="keyword">word</span>;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">string</span>::size_type str_size;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// variables for holding the length values of the longest and shortest strings </span></span><br><span class="line">    str_size longestLength = <span class="number">0</span>;</span><br><span class="line">    str_size shortestLength = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// read words one by one</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; <span class="keyword">word</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// insert sort to get the largest value and samllest value only</span></span><br><span class="line">        <span class="keyword">if</span> (longestLength == <span class="number">0</span> || longestLength &lt; <span class="keyword">word</span>.<span class="built_in">size</span>())</span><br><span class="line">            longestLength = <span class="keyword">word</span>.<span class="built_in">size</span>();</span><br><span class="line">        <span class="keyword">if</span> (shortestLength == <span class="number">0</span> || shortestLength &gt; <span class="keyword">word</span>.<span class="built_in">size</span>())</span><br><span class="line">            shortestLength = <span class="keyword">word</span>.<span class="built_in">size</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// if there is no inputs, send warning</span></span><br><span class="line">    <span class="keyword">if</span> (longestLength == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="string">"You must enter at least one word. Please try again."</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"The length of the shortest string is: "</span> &lt;&lt; shortestLength &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"The length of the longest string is: "</span> &lt;&lt; longestLength &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>Test 1</strong>: I am a good teacher </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Please enter words followed by end-of-file: I am a good teacher </span><br><span class="line">The length of the shortest string is: 1</span><br><span class="line">The length of the longest string is: 7</span><br></pre></td></tr></table></figure>
<p><strong>Test 2</strong>: what are you going to do</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Please enter words followed by end-of-file: what are you going to do</span><br><span class="line">The length of the shortest string is: 2</span><br><span class="line">The length of the longest string is: 5</span><br></pre></td></tr></table></figure>
<p>The results of above two programs are exactly the same. </p>
<hr>
<p>To be continued. </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://quantein.com/2018/03/02/C-Working-with-batches-of-data/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liam">
      <meta itemprop="description" content="Stochastic Modelling Notes; Programming Notes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liam's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/02/C-Working-with-batches-of-data/" class="post-title-link" itemprop="url">C++ - Working with batches of data</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-02 02:17:43" itemprop="dateCreated datePublished" datetime="2018-03-02T02:17:43+08:00">2018-03-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-03-10 11:35:35" itemprop="dateModified" datetime="2018-03-10T11:35:35+08:00">2018-03-10</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span></span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>NaN:aN</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><em>Imagine a course in which each student’s final exam counts for 40% of the final grade, the midterm exam counts for 20%, and the average homework grade makes up the remaining 40%. Now we are asked to write a program that reads a student’s exam and homework grades and computes a final grade.</em></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ios&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;			<span class="keyword">using</span> <span class="built_in">std</span>::setprecision;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::streamsize;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// ask for and read the student's name</span></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter your first name: "</span>;</span><br><span class="line">	<span class="built_in">string</span> name;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; name;</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello, "</span> &lt;&lt; name &lt;&lt; <span class="string">"!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ask for and read the midterm and final grades</span></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter you midterm and final exam grades: "</span>;</span><br><span class="line">	<span class="keyword">double</span> midterm, <span class="keyword">final</span>;</span><br><span class="line">	<span class="built_in">cin</span> &gt;&gt; midterm &gt;&gt; <span class="keyword">final</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// ask for the homework grades</span></span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Enter all your homework grades, "</span></span><br><span class="line">			<span class="string">"followed by end-of-file: "</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// the number and the sum of grades read so far</span></span><br><span class="line">	<span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// a variable into which to read</span></span><br><span class="line">	<span class="keyword">double</span> x;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// invariant: we have read count grades so far, and sum is the sum of the first count grades</span></span><br><span class="line">	<span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; x)</span><br><span class="line">	&#123;</span><br><span class="line">		++count;</span><br><span class="line">		sum += x;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="comment">// write the result</span></span><br><span class="line">	streamsize prec = <span class="built_in">cout</span>.precision();</span><br><span class="line">	<span class="built_in">cout</span> &lt;&lt; <span class="string">"Your final grade is "</span> &lt;&lt; setprecision(<span class="number">3</span>) </span><br><span class="line">         &lt;&lt; <span class="number">0.2</span> * midterm + <span class="number">0.4</span> * <span class="keyword">final</span> + <span class="number">0.4</span> * sum/count </span><br><span class="line">         &lt;&lt; setprecision(prec) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="More-about-IO-system"><a href="#More-about-IO-system" class="headerlink" title="More about IO system"></a>More about IO system</h1><p>The goal of above program is to compute a final grade, which is a simple math question-computing the weighted average. Let’s start from the <strong>#include</strong> directives</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ios&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>We are familar with <iostream> which is the header that defines the standard input/output stream objects, and <string> which is the header that defines string type objects. Correspondingly, objects <strong>cin</strong> , <strong>cout</strong> and <strong>endl</strong> are defined in the <strong>iostream</strong> library, and <strong>string</strong> is defined in the <strong>string</strong> class. These names are defined in the namespace <strong>std</strong>, and need to be declared in the form of <strong>std::name</strong> or <strong>using std::name</strong> before we can use them.</p>
<p>Similarly, the <ios> is a header that defines the type <strong>streamsize</strong> which represents sizes. The <iomanip> defines the manipulator <strong>setprecision</strong> which sets the decimal precision. Both names <strong>streamsize</strong> and <strong>setprecision</strong> are defined in the namespace std.</p>
<h2 id="setprecision-shownpoint-amp-fixed"><a href="#setprecision-shownpoint-amp-fixed" class="headerlink" title="setprecision, shownpoint &amp; fixed"></a>setprecision, shownpoint &amp; fixed</h2><p><strong>setprecision</strong> is used to format floating-point values, such as <strong>float</strong> and <strong>double</strong> type values. It manipulates the stream by causing the subsequent output on that stream to be written with a given number of digits. The syntax is </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;&lt; setprecision(<span class="keyword">int</span> n) &lt;&lt;</span><br></pre></td></tr></table></figure>
<p>The parameter <strong>n</strong> determines the number of digits to be written. In this case, <strong>setprecision(3)</strong> means the output will remain three digits. Let’s do some experiments to explore more about <strong>setprecision</strong></p>
<p><strong>Experiment 1</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ios&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::setprecision;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i = <span class="number">12345</span>;</span><br><span class="line">    <span class="keyword">float</span> f1 = <span class="number">12345</span>;</span><br><span class="line">    <span class="keyword">float</span> f2 = <span class="number">3.148</span>;;</span><br><span class="line">    <span class="keyword">float</span> f3 = <span class="number">0.03148</span>;</span><br><span class="line">    <span class="keyword">float</span> f4 = <span class="number">0.03108</span>;</span><br><span class="line">    <span class="keyword">float</span> f5 = <span class="number">0.03100</span>;</span><br><span class="line">    <span class="keyword">float</span> f6 = <span class="number">1000.435</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; setprecision(<span class="number">3</span>) &lt;&lt; i &lt;&lt; <span class="built_in">endl</span>; </span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f1 &lt;&lt; <span class="built_in">endl</span>;   </span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f3 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f4 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f5 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f6 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The result is shown below</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">12345</span><br><span class="line">1.23e+004</span><br><span class="line">3.15</span><br><span class="line">0.0315</span><br><span class="line">0.0311</span><br><span class="line">0.031</span><br><span class="line">1e+003</span><br></pre></td></tr></table></figure>
<p>It can be seen from this experiment that </p>
<ol>
<li><strong>setprecision</strong> doesn’t work on int type values</li>
<li>the parameter <strong>n</strong> (in this case is 3) controls the number of significant digits (i.e. count from the first non-zero number).</li>
<li>it follows the rounding principles.</li>
<li>it omits the trailing <strong>0</strong>s.</li>
</ol>
<p>If one want to keep the trailing zero, the manipulator <strong>showpoint</strong> can be used. <strong>showpoint</strong> is declared in the <strong>ios</strong> library and its name is also in the namespace std. It sets the format flag and always includes the decimal point as well as the tail 0 for matching the precision. The <strong>showpoint</strong> flag can be unset with the <strong>noshowpoint</strong> manipulator. </p>
<p>If we want control the precision of the decimal part, we can use <strong>fixed</strong> manipulator to fixed the decimal part. Together with the <strong>setprecision(n)</strong>, the number of digits in the fractional part will be fixed at <strong>n</strong>. If there is no enough numbers after the decimal point, zero will be added to match the precision. </p>
<p>To veryfy the usages of <strong>showpoint</strong> and <strong>fixed</strong>, I did tests as follows.</p>
<p><strong>Experiment 2</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ios&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::setprecision;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::fixed;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::showpoint;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::noshowpoint;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> f1 = <span class="number">1000.00</span>;</span><br><span class="line">    <span class="keyword">float</span> f2 = <span class="number">3.14800</span>;</span><br><span class="line">    <span class="keyword">float</span> f3 = <span class="number">0.03148</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; showpoint &lt;&lt; setprecision(<span class="number">4</span>) &lt;&lt; f1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f3 &lt;&lt; noshowpoint &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// write a bank line to sepearate outputs</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; fixed &lt;&lt; setprecision(<span class="number">6</span>) &lt;&lt; f1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f3 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The result is as analysed above</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1000.</span><br><span class="line">3.148</span><br><span class="line">0.03148</span><br><span class="line"></span><br><span class="line">1000.000000</span><br><span class="line">3.148000</span><br><span class="line">0.031480</span><br></pre></td></tr></table></figure>
<h2 id="streamsize"><a href="#streamsize" class="headerlink" title="streamsize"></a>streamsize</h2><p>Once we changed the precision, the subsequent output would be formated to match the precision. If we want to change back, we can reset the precision to the original setting if we know the precision value. If we don’t know the previous setting of the <strong>cout</strong>, the <strong>cout.presicion</strong> returns us the value and its type is <strong>streamsize</strong>. </p>
<p>Without using <strong>setprecision</strong>, we could use <strong>cout.precision(n)</strong> to set the precision. The usage is shown as below</p>
<p><strong>Experiment 3</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ios&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::setprecision;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::fixed;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;	<span class="keyword">using</span> <span class="built_in">std</span>::streamsize;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">float</span> f1 = <span class="number">1000.00</span>;</span><br><span class="line">    <span class="keyword">float</span> f2 = <span class="number">3.14800</span>;</span><br><span class="line">    <span class="keyword">float</span> f3 = <span class="number">0.03148</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// return the current precision</span></span><br><span class="line">    streamsize prec1 = <span class="built_in">cout</span>.precision();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// set precision to 2</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; setprecision(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// set precision to 3, return previous value</span></span><br><span class="line">    streamsize prec2 = <span class="built_in">cout</span>.precision(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// the outputs should have three decimal digits</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; fixed &lt;&lt; f1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f3 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// reset precision value to its previous value</span></span><br><span class="line">    <span class="built_in">cout</span>.precision(prec2);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// the outputs should have two decimal digits</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; fixed &lt;&lt; f1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f3 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// reset the the initial precision value</span></span><br><span class="line">    <span class="built_in">cout</span>.precision(prec1);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; fixed &lt;&lt; f1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f2 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; f3 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// check the original value of precision</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"The origin precision value is: "</span> &lt;&lt; prec1 &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The comments show the expected results according to that </p>
<ol>
<li><strong>streamsize precision()</strong> returns the the value of the current floating-point precision.</li>
<li><strong>streamsize precision(int n)</strong> sets the precision to a new value.</li>
</ol>
<p>The program gives result as I expected</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">1000.000</span><br><span class="line">3.148</span><br><span class="line">0.031</span><br><span class="line"></span><br><span class="line">1000.00</span><br><span class="line">3.15</span><br><span class="line">0.03</span><br><span class="line"></span><br><span class="line">1000.000000</span><br><span class="line">3.148000</span><br><span class="line">0.031480</span><br><span class="line"></span><br><span class="line">The origin precision value is: 6</span><br></pre></td></tr></table></figure>
<h1 id="Return-to-while-statement"><a href="#Return-to-while-statement" class="headerlink" title="Return to while statement"></a>Return to while statement</h1><p>Let’s get back to the example. The statements in the function body begin with writing a greeting as illustrated in previous chapters. Then, it reads two values into two variables <strong>midterm</strong> and <strong>final</strong>. The input operations can be chained as</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cin</span> &gt;&gt; midterm &gt;&gt; <span class="keyword">final</span>;</span><br></pre></td></tr></table></figure>
<p>This statement is equivalent to</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cin</span> &gt;&gt; midterm;</span><br><span class="line"><span class="built_in">cin</span> &gt;&gt; <span class="keyword">final</span>;</span><br></pre></td></tr></table></figure>
<p>The next statement shows a new form of writing string literals. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"Enter all your homework grades, "</span></span><br><span class="line">        <span class="string">"followed by end-of-file: "</span>;</span><br></pre></td></tr></table></figure>
<p>It seems that two string lterals will be written, but in fact it has the same effect as the following statement</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; <span class="string">"Enter all your homework grades, followed by end-of-file: "</span>;</span><br></pre></td></tr></table></figure>
<p>This is because two or more string literals separated only by whitespace are concatenated automatically. </p>
<p>What closely follow is the while loop. </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">double</span> sum = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// a variable into which to read</span></span><br><span class="line"><span class="keyword">double</span> x;</span><br><span class="line"></span><br><span class="line"><span class="comment">// invariant: we have read count grades so far, and sum is the sum of the first count grades</span></span><br><span class="line"><span class="keyword">while</span> (<span class="built_in">cin</span> &gt;&gt; x)</span><br><span class="line">&#123;</span><br><span class="line">    ++count;</span><br><span class="line">    sum += x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>count</strong> is defined for counting the number of inputs as well as describing the loops. <strong>sum</strong> is defined for holding the summation of homework grades. Note that it is initialized with an int value 0 though it is a double type variable. Therefore, the int value will be converted automatically to double type with the fractional part of 0. </p>
<p>Since the number of homework grades is unkonwn, we could not use the while loop as before as we don’t know the number of loops. The <strong>while loop</strong> here makes it available to input multiple times continuously. As we know, the condition in a while loop should yield a value of bool, that is, true or false, otherwise the value (if available) will be converted to the type of bool. According to Koenig and Moo (2000), <em>the <strong>istream</strong> class provides a conversion that can be used to convert <strong>cin</strong> to a value that can be used in a condition</em>. <em>In addition, the value depends on the iternal state of the <strong>istream</strong> object, which will remember whether the last attempt to read worked</em>. Hence, the <strong>cin &gt;&gt; x</strong> will theoretically always yield a true value as long as we keep inputing right type values. In this example, it reminds us to send “EOF” signal, which will change the value to false, to stop the loop. </p>
<h1 id="vector"><a href="#vector" class="headerlink" title="vector"></a>vector</h1><p>The example above shows how to compute an average value of a batch of data. In reality, the goal is probably to compute the median, or other statistics in the data. However, the inputted data are not stored in above program and hence are unavailable to access. Naturally, the first step is to store the data and the second step is to access or compute the target value via algorithms. Now we learn how to deal with these problems with <strong>vector</strong>. </p>
<h2 id="Defining-and-Initializing-vectors"><a href="#Defining-and-Initializing-vectors" class="headerlink" title="Defining and Initializing vectors"></a>Defining and Initializing <strong>vector</strong>s</h2><p>The vector is a <strong>class template</strong>. Before using the vector in a program, we need to include the header and qualify the name either explicitly or using <em>using declaration</em>. For example</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span></span><br></pre></td></tr></table></figure>
<p>A <strong>vector</strong> is a container that holds a sequence  of objects of the same type. The syntax of creating a vector is</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;T&gt; name; <span class="comment">// default initialization</span></span><br></pre></td></tr></table></figure>
<p>The <strong>name</strong>  is the template name. The <strong>T</strong> insides the angle brackets represents the type of the contained objects. It could be built-in types like <strong>int</strong>, <strong>char</strong>, or class types such as <strong>string</strong>, or even <strong>vector</strong> which means that the element contained in this vector is also a vector. </p>
<p>The vector template defines how to initialze vectors. When a vector is defalut initialized, it has no elements, which creats an empty <strong>vector</strong>. We can also initialize <strong>vector</strong>s using copy initialization or direct initialization or list initialization (see the table below).</p>
<table>
<thead>
<tr>
<th align="left">Ways to initialize a vector</th>
<th align="left">reference: Lippman etc. 2012</th>
</tr>
</thead>
<tbody><tr>
<td align="left">vector<T> v1</td>
<td align="left">default initialization and creat an empty vector</td>
</tr>
<tr>
<td align="left">vector<T> v2(v1)</td>
<td align="left">copy all elements in v1 to v2</td>
</tr>
<tr>
<td align="left">vector<T> v2 = v1</td>
<td align="left">has same effect as the last one</td>
</tr>
<tr>
<td align="left">vector<T> v3(n, val)</td>
<td align="left">direct initialization with n elements of the same value val</td>
</tr>
<tr>
<td align="left">vector<T> v4(n)</td>
<td align="left">v4 has n copies of value-initialized object</td>
</tr>
<tr>
<td align="left">vector<T> v5{a, b, c}</td>
<td align="left">v5 has three elements initialized with initializers a, b, c respectively</td>
</tr>
<tr>
<td align="left">vector<T> v5 = {a, b, c}</td>
<td align="left">has same effect as the last one</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>
<p>What new usage here is the value-initialization</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;T&gt; <span class="title">v4</span><span class="params">(n)</span></span></span><br></pre></td></tr></table></figure>
<p>The <strong>n</strong> here only provide the number of elements that will be contained in the <strong>vector</strong>. But there is no initializers provided. In this case, all elements will be initialized following the principle of default initialization determined by the type of the elements. For example</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">v1</span><span class="params">(<span class="number">10</span>)</span></span>; <span class="comment">// 10 elements will be initialized with 0</span></span><br><span class="line"><span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">v2</span><span class="params">(<span class="number">10</span>)</span></span>; <span class="comment">// 10 elements will be initialized to empty string type objects</span></span><br></pre></td></tr></table></figure>
<p>If the type of the contained elements does’t support default initialization, the initialization of the vector would be failure. </p>
<p>In addition, it is worth noting the difference between </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">1</span>)    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">v1</span><span class="params">(<span class="number">10</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<p>and </p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">2</span>)    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v2&#123;<span class="number">10</span>&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">3</span>)    <span class="function"><span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; <span class="title">v3</span><span class="params">(<span class="number">10</span>, <span class="number">1</span>)</span></span>;</span><br></pre></td></tr></table></figure>
<p>and</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">4</span>)    <span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v4&#123;<span class="number">10</span>, <span class="number">1</span>&#125;;</span><br></pre></td></tr></table></figure>
<p>The first one is value-initialization as explained above while the second is list initialization with initializer 10. The third one is direct initialization with value 1 and the total number of elements is 10. The fourth one is list initialization with initializers 10 and 1, and the total number of elements is 2.</p>
<p>However, there exist some special cases</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">5</span>)    <span class="function"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; <span class="title">v5</span><span class="params">(<span class="string">"hello"</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">(<span class="number">6</span>)    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; v6&#123;<span class="number">10</span>&#125;; <span class="comment">// 10 value-initialized elements</span></span><br></pre></td></tr></table></figure>
<p>Example (5) is incorrect as we can not copy the string lterals to a vector. Example (6) is correct but has the same effect as example (1) rather than list initialization. This is because 10 can not be used to initialize an element of string type, instead it can be used to initialize the vector with 10 value-initialized <strong>string</strong>s. </p>
<p>Now returing to the beigining of this post, I’ll define a vector for the purpose of holding all homework grades.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">double</span> x;</span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; homework;</span><br></pre></td></tr></table></figure>
<h2 id="Operations-on-vectors"><a href="#Operations-on-vectors" class="headerlink" title="Operations on vectors"></a>Operations on <strong>vector</strong>s</h2><h3 id="Reading-the-elements"><a href="#Reading-the-elements" class="headerlink" title="Reading the elements"></a>Reading the elements</h3><p>One feature of a vector is that it has variable size, which is particularly helpful for us when the number of elements is unknown. The member function <strong>push_back</strong> can add a new element at the end of the vector after the current last element. The usage is shown below</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; x)</span><br><span class="line">&#123;</span><br><span class="line">    homework.push_back(x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The x is passed as an argument and its value is copied to the new element. As a result, the size of the vector <strong>homework</strong> is increased by 1.  </p>
<h3 id="Implementing-algorithms"><a href="#Implementing-algorithms" class="headerlink" title="Implementing algorithms"></a>Implementing algorithms</h3><p>Now all data have been stored into a vector. Assuming the goal of the program is to compute the median of the data set. It is known that the median value depends on the number of the stored elements (i.e. the size of the vector). </p>
<ol>
<li>if there exist an odd number of numbers, the median value is the value of the middle number. </li>
<li>if there exist an even number of numbers, there is no single middle number and the median value is the average value of two middle numbers.  </li>
</ol>
<p>For a program, we also need to consider the case of no elements.</p>
<ol start="3">
<li>if there is no elements at present, throwing a warning and asking to input again.</li>
</ol>
<p>Similar as a string, the size of a vector can be obtained through its member function <strong>size</strong>. For example, homework.size() returns the size of the vector. The returned value has a type of <strong>vector<T>::size_type</strong>. Now we can translate above conditions to real code</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// obtain the size of homework</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;::size_type vec_size;</span><br><span class="line">vecsize <span class="built_in">size</span> = homework.<span class="built_in">size</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>)</span><br><span class="line">&#123;   <span class="built_in">cout</span> &lt;&lt; <span class="string">"You must enter your grades. "</span></span><br><span class="line">            <span class="string">"Please try again."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// return 1 instead of 0 to indicate failure </span></span><br><span class="line">     <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">&#123; </span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">    <span class="comment">// compute median</span></span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">    <span class="comment">// compute median</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Note that an alternative for the condition <strong>size == 0</strong> is the <strong>empty</strong> function which returns true if vector is empty else returns false. The usage is the same as that for <strong>string</strong>s.</p>
<h4 id="Type-Aliases"><a href="#Type-Aliases" class="headerlink" title="Type Aliases"></a>Type Aliases</h4><p>For convenience, we uses <strong>type alias</strong> instead of using <strong>vector<double>::size_type</strong> directly in defining variables of such type. A <strong>type alias</strong> defines the name <strong>vec_size</strong> as a synonym for <strong>vector<double>::size_type</strong>. There are two ways to define type alias</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(1)    typedef double length; &#x2F;&#x2F; length is a synonym for double</span><br><span class="line"></span><br><span class="line">(2)    using length &#x3D; double; &#x2F;&#x2F; length is a synonmy for double</span><br></pre></td></tr></table></figure>
<p>The second method is the new feature of new standards c++2011.</p>
<h4 id="sort-function"><a href="#sort-function" class="headerlink" title="sort function"></a>sort function</h4><p>Now the rest of the work is to find the median and basically speaking, is to sort the data set. This can be done by using a library algoritm.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line">... <span class="comment">// other code </span></span><br><span class="line">sort(homework.<span class="built_in">begin</span>(), homework.<span class="built_in">end</span>());</span><br></pre></td></tr></table></figure>
<p>The <strong>sort</strong> function is defined in the library <strong>algorithm</strong> and therefore the header is added. It sorts the values in a container in an nondecreasing order. The arguments to <strong>sort</strong> specify the range of the data to be sorted. <strong>begin</strong> and <strong>end</strong> are member functions of the vector and represents the first element and (one past)the last element in <strong>homework</strong> respectively.<br>They are <strong>iterators</strong> and will further discussed in chapter 6.</p>
<p>After we obtained a ordered sequence of values, now I illustrate how to determine the median value.<br><img src="/images/even.png" alt="If size is an even number"></p>
<p>Similar as a string, we can access individual elements using <strong>subscript operator</strong>([]) and the index uses an asymmetrical range from 0 to the size of <strong>homework</strong> (excluded). If the size of <strong>homework</strong> is an even number, then size is exactly devided by 2. Due to the index starts from 0 ranther than 1, the mid elements should be <strong>homework[size/2 - 1]</strong> and <strong>homework[size/1]</strong>. Therefore, the median value is the average of the corresponding two values. As shown in above graph, the number of elements of both sides equals to <strong>size/2</strong> because</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">left side:  number &#x3D; size&#x2F;2 - 1 - 0 + 1 &#x3D; size&#x2F;2</span><br><span class="line">right side: number &#x3D; size - 1 - size&#x2F;2 + 1 &#x3D; size&#x2F;2</span><br></pre></td></tr></table></figure>
<p>If size is an odd number, the result of <strong>size/2</strong> is in fact the value of <strong>(size-1)/2</strong>. Then the mid element is exact the <strong>homework[(size-1)/2]</strong> as both sides of this element has same number of elements(as shown in below graph).  This can also be verified mathematically</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">left side:  number &#x3D; (size-1)&#x2F;2 - 1 - 0 + 1 &#x3D; (size-1)&#x2F;2</span><br><span class="line">right side: number &#x3D; size - 1 - &#123;(size-1)&#x2F;2 + 1&#125; + 1 &#x3D; (size-1)&#x2F;2;</span><br></pre></td></tr></table></figure>
<p><img src="/images/odd.png" alt="If size is an odd number"></p>
<p>Now let’s translate the algorithms to real code</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line">   vec_sz mid = <span class="built_in">size</span>/<span class="number">2</span>;</span><br><span class="line">   <span class="keyword">double</span> median;</span><br><span class="line">   </span><br><span class="line">   <span class="keyword">if</span> (<span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span>)</span><br><span class="line">        median = (homework[mid] + homework[mid<span class="number">-1</span>])/<span class="number">2.0</span>;</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">        median = homework[mid] </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong><em>Note that when calculate the average of two mid elements, I divide by 2.0 rather than 2 for the purpose of avoiding the loss of precision.This is because the quotient of two integers will be an integer.</em></strong></p>
<h4 id="The-conditional-or-ternary-operator"><a href="#The-conditional-or-ternary-operator" class="headerlink" title="The conditional (or ternary) operator"></a>The conditional (or ternary) operator</h4><p>An alternative statements for above <strong>if-else</strong> clause is to use the conditional (or ternary) operator (?:). The syntax is</p>
<pre><code>(condition 1) ? expression 1 : expression 2</code></pre><p>It means that if condition 1 evaluates to true, then expression 2 is evaluated, and if condition 1 evaluates to false, then expression 3 is evaluated instead.</p>
<p>Therefore, we can change above code as</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123; </span><br><span class="line">   vec_sz mid = <span class="built_in">size</span>/<span class="number">2</span>;</span><br><span class="line">   <span class="keyword">double</span> median;</span><br><span class="line">   </span><br><span class="line">   median =  <span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span>) ? (homework[mid] + homework[mid<span class="number">-1</span>])/<span class="number">2.0</span> : median = homework[mid];                </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="A-complete-program"><a href="#A-complete-program" class="headerlink" title="A complete program"></a>A complete program</h1><p>Finally, I put all pieces of code together and obtained the complete program. Also, it works well when I test it.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;ios&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cin</span>; 			<span class="keyword">using</span> <span class="built_in">std</span>::sort;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>; 			<span class="keyword">using</span> <span class="built_in">std</span>::streamsize;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;			<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::setprecision; 	<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">// ask for and read the student's name</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter your first name: "</span>;</span><br><span class="line">    <span class="built_in">string</span> name;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; name;</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Hello, "</span> &lt;&lt; name &lt;&lt; <span class="string">"!"</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ask for and read the midterm and final grades</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Please enter your midterm and final grades: "</span>;</span><br><span class="line">    <span class="keyword">double</span> midterm, <span class="keyword">final</span>;</span><br><span class="line">    <span class="built_in">cin</span> &gt;&gt; midterm &gt;&gt; <span class="keyword">final</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ask for the student entered some homework grades</span></span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Enter all your homework grades, "</span></span><br><span class="line">            <span class="string">"followed by end-of-file: "</span>;</span><br><span class="line">    <span class="keyword">double</span> x;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt; homework;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(<span class="built_in">cin</span> &gt;&gt; x)</span><br><span class="line">        homework.push_back(x);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// check that the student entered homework grades</span></span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">vector</span>&lt;<span class="keyword">double</span>&gt;::size_type vec_size;</span><br><span class="line">    vec_size <span class="built_in">size</span> = homework.<span class="built_in">size</span>();</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">size</span> == <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span> &lt;&lt; <span class="string">"You must enter your grades. "</span></span><br><span class="line">                <span class="string">"Please try again."</span> &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// sort the grades</span></span><br><span class="line">    sort(homework.<span class="built_in">begin</span>(), homework.<span class="built_in">end</span>());</span><br><span class="line"></span><br><span class="line">    <span class="comment">// compute the median homework grade</span></span><br><span class="line">    vec_size mid = <span class="built_in">size</span>/<span class="number">2</span>;</span><br><span class="line">    <span class="keyword">double</span> median;</span><br><span class="line">    median = <span class="built_in">size</span> % <span class="number">2</span> == <span class="number">0</span> ? (homework[mid] + homework[mid - <span class="number">1</span>])/<span class="number">2</span></span><br><span class="line">            : homework[mid];</span><br><span class="line"></span><br><span class="line">    <span class="comment">// compute and write the final grade</span></span><br><span class="line">    streamsize prec = <span class="built_in">cout</span>.precision();</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; <span class="string">"Your final grade is "</span> &lt;&lt; setprecision(<span class="number">3</span>)</span><br><span class="line">        &lt;&lt; <span class="number">0.2</span> * midterm + <span class="number">0.4</span> * <span class="keyword">final</span> + <span class="number">0.4</span> * median</span><br><span class="line">        &lt;&lt; setprecision(prec) &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Test and results:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Please enter your first name: Bruce</span><br><span class="line">Hello, Bruce!</span><br><span class="line">Please enter your midterm and final grades: 80 90</span><br><span class="line">Enter all your homework grades, followed by end-of-file: 50 60 70 80 90</span><br><span class="line">Your final grade is 80</span><br></pre></td></tr></table></figure>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="en">
    <link itemprop="mainEntityOfPage" href="http://quantein.com/2018/03/02/C-Built-in-types-and-expressions/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Liam">
      <meta itemprop="description" content="Stochastic Modelling Notes; Programming Notes">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liam's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            <a href="/2018/03/02/C-Built-in-types-and-expressions/" class="post-title-link" itemprop="url">C++ - Built-in types and expressions</a>
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2018-03-02 00:46:29" itemprop="dateCreated datePublished" datetime="2018-03-02T00:46:29+08:00">2018-03-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2018-05-06 21:14:10" itemprop="dateModified" datetime="2018-05-06T21:14:10+08:00">2018-05-06</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index"><span itemprop="name">Programming</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span></span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>NaN:aN</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Arithmetic-types"><a href="#Arithmetic-types" class="headerlink" title="Arithmetic types"></a>Arithmetic types</h1><table>
<thead>
<tr>
<th align="left">Arithmetic types in C++</th>
<th align="left"></th>
<th align="left"></th>
</tr>
</thead>
<tbody><tr>
<td align="left">Type</td>
<td align="left">Meaning</td>
<td align="left">Minimum size</td>
</tr>
<tr>
<td align="left">bool</td>
<td align="left">boolean</td>
<td align="left">NA</td>
</tr>
<tr>
<td align="left">char</td>
<td align="left">character</td>
<td align="left">8bits</td>
</tr>
<tr>
<td align="left">wchar_t</td>
<td align="left">wide character</td>
<td align="left">16bits</td>
</tr>
<tr>
<td align="left">char16_t</td>
<td align="left">Unicode character</td>
<td align="left">16bits</td>
</tr>
<tr>
<td align="left">char32_t</td>
<td align="left">Unicode character</td>
<td align="left">32bits</td>
</tr>
<tr>
<td align="left">short</td>
<td align="left">short integer</td>
<td align="left">16bits</td>
</tr>
<tr>
<td align="left">int</td>
<td align="left">integer</td>
<td align="left">16bits</td>
</tr>
<tr>
<td align="left">long</td>
<td align="left">long integer</td>
<td align="left">32bits</td>
</tr>
<tr>
<td align="left">long long</td>
<td align="left">long integer</td>
<td align="left">64bits</td>
</tr>
<tr>
<td align="left">float</td>
<td align="left">single-precision floating-point</td>
<td align="left">6 significant digits</td>
</tr>
<tr>
<td align="left">double</td>
<td align="left">double-precision floating-point</td>
<td align="left">10 significant digits</td>
</tr>
<tr>
<td align="left">long double</td>
<td align="left">extended-precision floating-point</td>
<td align="left">10 significant digits</td>
</tr>
<tr>
<td align="left"></td>
<td align="left"></td>
<td align="left"></td>
</tr>
</tbody></table>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

  </div>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/4/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/6/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Liam</p>
  <div class="site-description" itemprop="description">Stochastic Modelling Notes; Programming Notes</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">59</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/quantliam" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;quantliam" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/yanshijiutu@gmail.com" title="E-Mail → yanshijiutu@gmail.com"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liam</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
      <span class="post-meta-item-text">Symbols count total: </span>
    <span title="Symbols count total">NaNm</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">Reading time total &asymp;</span>
    <span title="Reading time total">NaN:aN</span>
</div>

        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="Total Visitors">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="Total Views">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
