<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="C++,Notes," />










<meta name="description" content="Recalling the student-grading program in Organizing programs with data structures, and thinking about how to separate students into two categories, passed and failed according to their final grades. L">
<meta name="keywords" content="C++,Notes">
<meta property="og:type" content="article">
<meta property="og:title" content="C++ - Sequential Containers (Part 1)">
<meta property="og:url" content="http://www.quanttour.com/13/03/2018/C-Sequential-Containers/index.html">
<meta property="og:site_name" content="Liam&#39;s Blog">
<meta property="og:description" content="Recalling the student-grading program in Organizing programs with data structures, and thinking about how to separate students into two categories, passed and failed according to their final grades. L">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2018-03-14T05:15:03.034Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="C++ - Sequential Containers (Part 1)">
<meta name="twitter:description" content="Recalling the student-grading program in Organizing programs with data structures, and thinking about how to separate students into two categories, passed and failed according to their final grades. L">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.quanttour.com/13/03/2018/C-Sequential-Containers/"/>





  <title>C++ - Sequential Containers (Part 1) | Liam's Blog</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Liam's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">If history repeats itself, and the unexpected always happens, how incapable must Man be of learning from experience?—George Bernard Shaw.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.quanttour.com/13/03/2018/C-Sequential-Containers/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Liam">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Liam's Blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">C++ - Sequential Containers (Part 1)</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-03-13T01:52:08+08:00">
                13-03-2018
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Programming/" itemprop="url" rel="index">
                    <span itemprop="name">Programming</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Words count in article&#58;</span>
                
                <span title="Words count in article">
                  2,409
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">
                  15
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>Recalling the student-grading program in <a href="http://quanttour.com/08/03/2018/Organizing-programs-and-data-Part-2/" target="_blank" rel="noopener">Organizing programs with data structures</a>, and thinking about how to separate students into two categories, passed and failed according to their final grades. Let’s define pass/fail criteria in final grades.<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// predicate to determine whether a student failed</span></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">fgrade</span><span class="params">(<span class="keyword">const</span> Student_info &amp;s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> grade(s) &lt; <span class="number">60</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>If the computed grade is less than 60, it is a failing grade and the predicate yields a true value.</p>
<h1 id="vector"><a href="#vector" class="headerlink" title="vector"></a>vector</h1><h2 id="An-indices-approach"><a href="#An-indices-approach" class="headerlink" title="An indices approach"></a>An <strong>indices</strong> approach</h2><p>The next is to examine each element in <strong>students</strong> based on the function <strong>fgrade</strong>, and store the records for the students who failed and who passed seperately.<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;Student_info&gt; extract_fails(<span class="built_in">vector</span>&lt;Student_info&gt; &amp;students)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Student_info&gt; pass, fail;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Student_info&gt;::size_type i = <span class="number">0</span>;</span><br><span class="line">        i != students.size(); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (fgrade(students[i]))</span><br><span class="line">            fail.push_back(students[i]);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            pass.push_back(students[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    students = pass;</span><br><span class="line">    <span class="keyword">return</span> fail;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>This function returns a vector named <strong>fail</strong> which contains the records for students who failed, and changes the original <strong>students</strong> to a vector which contains only the records for students who passed. It can be seen that the vector <strong>pass</strong> exists temporarily and seems to be superfluous from the perspective of the limited memory. </p>
<p>Alternatively, we can remove the <strong>pass</strong> and operate on the original <strong>student</strong> directly. The member function <strong>erase</strong> defined in the class template <strong>vector</strong> allows users to remove elements, either a single or a range, from a vector. Now let’s see how to change above code using <strong>erase</strong>.<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;Student_info&gt; extract_fails(<span class="built_in">vector</span>&lt;Student_info&gt; &amp;students)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Student_info&gt; fail;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Student_info&gt;::size_type i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// loop invariant: [0, i) of students represent passing grades</span></span><br><span class="line">    <span class="keyword">while</span>(i != students.size())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(fgrade(students[i]))</span><br><span class="line">        &#123;</span><br><span class="line">            fail.pushback(students[i]);</span><br><span class="line">            students.erase(students.begin() + i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            ++i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fail;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>This function only creates one vector to hold the records for students who failed. The logic is quite straightforward：</p>
<ol>
<li>when the first iteration starts, <strong>i</strong> is 0 and <strong>students.size()</strong> yields the original length of the vector.</li>
<li>then, the while body is executed. If the ith student failed, the record will be stored into <strong>fail</strong>, and also be erased from the original vector. Noting that there are two side effects: first, the length of the vector decreases by 1; the index of all reminder elements move forward by 1. By then,the element students[1] in the original vector now becomes students[0] in the new vector as the original studnets[0] has been removed. Therefore, the examination starts from i = 0 again. </li>
<li>if the ith student passed, the record will be kept and the next loop examines the following element, i.e. students[i+1]. Therefore, i increases by 1 before the end of the current loop preparing for next loop.</li>
</ol>
<p>What’s new here is the arguments of <strong>erase</strong> function.<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">students.erase(students.begin() + i);</span><br></pre></td></tr></table></figure></p>
<p>We have mentioned in previous chapters that <strong>students.begin()</strong> denotes the initial element (i.e. corresponding to index 0) in the vector <strong>students</strong>. Increasing by i, the arguments denotes the <strong>i</strong>th element. The reason to use <strong>students.begin()</strong> is that the parameter type defined in <strong>erase</strong> is <strong>const_iterator</strong> (this is discussed laster). </p>
<p>Due to the length of the vector is not fixed, the <strong>students.size()</strong> should be used in the condition as it always yields the current length when it is evaluated. If a precomputed size is used, e.g. using size defined as below to replace <strong>students.size()</strong>, students[i] may refer to nonexist elements or the loop becomes endless once any of elements is removed.<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;Student_info&gt;::size_type size = students.size();</span><br></pre></td></tr></table></figure></p>
<h2 id="An-iterators-approach"><a href="#An-iterators-approach" class="headerlink" title="An iterators approach"></a>An <strong>iterators</strong> approach</h2><p>It has been observed that each function defined above access elements from the <strong>vector</strong> in sequential order. Also it is known that <strong>indices</strong> allows us to access at random. From the perspective of the library, using <strong>indices</strong> has the same effect as that we request permissions to access elements randomly. In other words, <strong>indices</strong> privide the ability that we don’t want to use or we don’t need at all.  </p>
<p>Beyond <strong>indices</strong>, C++ supports another mechanism <strong>iterators</strong> that we can use to access elements in a vector. Not all standard containers support indices, but all standard containers supports <strong>iterators</strong>.</p>
<p><strong>iterators</strong> provide more flexibility in supporting certain operations depending on different types of containers. </p>
<p>In specific, an iterator is a value that </p>
<ul>
<li>identifies a container and an element in the container</li>
<li>let us examine the value stored in that element</li>
<li>provides operations for moving between elements in the container</li>
<li>restricts the available operations in ways that correspond to what the container can handle efficiently.</li>
</ul>
<h3 id="the-syntax"><a href="#the-syntax" class="headerlink" title="the syntax"></a>the syntax</h3><p>If we use indices for the iteration, for example,<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Student_info&gt;::size_type i = <span class="number">0</span>; </span><br><span class="line">    i != students.size(); ++i)</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; students[i].name &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure></p>
<p>alternatively, we can use iterators also<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">vector</span>&lt;Student_info&gt;::const_iterator iter = students.begin(); iter != students.end(); ++iter)</span><br><span class="line">    <span class="built_in">cout</span> &lt;&lt; (*iter).name &lt;&lt; <span class="built_in">endl</span>;</span><br></pre></td></tr></table></figure></p>
<p>From above code, we know that the type of the <strong>iter</strong> is<br><strong>vector<student_info>::const_iterator</student_info></strong>. More general, <strong>vector</strong> defines two associated itertor types:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;type&gt;::const_iterator</span><br><span class="line">vector&lt;type&gt;::iterator</span><br></pre></td></tr></table></figure></p>
<p>The difference is that <strong>iterators</strong> of type <strong>const_iterator</strong> have only read access. If we want to use an <strong>iterator</strong> to change values in a vector, we should define it using <strong>iterator</strong> type.  </p>
<p>In addition, <strong>iter</strong> is initialized with the value of <strong>students.begin()</strong>. <strong>begin</strong> and <strong>end</strong> function return values that denotes the begining or one past the end of a container, respectively. Noting that <strong>students.begin()</strong> returns a value of type <strong>iterator</strong> but is converted to the type <strong>const_iterator</strong> in above code.</p>
<p>The next is to increase the value of <strong>iter</strong> using <strong>++iter</strong>. The effect of the increment operator on <strong>iter</strong> is up to how the <strong>iterator</strong> type defines. As a result, the iterator denotes the next element in the container after this expression is executed. </p>
<p>The statement in the <strong>for</strong> body shows how to indirect access to the elements in <strong>students</strong>.<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cout</span> &lt;&lt; (*iter).name;</span><br></pre></td></tr></table></figure></p>
<p>The dereference operator (<em>) applies to <strong>iter</strong> and returns an <em>*lvalue</em></em> (i.e. the element) to which the iterator refers. </p>
<p>Alternatively, we can dereference an iterator and fetch the element via<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iter-&gt;name</span><br></pre></td></tr></table></figure></p>
<p>It has same effect as <strong>(*iter).name</strong>.</p>
<h3 id="rewrite-functions-using-iterators"><a href="#rewrite-functions-using-iterators" class="headerlink" title="rewrite functions using iterators"></a>rewrite functions using iterators</h3><p>Now let’s use iterators to rewrite the <strong>extract_fails</strong> function.<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;Student_info&gt; extract_fails(<span class="built_in">vector</span>&lt;Student_info&gt; &amp;students)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Student_info&gt; fail;</span><br><span class="line">    <span class="built_in">vector</span>&lt;Student_info&gt;::const_iterator iter = students.begin();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// loop invariant: [0, i) of students represent passing grades</span></span><br><span class="line">    <span class="keyword">while</span>(iter != students.end())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(fgrade(*iter))</span><br><span class="line">        &#123;</span><br><span class="line">            fail.pushback(*iter);</span><br><span class="line">            iter = students.erase(iter);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            ++iter;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fail;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>As mentioned earlier, we pass <strong>iter</strong> directly to the erase function as the parameter has type of <strong>const_iterator</strong>. </p>
<p>Noting that calling <strong>erase</strong> function invalidates all iterators that refer to elements after the one that was just removed. But the <strong>erase</strong> function will return an iterator that is positioned on the element that follows the erased one. Therefore, the statement becomes<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iter = students.erase(iter);</span><br></pre></td></tr></table></figure></p>
<p>Iterators also support equility (=) and inequaility (!=) operations. Two iterators are equal if they denote the same element or they are off-the-end iterator for the same container. </p>
<h2 id="Iterator-arithmetic"><a href="#Iterator-arithmetic" class="headerlink" title="Iterator arithmetic"></a>Iterator arithmetic</h2><p>All standard containers support above iterator operations. But iterators for <strong>vector</strong> and <strong>string</strong> also support additional operations as shown below.</p>
<ol>
<li><p><strong>iter +/n</strong>. Adding/substracting an integer <strong>n</strong> to an iterator yields an iterator that denotes the <strong>n</strong>th emelemt (if available) after/before the original element, or one past the end of the container. </p>
</li>
<li><p><strong>iter1 - iter2</strong>. Substracting two iterators yields an number when added to the right-hand operand yields the left operand. The iterators must denote elements within the container or one past the end of the container.</p>
</li>
<li><p><strong>&gt;, &gt;=, &lt;, &lt;=</strong>. One iterator is less than another if it denotes an element that appears before the element that denoted by the other iterator. Both iterators must denote elements within the container or one past the end of the container.</p>
</li>
</ol>
<h1 id="list"><a href="#list" class="headerlink" title="list"></a>list</h1><p><strong>vector</strong> allows us to arbitrarily access elements efficiently. Moreover, it performs well when adding or deleting the element at the end of the vector. However, <strong>vector</strong> is not a good choice when it come to inserting or removing elements from the interior of the vector, such as functions illustrated above.  </p>
<p>To deal with such problems, the standard library provides another data structure <strong>list</strong> for us to efficiently insert or delete elements anywhere in the container. On the other hand, <strong>list</strong> doesn’t support random access via indices. It only supports bidirectional sequential access via iterators. </p>
<p>The <strong>list</strong> type is defined in the standard header <list>. Same as the <strong>vector</strong>, <strong>list</strong> is also a class template. In addition, <strong>list</strong> and <strong>vector</strong> share many operations. For example, we can use <strong>list</strong> to rewrite the function <strong>extract_fails</strong>.<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// use list instead of vector</span></span><br><span class="line"><span class="built_in">list</span>&lt;Student_info&gt; extract_fails(<span class="built_in">list</span>&lt;Student_info&gt; &amp;students)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">list</span>&lt;Student_info&gt; fails;</span><br><span class="line">    <span class="built_in">list</span>&lt;Student_info&gt;::iterator iter = students.begin();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span>(iter != students.end())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (fgrade(*iter))</span><br><span class="line">        &#123;</span><br><span class="line">            fail.push_back(*iter);</span><br><span class="line">            iter = students.erase(iter);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            ++iter;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> fail;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></list></p>
<p>The code above has no distinct difference comparing with the <strong>vector</strong> version. However, the important difference between <strong>list</strong>s and <strong>vector</strong>s is that how they affect on iterators.</p>
<ol>
<li><p>For <strong>vector</strong>s, the <strong>erase</strong> operation invalidates all iterators that refer to elements including the one was just removed and the subsequent elements. It is because that when removing one element, all following elements move one position towards the one erased. The <strong>push_back</strong> operation invalidates all iterators due to the fact the entirely <strong>vector</strong> might be reallocated to a new area for holding the new element. </p>
</li>
<li><p>For <strong>list</strong>s, the <strong>erase</strong> and <strong>push_back</strong> operations do not invalidate other iterators except the one that was erased. </p>
</li>
</ol>
<p>Another difference is that the <strong>list</strong> type does’t support the standard <strong>sort</strong> function. It has its own member funciton <strong>sort</strong> which can be called as follows<br><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span> &lt;Student_info&gt; students;</span><br><span class="line">students.sort(compare);</span><br></pre></td></tr></table></figure></p>
<h1 id="Taking-strings-apart"><a href="#Taking-strings-apart" class="headerlink" title="Taking strings apart"></a>Taking strings apart</h1><p>A <strong>string</strong> can be regarded as a special container that only contains characters. It supports many operations, such as random access through <strong>indices</strong> and <strong>iterators</strong>, similar to a <strong>vector</strong>. Therefore, we can access and operate on a specific character. In addition, the standard header <cctype> defines a bunch of functions that can be used to deal with single character in a <strong>string</strong>. The table below gives the details of each function</cctype></p>
<table>
<thead>
<tr>
<th style="text-align:left"><strong>cctype</strong> functions</th>
<th style="text-align:left">Source: Lippman etc. 2012, p.82</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">isalnum(c)</td>
<td style="text-align:left">true if c is a letter or a digit</td>
</tr>
<tr>
<td style="text-align:left">isalpha(c)</td>
<td style="text-align:left">true if c is a letter</td>
</tr>
<tr>
<td style="text-align:left">iscntrl(c)</td>
<td style="text-align:left">true if c is a control character</td>
</tr>
<tr>
<td style="text-align:left">isdigit(c)</td>
<td style="text-align:left">true if c is a digit</td>
</tr>
<tr>
<td style="text-align:left">isgraph(c)</td>
<td style="text-align:left">true if c is not a space but is printable</td>
</tr>
<tr>
<td style="text-align:left">islower(c)</td>
<td style="text-align:left">true if c is a lowercase letter</td>
</tr>
<tr>
<td style="text-align:left">isprint(c)</td>
<td style="text-align:left">true if c is a printable character</td>
</tr>
<tr>
<td style="text-align:left">ispunct(c)</td>
<td style="text-align:left">true if c is a punctuation character</td>
</tr>
<tr>
<td style="text-align:left">isspace(c)</td>
<td style="text-align:left">true if c is whitespace</td>
</tr>
<tr>
<td style="text-align:left">isupper(c)</td>
<td style="text-align:left">true if c is an uppercase letter</td>
</tr>
<tr>
<td style="text-align:left">isxdigit(c)</td>
<td style="text-align:left">true if c is a hexademical digit</td>
</tr>
<tr>
<td style="text-align:left">tolower(c)</td>
<td style="text-align:left">if c is an uppercase letter, it returns the lowercase letter; otherwise returns c unchanged</td>
</tr>
<tr>
<td style="text-align:left">toupper(c)</td>
<td style="text-align:left">if c is a lowercase letter, it returns the uppercase letter; otherwise returns c unchanged</td>
</tr>
<tr>
<td style="text-align:left"></td>
</tr>
</tbody>
</table>
<p>For example, we can write a funciton to extract each word from a string like<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The wealth of the mind is the only wealth</span><br></pre></td></tr></table></figure></p>
<p>We can use a <strong>string</strong> member function <strong>substr</strong> to construct a new <strong>string</strong> object with its value initialized to a copy of a substring of the original <strong>string</strong>. <strong>substr</strong> defines two parameters, of which one is the inital position of the substring in the original string and the other one is the length of the substring. Therefore, the key to solve this project is to find the index of the begining of each word and the length. It can be observed that each word starts from a nonwhitespace character and ends with a character followed by whitespace. Assuming the first character of a word is positioned at indice <strong>i</strong> and the whitespace that closely follows the end of the word has indice <strong>j</strong>, the length of the word will be <strong>j - i</strong> (imagine the half-open range). </p>
<p>The solution is provided in the book and shown as below</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; split(<span class="keyword">const</span> <span class="built_in">string</span> &amp;s)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; ret;</span><br><span class="line">    <span class="keyword">typedef</span> <span class="built_in">string</span>::size_type string_size;</span><br><span class="line">    string_size i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// invariant: we have processed characters [original value of i, i)</span></span><br><span class="line">    <span class="keyword">while</span>(i != s.size())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// ignore leading blanks</span></span><br><span class="line">        <span class="comment">// invariant: characters in range [original i, current i) are all spaces</span></span><br><span class="line">        <span class="keyword">while</span>(i != s.size() &amp;&amp; <span class="built_in">isspace</span>(s[i]))    </span><br><span class="line">            ++i;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// find end of the next word</span></span><br><span class="line">        string_size j = i;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// invariant: none of the characters in range [original j, current j)</span></span><br><span class="line">        <span class="keyword">while</span>(j != s.size() &amp;&amp; !<span class="built_in">isspace</span>(s[j]))</span><br><span class="line">            ++j;</span><br><span class="line">        <span class="comment">// if we found some nonwhitespace characters</span></span><br><span class="line">        <span class="keyword">if</span> (i != j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">// copy from s starting at i and taking j - i characters </span></span><br><span class="line">            ret.push_back(s.substr(i, j-i));</span><br><span class="line">            i = j;    </span><br><span class="line">        &#125;   </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Noting that, when the function try to recognize the last word, the third while loop will stop because of <strong>j == s.size()</strong> even if <strong>!isspace(s[j])</strong> is still true in the case that no whitespaces follows the last word. I add <strong>#include</strong> directives and using declarations, and test the program using the example string described above.</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">cout</span>; 		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">vector</span>;</span><br><span class="line"><span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">endl</span>;		<span class="keyword">using</span> <span class="built_in">std</span>::<span class="built_in">string</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// function declaration</span></span><br><span class="line"><span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; split(<span class="keyword">const</span> <span class="built_in">string</span> &amp;s);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="comment">// define a string contains words separated by whitespaces</span></span><br><span class="line">	<span class="built_in">string</span> s&#123;<span class="string">"The wealth of the mind is the only wealth"</span>&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// define a vector to hold splitted words</span></span><br><span class="line">	<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt; words = split(s);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// write each line that contains one word</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="built_in">vector</span>&lt;<span class="built_in">string</span>&gt;::size_type i = <span class="number">0</span>; i != words.size(); ++i)</span><br><span class="line">		<span class="built_in">cout</span> &lt;&lt; words[i] &lt;&lt; <span class="built_in">endl</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Please define the split function here</span></span><br></pre></td></tr></table></figure>
<p><strong>Test results</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">The</span><br><span class="line">wealth</span><br><span class="line">of</span><br><span class="line">the</span><br><span class="line">mind</span><br><span class="line">is</span><br><span class="line">the</span><br><span class="line">only</span><br><span class="line">wealth</span><br></pre></td></tr></table></figure></p>
<hr>
<p>To be continued.</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/C/" rel="tag"># C++</a>
          
            <a href="/tags/Notes/" rel="tag"># Notes</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/11/03/2018/Accelerated-C-Solutions-to-Exercises-Chapter-4-Part-2/" rel="next" title="Accelerated C++ Solutions to Exercises(Chapter 4 Part 2)">
                <i class="fa fa-chevron-left"></i> Accelerated C++ Solutions to Exercises(Chapter 4 Part 2)
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/14/03/2018/C-Sequential-Containers-Part-2/" rel="prev" title="C++ - Sequential Containers (Part 2)">
                C++ - Sequential Containers (Part 2) <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Liam</p>
              <p class="site-description motion-element" itemprop="description">Stochastic Modelling Notes; Programming Notes</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">40</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">2</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">5</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/quantliam" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:yanshijiutu@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#vector"><span class="nav-number">1.</span> <span class="nav-text">vector</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#An-indices-approach"><span class="nav-number">1.1.</span> <span class="nav-text">An indices approach</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#An-iterators-approach"><span class="nav-number">1.2.</span> <span class="nav-text">An iterators approach</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#the-syntax"><span class="nav-number">1.2.1.</span> <span class="nav-text">the syntax</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#rewrite-functions-using-iterators"><span class="nav-number">1.2.2.</span> <span class="nav-text">rewrite functions using iterators</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Iterator-arithmetic"><span class="nav-number">1.3.</span> <span class="nav-text">Iterator arithmetic</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#list"><span class="nav-number">2.</span> <span class="nav-text">list</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Taking-strings-apart"><span class="nav-number">3.</span> <span class="nav-text">Taking strings apart</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Liam</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">92.3k</span>
  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
